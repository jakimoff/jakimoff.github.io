function MapboxLanguage(t){if(t=Object.assign({},t),!(this instanceof MapboxLanguage))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=t.defaultLanguage,this._isLanguageField=t.languageField||/^\{name/,this._getLanguageField=t.getLanguageField||function(t){return"mul"===t?"{name}":"{name_"+t+"}"},this._languageSource=t.languageSource||null,this._languageTransform=t.languageTransform||function(t,e){return"ar"===e?noSpacing(t):standardSpacing(t)},this._excludedLayerIds=t.excludedLayerIds||[],this.supportedLanguages=t.supportedLanguages||["ar","en","es","fr","de","ja","ko","mul","pt","ru","zh"]}function standardSpacing(t){var e=t.layers.map(function(t){if(!(t.layout||{})["text-field"])return t;var e=0;return"state_label"===t["source-layer"]&&(e=.15),"marine_label"===t["source-layer"]&&(/-lg/.test(t.id)&&(e=.25),/-md/.test(t.id)&&(e=.15),/-sm/.test(t.id)&&(e=.1)),"place_label"===t["source-layer"]&&(/-suburb/.test(t.id)&&(e=.15),/-neighbour/.test(t.id)&&(e=.1),/-islet/.test(t.id)&&(e=.01)),"airport_label"===t["source-layer"]&&(e=.01),"rail_station_label"===t["source-layer"]&&(e=.01),"poi_label"===t["source-layer"]&&/-scalerank/.test(t.id)&&(e=.01),"road_label"===t["source-layer"]&&(/-label-/.test(t.id)&&(e=.01),/-shields/.test(t.id)&&(e=.05)),Object.assign({},t,{layout:Object.assign({},t.layout,{"text-letter-spacing":e})})});return Object.assign({},t,{layers:e})}function noSpacing(t){var e=t.layers.map(function(t){return(t.layout||{})["text-field"]?Object.assign({},t,{layout:Object.assign({},t.layout,{"text-letter-spacing":0})}):t});return Object.assign({},t,{layers:e})}function isNameStringField(t,e){return"string"==typeof e&&t.test(e)}function isNameFunctionField(t,e){return e.stops&&e.stops.filter(function(e){return t.test(e[1])}).length>0}function adaptPropertyLanguage(t,e,n){if(isNameStringField(t,e))return n;if(isNameFunctionField(t,e)){var i=e.stops.map(function(e){return t.test(e[1])?[e[0],n]:e});return Object.assign({},e,{stops:i})}return e}function changeLayerTextProperty(t,e,n,i){return e.layout&&e.layout["text-field"]&&-1===i.indexOf(e.id)?Object.assign({},e,{layout:Object.assign({},e.layout,{"text-field":adaptPropertyLanguage(t,e.layout["text-field"],n)})}):e}function findStreetsSource(t){return Object.keys(t.sources).filter(function(e){return/mapbox-streets-v\d/.test(t.sources[e].url)})[0]}function browserLanguage(t){var e=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,n=e.split("-"),i=e;return n.length>1&&(i=n[0]),t.indexOf(i)>-1?i:null}function ie11Polyfill(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0})}!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e,n){var i,r=(e=e||ot).createElement("script");if(r.text=t,n)for(i in xt)n[i]&&(r[i]=n[i]);e.head.appendChild(r).parentNode.removeChild(r)}function i(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ht[dt.call(t)]||"object":typeof t}function r(t){var e=!!t&&"length"in t&&t.length,n=i(t);return!yt(t)&&!_t(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function a(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function o(t,e,n){return yt(e)?bt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?bt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?bt.grep(t,function(t){return pt.call(e,t)>-1!==n}):bt.filter(e,t,n)}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function l(t){var e={};return bt.each(t.match(Pt)||[],function(t,n){e[n]=!0}),e}function u(t){return t}function c(t){throw t}function p(t,e,n,i){var r;try{t&&yt(r=t.promise)?r.call(t).done(e).fail(n):t&&yt(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function h(){ot.removeEventListener("DOMContentLoaded",h),t.removeEventListener("load",h),bt.ready()}function d(t,e){return e.toUpperCase()}function f(t){return t.replace(Bt,"ms-").replace(Rt,d)}function m(){this.expando=bt.expando+m.uid++}function g(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:jt.test(t)?JSON.parse(t):t)}function v(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Ut,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=g(n)}catch(t){}Vt.set(t,e,n)}else n=void 0;return n}function y(t,e,n,i){var r,a,o=20,s=i?function(){return i.cur()}:function(){return bt.css(t,e,"")},l=s(),u=n&&n[3]||(bt.cssNumber[e]?"":"px"),c=(bt.cssNumber[e]||"px"!==u&&+l)&&$t.exec(bt.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;o--;)bt.style(t,e,c+u),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),c/=a;c*=2,bt.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function _(t){var e,n=t.ownerDocument,i=t.nodeName,r=Wt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=bt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Wt[i]=r,r)}function x(t,e){for(var n,i,r=[],a=0,o=t.length;a<o;a++)(i=t[a]).style&&(n=i.style.display,e?("none"===n&&(r[a]=Nt.get(i,"display")||null,r[a]||(i.style.display="")),""===i.style.display&&Ht(i)&&(r[a]=_(i))):"none"!==n&&(r[a]="none",Nt.set(i,"display",n)));for(a=0;a<o;a++)null!=r[a]&&(t[a].style.display=r[a]);return t}function b(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&a(t,e)?bt.merge([t],n):n}function w(t,e){for(var n=0,i=t.length;n<i;n++)Nt.set(t[n],"globalEval",!e||Nt.get(e[n],"globalEval"))}function E(t,e,n,r,a){for(var o,s,l,u,c,p,h=e.createDocumentFragment(),d=[],f=0,m=t.length;f<m;f++)if((o=t[f])||0===o)if("object"===i(o))bt.merge(d,o.nodeType?[o]:o);else if(Qt.test(o)){for(s=s||h.appendChild(e.createElement("div")),l=(Yt.exec(o)||["",""])[1].toLowerCase(),u=Jt[l]||Jt._default,s.innerHTML=u[1]+bt.htmlPrefilter(o)+u[2],p=u[0];p--;)s=s.lastChild;bt.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(r&&bt.inArray(o,r)>-1)a&&a.push(o);else if(c=bt.contains(o.ownerDocument,o),s=b(h.appendChild(o),"script"),c&&w(s),n)for(p=0;o=s[p++];)Kt.test(o.type||"")&&n.push(o);return h}function T(){return!0}function S(){return!1}function C(){try{return ot.activeElement}catch(t){}}function k(t,e,n,i,r,a){var o,s;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(s in e)k(t,s,n,i,e[s],a);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=S;else if(!r)return t;return 1===a&&(o=r,(r=function(t){return bt().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=bt.guid++)),t.each(function(){bt.event.add(this,e,r,i,n)})}function z(t,e){return a(t,"table")&&a(11!==e.nodeType?e:e.firstChild,"tr")?bt(t).children("tbody")[0]||t:t}function A(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function M(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function I(t,e){var n,i,r,a,o,s,l,u;if(1===e.nodeType){if(Nt.hasData(t)&&(a=Nt.access(t),o=Nt.set(e,a),u=a.events)){delete o.handle,o.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)bt.event.add(e,r,u[r][n])}Vt.hasData(t)&&(s=Vt.access(t),l=bt.extend({},s),Vt.set(e,l))}}function P(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Zt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function L(t,e,i,r){e=ut.apply([],e);var a,o,s,l,u,c,p=0,h=t.length,d=h-1,f=e[0],m=yt(f);if(m||h>1&&"string"==typeof f&&!vt.checkClone&&oe.test(f))return t.each(function(n){var a=t.eq(n);m&&(e[0]=f.call(this,n,a.html())),L(a,e,i,r)});if(h&&(a=E(e,t[0].ownerDocument,!1,t,r),o=a.firstChild,1===a.childNodes.length&&(a=o),o||r)){for(l=(s=bt.map(b(a,"script"),A)).length;p<h;p++)u=a,p!==d&&(u=bt.clone(u,!0,!0),l&&bt.merge(s,b(u,"script"))),i.call(t[p],u,p);if(l)for(c=s[s.length-1].ownerDocument,bt.map(s,M),p=0;p<l;p++)u=s[p],Kt.test(u.type||"")&&!Nt.access(u,"globalEval")&&bt.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?bt._evalUrl&&bt._evalUrl(u.src):n(u.textContent.replace(se,""),c,u))}return t}function D(t,e,n){for(var i,r=e?bt.filter(e,t):t,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||bt.cleanData(b(i)),i.parentNode&&(n&&bt.contains(i.ownerDocument,i)&&w(b(i,"script")),i.parentNode.removeChild(i));return t}function O(t,e,n){var i,r,a,o,s=t.style;return(n=n||ue(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||bt.contains(t.ownerDocument,t)||(o=bt.style(t,e)),!vt.pixelBoxStyles()&&le.test(o)&&ce.test(e)&&(i=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function B(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function R(t){if(t in ge)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=me.length;n--;)if((t=me[n]+e)in ge)return t}function F(t){var e=bt.cssProps[t];return e||(e=bt.cssProps[t]=R(t)||t),e}function N(t,e,n){var i=$t.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function V(t,e,n,i,r,a){var o="width"===e?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=bt.css(t,n+Gt[o],!0,r)),i?("content"===n&&(l-=bt.css(t,"padding"+Gt[o],!0,r)),"margin"!==n&&(l-=bt.css(t,"border"+Gt[o]+"Width",!0,r))):(l+=bt.css(t,"padding"+Gt[o],!0,r),"padding"!==n?l+=bt.css(t,"border"+Gt[o]+"Width",!0,r):s+=bt.css(t,"border"+Gt[o]+"Width",!0,r));return!i&&a>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-l-s-.5))),l}function j(t,e,n){var i=ue(t),r=O(t,e,i),a="border-box"===bt.css(t,"boxSizing",!1,i),o=a;if(le.test(r)){if(!n)return r;r="auto"}return o=o&&(vt.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===bt.css(t,"display",!1,i))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],o=!0),(r=parseFloat(r)||0)+V(t,e,n||(a?"border":"content"),o,i,r)+"px"}function U(t,e,n,i,r){return new U.prototype.init(t,e,n,i,r)}function q(){ye&&(!1===ot.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(q):t.setTimeout(q,bt.fx.interval),bt.fx.tick())}function $(){return t.setTimeout(function(){ve=void 0}),ve=Date.now()}function G(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=Gt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function H(t,e,n){for(var i,r=(Z.tweeners[e]||[]).concat(Z.tweeners["*"]),a=0,o=r.length;a<o;a++)if(i=r[a].call(n,e,t))return i}function X(t,e,n){var i,r,a,o,s,l,u,c,p="width"in e||"height"in e,h=this,d={},f=t.style,m=t.nodeType&&Ht(t),g=Nt.get(t,"fxshow");n.queue||(null==(o=bt._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,bt.queue(t,"fx").length||o.empty.fire()})}));for(i in e)if(r=e[i],_e.test(r)){if(delete e[i],a=a||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}d[i]=g&&g[i]||bt.style(t,i)}if((l=!bt.isEmptyObject(e))||!bt.isEmptyObject(d)){p&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=g&&g.display)&&(u=Nt.get(t,"display")),"none"===(c=bt.css(t,"display"))&&(u?c=u:(x([t],!0),u=t.style.display||u,c=bt.css(t,"display"),x([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===bt.css(t,"float")&&(l||(h.done(function(){f.display=u}),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1;for(i in d)l||(g?"hidden"in g&&(m=g.hidden):g=Nt.access(t,"fxshow",{display:u}),a&&(g.hidden=!m),m&&x([t],!0),h.done(function(){m||x([t]),Nt.remove(t,"fxshow");for(i in d)bt.style(t,i,d[i])})),l=H(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}}function W(t,e){var n,i,r,a,o;for(n in t)if(i=f(n),r=e[i],a=t[n],Array.isArray(a)&&(r=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),(o=bt.cssHooks[i])&&"expand"in o){a=o.expand(a),delete t[i];for(n in a)n in t||(t[n]=a[n],e[n]=r)}else e[i]=r}function Z(t,e,n){var i,r,a=0,o=Z.prefilters.length,s=bt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ve||$(),n=Math.max(0,u.startTime+u.duration-e),i=1-(n/u.duration||0),a=0,o=u.tweens.length;a<o;a++)u.tweens[a].run(i);return s.notifyWith(t,[u,i,n]),i<1&&o?n:(o||s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:bt.extend({},e),opts:bt.extend(!0,{specialEasing:{},easing:bt.easing._default},n),originalProperties:e,originalOptions:n,startTime:ve||$(),duration:n.duration,tweens:[],createTween:function(e,n){var i=bt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(W(c,u.opts.specialEasing);a<o;a++)if(i=Z.prefilters[a].call(u,t,c,u.opts))return yt(i.stop)&&(bt._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return bt.map(c,H,u),yt(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),bt.fx.timer(bt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}function Y(t){return(t.match(Pt)||[]).join(" ")}function K(t){return t.getAttribute&&t.getAttribute("class")||""}function J(t){return Array.isArray(t)?t:"string"==typeof t?t.match(Pt)||[]:[]}function Q(t,e,n,r){var a;if(Array.isArray(e))bt.each(e,function(e,i){n||Ie.test(t)?r(t,i):Q(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==i(e))r(t,e);else for(a in e)Q(t+"["+a+"]",e[a],n,r)}function tt(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,a=e.toLowerCase().match(Pt)||[];if(yt(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function et(t,e,n,i){function r(s){var l;return a[s]=!0,bt.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||o||a[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var a={},o=t===qe;return r(e.dataTypes[0])||!a["*"]&&r("*")}function nt(t,e){var n,i,r=bt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&bt.extend(!0,t,i),t}function it(t,e,n){for(var i,r,a,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){a=r;break}o||(o=r)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}function rt(t,e,n,i){var r,a,o,s,l,u={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(r in u)if((s=r.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[r]:!0!==u[r]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}var at=[],ot=t.document,st=Object.getPrototypeOf,lt=at.slice,ut=at.concat,ct=at.push,pt=at.indexOf,ht={},dt=ht.toString,ft=ht.hasOwnProperty,mt=ft.toString,gt=mt.call(Object),vt={},yt=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_t=function(t){return null!=t&&t===t.window},xt={type:!0,src:!0,noModule:!0},bt=function(t,e){return new bt.fn.init(t,e)},wt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;bt.fn=bt.prototype={jquery:"3.3.1",constructor:bt,length:0,toArray:function(){return lt.call(this)},get:function(t){return null==t?lt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=bt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return bt.each(this,t)},map:function(t){return this.pushStack(bt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(lt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ct,sort:at.sort,splice:at.splice},bt.extend=bt.fn.extend=function(){var t,e,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||yt(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=o[e],o!==(i=t[e])&&(u&&i&&(bt.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,a=n&&Array.isArray(n)?n:[]):a=n&&bt.isPlainObject(n)?n:{},o[e]=bt.extend(u,a,i)):void 0!==i&&(o[e]=i));return o},bt.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==dt.call(t)||(e=st(t))&&("function"!=typeof(n=ft.call(e,"constructor")&&e.constructor)||mt.call(n)!==gt))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){n(t)},each:function(t,e){var n,i=0;if(r(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(wt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(r(Object(t))?bt.merge(n,"string"==typeof t?[t]:t):ct.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:pt.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,a=t.length,o=!n;r<a;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,a,o=0,s=[];if(r(t))for(i=t.length;o<i;o++)null!=(a=e(t[o],o,n))&&s.push(a);else for(o in t)null!=(a=e(t[o],o,n))&&s.push(a);return ut.apply([],s)},guid:1,support:vt}),"function"==typeof Symbol&&(bt.fn[Symbol.iterator]=at[Symbol.iterator]),bt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ht["[object "+e+"]"]=e.toLowerCase()});var Et=function(t){function e(t,e,n,i){var r,a,o,s,l,u,c,h=e&&e.ownerDocument,f=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return n;if(!i&&((e?e.ownerDocument||e:j)!==L&&P(e),e=e||L,O)){if(11!==f&&(l=vt.exec(t)))if(r=l[1]){if(9===f){if(!(o=e.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(h&&(o=h.getElementById(r))&&N(e,o)&&o.id===r)return n.push(o),n}else{if(l[2])return J.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&w.getElementsByClassName&&e.getElementsByClassName)return J.apply(n,e.getElementsByClassName(r)),n}if(w.qsa&&!H[t+" "]&&(!B||!B.test(t))){if(1!==f)h=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(bt,wt):e.setAttribute("id",s=V),a=(u=C(t)).length;a--;)u[a]="#"+s+" "+d(u[a]);c=u.join(","),h=yt.test(t)&&p(e.parentNode)||e}if(c)try{return J.apply(n,h.querySelectorAll(c)),n}catch(t){}finally{s===V&&e.removeAttribute("id")}}}return z(t.replace(st,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>E.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[V]=!0,t}function r(t){var e=L.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e){for(var n=t.split("|"),i=n.length;i--;)E.attrHandle[n[i]]=e}function o(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Tt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var r,a=t([],n.length,e),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))})})}function p(t){return t&&void 0!==t.getElementsByTagName&&t}function h(){}function d(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=e.next,a=r||i,o=n&&"parentNode"===a,s=q++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,l){var u,c,p,h=[U,s];if(l){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(p=e[V]||(e[V]={}),c=p[e.uniqueID]||(p[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((u=c[a])&&u[0]===U&&u[1]===s)return h[2]=u[2];if(c[a]=h,h[2]=t(e,n,l))return!0}return!1}}function m(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var r=0,a=n.length;r<a;r++)e(t,n[r],i);return i}function v(t,e,n,i,r){for(var a,o=[],s=0,l=t.length,u=null!=e;s<l;s++)(a=t[s])&&(n&&!n(a,i,r)||(o.push(a),u&&e.push(s)));return o}function y(t,e,n,r,a,o){return r&&!r[V]&&(r=y(r)),a&&!a[V]&&(a=y(a,o)),i(function(i,o,s,l){var u,c,p,h=[],d=[],f=o.length,m=i||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?m:v(m,h,t,s,l),_=n?a||(i?t:f||r)?[]:o:y;if(n&&n(y,_,s,l),r)for(u=v(_,d),r(u,[],s,l),c=u.length;c--;)(p=u[c])&&(_[d[c]]=!(y[d[c]]=p));if(i){if(a||t){if(a){for(u=[],c=_.length;c--;)(p=_[c])&&u.push(y[c]=p);a(null,_=[],u,l)}for(c=_.length;c--;)(p=_[c])&&(u=a?tt(i,p):h[c])>-1&&(i[u]=!(o[u]=p))}}else _=v(_===o?_.splice(f,_.length):_),a?a(null,o,_,l):J.apply(o,_)})}function _(t){for(var e,n,i,r=t.length,a=E.relative[t[0].type],o=a||E.relative[" "],s=a?1:0,l=f(function(t){return t===e},o,!0),u=f(function(t){return tt(e,t)>-1},o,!0),c=[function(t,n,i){var r=!a&&(i||n!==A)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,r}];s<r;s++)if(n=E.relative[t[s].type])c=[f(m(c),n)];else{if((n=E.filter[t[s].type].apply(null,t[s].matches))[V]){for(i=++s;i<r&&!E.relative[t[i].type];i++);return y(s>1&&m(c),s>1&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,s<i&&_(t.slice(s,i)),i<r&&_(t=t.slice(i)),i<r&&d(t))}c.push(n)}return m(c)}function x(t,n){var r=n.length>0,a=t.length>0,o=function(i,o,s,l,u){var c,p,h,d=0,f="0",m=i&&[],g=[],y=A,_=i||a&&E.find.TAG("*",u),x=U+=null==y?1:Math.random()||.1,b=_.length;for(u&&(A=o===L||o||u);f!==b&&null!=(c=_[f]);f++){if(a&&c){for(p=0,o||c.ownerDocument===L||(P(c),s=!O);h=t[p++];)if(h(c,o||L,s)){l.push(c);break}u&&(U=x)}r&&((c=!h&&c)&&d--,i&&m.push(c))}if(d+=f,r&&f!==d){for(p=0;h=n[p++];)h(m,g,o,s);if(i){if(d>0)for(;f--;)m[f]||g[f]||(g[f]=Y.call(l));g=v(g)}J.apply(l,g),u&&!i&&g.length>0&&d+n.length>1&&e.uniqueSort(l)}return u&&(U=x,A=y),m};return r?i(o):o}var b,w,E,T,S,C,k,z,A,M,I,P,L,D,O,B,R,F,N,V="sizzle"+1*new Date,j=t.document,U=0,q=0,$=n(),G=n(),H=n(),X=function(t,e){return t===e&&(I=!0),0},W={}.hasOwnProperty,Z=[],Y=Z.pop,K=Z.push,J=Z.push,Q=Z.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",at=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",ot=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),pt=new RegExp(at),ht=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),xt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},bt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Et=function(){P()},Tt=f(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{J.apply(Z=Q.call(j.childNodes),j.childNodes),Z[j.childNodes.length].nodeType}catch(t){J={apply:Z.length?function(t,e){K.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:j;return i!==L&&9===i.nodeType&&i.documentElement?(L=i,D=L.documentElement,O=!S(L),j!==L&&(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Et,!1):n.attachEvent&&n.attachEvent("onunload",Et)),w.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=r(function(t){return t.appendChild(L.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(L.getElementsByClassName),w.getById=r(function(t){return D.appendChild(t).id=V,!L.getElementsByName||!L.getElementsByName(V).length}),w.getById?(E.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){return t.getAttribute("id")===e}},E.find.ID=function(t,e){if(void 0!==e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}}):(E.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},E.find.ID=function(t,e){if(void 0!==e.getElementById&&O){var n,i,r,a=e.getElementById(t);if(a){if((n=a.getAttributeNode("id"))&&n.value===t)return[a];for(r=e.getElementsByName(t),i=0;a=r[i++];)if((n=a.getAttributeNode("id"))&&n.value===t)return[a]}return[]}}),E.find.TAG=w.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},E.find.CLASS=w.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&O)return e.getElementsByClassName(t)},R=[],B=[],(w.qsa=gt.test(L.querySelectorAll))&&(r(function(t){D.appendChild(t).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&B.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||B.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+V+"-]").length||B.push("~="),t.querySelectorAll(":checked").length||B.push(":checked"),t.querySelectorAll("a#"+V+"+*").length||B.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=L.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&B.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&B.push(":enabled",":disabled"),D.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&B.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),B.push(",.*:")})),(w.matchesSelector=gt.test(F=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(t){w.disconnectedMatch=F.call(t,"*"),F.call(t,"[s!='']:x"),R.push("!=",at)}),B=B.length&&new RegExp(B.join("|")),R=R.length&&new RegExp(R.join("|")),e=gt.test(D.compareDocumentPosition),N=e||gt.test(D.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},X=e?function(t,e){if(t===e)return I=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===L||t.ownerDocument===j&&N(j,t)?-1:e===L||e.ownerDocument===j&&N(j,e)?1:M?tt(M,t)-tt(M,e):0:4&n?-1:1)}:function(t,e){if(t===e)return I=!0,0;var n,i=0,r=t.parentNode,a=e.parentNode,s=[t],l=[e];if(!r||!a)return t===L?-1:e===L?1:r?-1:a?1:M?tt(M,t)-tt(M,e):0;if(r===a)return o(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?o(s[i],l[i]):s[i]===j?-1:l[i]===j?1:0},L):L},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==L&&P(t),n=n.replace(ct,"='$1']"),w.matchesSelector&&O&&!H[n+" "]&&(!R||!R.test(n))&&(!B||!B.test(n)))try{var i=F.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,L,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==L&&P(t),N(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==L&&P(t);var n=E.attrHandle[e.toLowerCase()],i=n&&W.call(E.attrHandle,e.toLowerCase())?n(t,e,!O):void 0;return void 0!==i?i:w.attributes||!O?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(bt,wt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(I=!w.detectDuplicates,M=!w.sortStable&&t.slice(0),t.sort(X),I){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return M=null,t},T=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=T(e);return n},(E=e.selectors={cacheLength:50,createPseudo:i,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&pt.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=$[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&$(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var a=e.attr(r,t);return null==a?"!="===n:!n||(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a.replace(ot," ")+" ").indexOf(i)>-1:"|="===n&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,p,h,d,f,m=a!==o?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(g){if(a){for(;m;){for(h=e;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(_=(d=(u=(c=(p=(h=g)[V]||(h[V]={}))[h.uniqueID]||(p[h.uniqueID]={}))[t]||[])[0]===U&&u[1])&&u[2],h=d&&g.childNodes[d];h=++d&&h&&h[m]||(_=d=0)||f.pop();)if(1===h.nodeType&&++_&&h===e){c[t]=[U,d,_];break}}else if(y&&(_=d=(u=(c=(p=(h=e)[V]||(h[V]={}))[h.uniqueID]||(p[h.uniqueID]={}))[t]||[])[0]===U&&u[1]),!1===_)for(;(h=++d&&h&&h[m]||(_=d=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++_||(y&&((c=(p=h[V]||(h[V]={}))[h.uniqueID]||(p[h.uniqueID]={}))[t]=[U,_]),h!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,n){var r,a=E.pseudos[t]||E.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return a[V]?a(n):a.length>1?(r=[t,t,"",n],E.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=a(t,n),o=r.length;o--;)t[i=tt(t,r[o])]=!(e[i]=r[o])}):function(t){return a(t,0,r)}):a}},pseudos:{not:i(function(t){var e=[],n=[],r=k(t.replace(st,"$1"));return r[V]?i(function(t,e,n,i){for(var a,o=r(t,null,i,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))}):function(t,i,a){return e[0]=t,r(e,null,a,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(_t,xt),function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:i(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,xt).toLowerCase(),function(e){var n;do{if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===D},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[n<0?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=E.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})E.pseudos[b]=l(b);return h.prototype=E.filters=E.pseudos,E.setFilters=new h,C=e.tokenize=function(t,n){var i,r,a,o,s,l,u,c=G[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=E.preFilter;s;){i&&!(r=lt.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=ut.exec(s))&&(i=r.shift(),a.push({value:i,type:r[0].replace(st," ")}),s=s.slice(i.length));for(o in E.filter)!(r=dt[o].exec(s))||u[o]&&!(r=u[o](r))||(i=r.shift(),a.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):G(t,l).slice(0)},k=e.compile=function(t,e){var n,i=[],r=[],a=H[t+" "];if(!a){for(e||(e=C(t)),n=e.length;n--;)(a=_(e[n]))[V]?i.push(a):r.push(a);(a=H(t,x(r,i))).selector=t}return a},z=e.select=function(t,e,n,i){var r,a,o,s,l,u="function"==typeof t&&t,c=!i&&C(t=u.selector||t);if(n=n||[],1===c.length){if((a=c[0]=c[0].slice(0)).length>2&&"ID"===(o=a[0]).type&&9===e.nodeType&&O&&E.relative[a[1].type]){if(!(e=(E.find.ID(o.matches[0].replace(_t,xt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(r=dt.needsContext.test(t)?0:a.length;r--&&(o=a[r],!E.relative[s=o.type]);)if((l=E.find[s])&&(i=l(o.matches[0].replace(_t,xt),yt.test(a[0].type)&&p(e.parentNode)||e))){if(a.splice(r,1),!(t=i.length&&d(a)))return J.apply(n,i),n;break}}return(u||k(t,c))(i,e,!O,n,!e||yt.test(t)&&p(e.parentNode)||e),n},w.sortStable=V.split("").sort(X).join("")===V,w.detectDuplicates=!!I,P(),w.sortDetached=r(function(t){return 1&t.compareDocumentPosition(L.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||a("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||a("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||a(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);bt.find=Et,bt.expr=Et.selectors,bt.expr[":"]=bt.expr.pseudos,bt.uniqueSort=bt.unique=Et.uniqueSort,bt.text=Et.getText,bt.isXMLDoc=Et.isXML,bt.contains=Et.contains,bt.escapeSelector=Et.escape;var Tt=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&bt(t).is(n))break;i.push(t)}return i},St=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Ct=bt.expr.match.needsContext,kt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;bt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?bt.find.matchesSelector(i,t)?[i]:[]:bt.find.matches(t,bt.grep(e,function(t){return 1===t.nodeType}))},bt.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(bt(t).filter(function(){for(e=0;e<i;e++)if(bt.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)bt.find(t,r[e],n);return i>1?bt.uniqueSort(n):n},filter:function(t){return this.pushStack(o(this,t||[],!1))},not:function(t){return this.pushStack(o(this,t||[],!0))},is:function(t){return!!o(this,"string"==typeof t&&Ct.test(t)?bt(t):t||[],!1).length}});var zt,At=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(bt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||zt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:At.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof bt?e[0]:e,bt.merge(this,bt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:ot,!0)),kt.test(i[1])&&bt.isPlainObject(e))for(i in e)yt(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=ot.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):yt(t)?void 0!==n.ready?n.ready(t):t(bt):bt.makeArray(t,this)}).prototype=bt.fn,zt=bt(ot);var Mt=/^(?:parents|prev(?:Until|All))/,It={children:!0,contents:!0,next:!0,prev:!0};bt.fn.extend({has:function(t){var e=bt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(bt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,a=[],o="string"!=typeof t&&bt(t);if(!Ct.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&bt.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?bt.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?pt.call(bt(t),this[0]):pt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(bt.uniqueSort(bt.merge(this.get(),bt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),bt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Tt(t,"parentNode")},parentsUntil:function(t,e,n){return Tt(t,"parentNode",n)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return Tt(t,"nextSibling")},prevAll:function(t){return Tt(t,"previousSibling")},nextUntil:function(t,e,n){return Tt(t,"nextSibling",n)},prevUntil:function(t,e,n){return Tt(t,"previousSibling",n)},siblings:function(t){return St((t.parentNode||{}).firstChild,t)},children:function(t){return St(t.firstChild)},contents:function(t){return a(t,"iframe")?t.contentDocument:(a(t,"template")&&(t=t.content||t),bt.merge([],t.childNodes))}},function(t,e){bt.fn[t]=function(n,i){var r=bt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=bt.filter(i,r)),this.length>1&&(It[t]||bt.uniqueSort(r),Mt.test(t)&&r.reverse()),this.pushStack(r)}});var Pt=/[^\x20\t\r\n\f]+/g;bt.Callbacks=function(t){t="string"==typeof t?l(t):bt.extend({},t);var e,n,r,a,o=[],s=[],u=-1,c=function(){for(a=a||t.once,r=e=!0;s.length;u=-1)for(n=s.shift();++u<o.length;)!1===o[u].apply(n[0],n[1])&&t.stopOnFalse&&(u=o.length,n=!1);t.memory||(n=!1),e=!1,a&&(o=n?[]:"")},p={add:function(){return o&&(n&&!e&&(u=o.length-1,s.push(n)),function e(n){bt.each(n,function(n,r){yt(r)?t.unique&&p.has(r)||o.push(r):r&&r.length&&"string"!==i(r)&&e(r)})}(arguments),n&&!e&&c()),this},remove:function(){return bt.each(arguments,function(t,e){for(var n;(n=bt.inArray(e,o,n))>-1;)o.splice(n,1),n<=u&&u--}),this},has:function(t){return t?bt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return a=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return a=s=[],n||e||(o=n=""),this},locked:function(){return!!a},fireWith:function(t,n){return a||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||c()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},bt.extend({Deferred:function(e){var n=[["notify","progress",bt.Callbacks("memory"),bt.Callbacks("memory"),2],["resolve","done",bt.Callbacks("once memory"),bt.Callbacks("once memory"),0,"resolved"],["reject","fail",bt.Callbacks("once memory"),bt.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return bt.Deferred(function(e){bt.each(n,function(n,i){var r=yt(t[i[4]])&&t[i[4]];a[i[1]](function(){var t=r&&r.apply(this,arguments);t&&yt(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){function a(e,n,i,r){return function(){var s=this,l=arguments,p=function(){var t,p;if(!(e<o)){if((t=i.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");p=t&&("object"==typeof t||"function"==typeof t)&&t.then,yt(p)?r?p.call(t,a(o,n,u,r),a(o,n,c,r)):(o++,p.call(t,a(o,n,u,r),a(o,n,c,r),a(o,n,u,n.notifyWith))):(i!==u&&(s=void 0,l=[t]),(r||n.resolveWith)(s,l))}},h=r?p:function(){try{p()}catch(t){bt.Deferred.exceptionHook&&bt.Deferred.exceptionHook(t,h.stackTrace),e+1>=o&&(i!==c&&(s=void 0,l=[t]),n.rejectWith(s,l))}};e?h():(bt.Deferred.getStackHook&&(h.stackTrace=bt.Deferred.getStackHook()),t.setTimeout(h))}}var o=0;return bt.Deferred(function(t){n[0][3].add(a(0,t,yt(r)?r:u,t.notifyWith)),n[1][3].add(a(0,t,yt(e)?e:u)),n[2][3].add(a(0,t,yt(i)?i:c))}).promise()},promise:function(t){return null!=t?bt.extend(t,r):r}},a={};return bt.each(n,function(t,e){var o=e[2],s=e[5];r[e[1]]=o.add,s&&o.add(function(){i=s},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),o.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=o.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(t){var e=arguments.length,n=e,i=Array(n),r=lt.call(arguments),a=bt.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?lt.call(arguments):n,--e||a.resolveWith(i,r)}};if(e<=1&&(p(t,a.done(o(n)).resolve,a.reject,!e),"pending"===a.state()||yt(r[n]&&r[n].then)))return a.then();for(;n--;)p(r[n],o(n),a.reject);return a.promise()}});var Lt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;bt.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&Lt.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},bt.readyException=function(e){t.setTimeout(function(){throw e})};var Dt=bt.Deferred();bt.fn.ready=function(t){return Dt.then(t).catch(function(t){bt.readyException(t)}),this},bt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--bt.readyWait:bt.isReady)||(bt.isReady=!0,!0!==t&&--bt.readyWait>0||Dt.resolveWith(ot,[bt]))}}),bt.ready.then=Dt.then,"complete"===ot.readyState||"loading"!==ot.readyState&&!ot.documentElement.doScroll?t.setTimeout(bt.ready):(ot.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h));var Ot=function(t,e,n,r,a,o,s){var l=0,u=t.length,c=null==n;if("object"===i(n)){a=!0;for(l in n)Ot(t,e,l,n[l],!0,o,s)}else if(void 0!==r&&(a=!0,yt(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(bt(t),n)})),e))for(;l<u;l++)e(t[l],n,s?r:r.call(t[l],l,e(t[l],n)));return a?t:c?e.call(t):u?e(t[0],n):o},Bt=/^-ms-/,Rt=/-([a-z])/g,Ft=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};m.uid=1,m.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Ft(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[f(e)]=n;else for(i in e)r[f(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][f(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(f):(e=f(e))in i?[e]:e.match(Pt)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||bt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!bt.isEmptyObject(e)}};var Nt=new m,Vt=new m,jt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ut=/[A-Z]/g;bt.extend({hasData:function(t){return Vt.hasData(t)||Nt.hasData(t)},data:function(t,e,n){return Vt.access(t,e,n)},removeData:function(t,e){Vt.remove(t,e)},_data:function(t,e,n){return Nt.access(t,e,n)},_removeData:function(t,e){Nt.remove(t,e)}}),bt.fn.extend({data:function(t,e){var n,i,r,a=this[0],o=a&&a.attributes;if(void 0===t){if(this.length&&(r=Vt.get(a),1===a.nodeType&&!Nt.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=f(i.slice(5)),v(a,i,r[i]));Nt.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Vt.set(this,t)}):Ot(this,function(e){var n;if(a&&void 0===e){if(void 0!==(n=Vt.get(a,t)))return n;if(void 0!==(n=v(a,t)))return n}else this.each(function(){Vt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Vt.remove(this,t)})}}),bt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Nt.get(t,e),n&&(!i||Array.isArray(n)?i=Nt.access(t,e,bt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=bt.queue(t,e),i=n.length,r=n.shift(),a=bt._queueHooks(t,e),o=function(){bt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete a.stop,r.call(t,o,a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Nt.get(t,n)||Nt.access(t,n,{empty:bt.Callbacks("once memory").add(function(){Nt.remove(t,[e+"queue",n])})})}}),bt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?bt.queue(this[0],t):void 0===e?this:this.each(function(){var n=bt.queue(this,t,e);bt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&bt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){bt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=bt.Deferred(),a=this,o=this.length,s=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=Nt.get(a[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var qt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$t=new RegExp("^(?:([+-])=|)("+qt+")([a-z%]*)$","i"),Gt=["Top","Right","Bottom","Left"],Ht=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&bt.contains(t.ownerDocument,t)&&"none"===bt.css(t,"display")},Xt=function(t,e,n,i){var r,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];r=n.apply(t,i||[]);for(a in e)t.style[a]=o[a];return r},Wt={};bt.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ht(this)?bt(this).show():bt(this).hide()})}});var Zt=/^(?:checkbox|radio)$/i,Yt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Kt=/^$|^module$|\/(?:java|ecma)script/i,Jt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td;var Qt=/<|&#?\w+;/;!function(){var t=ot.createDocumentFragment().appendChild(ot.createElement("div")),e=ot.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),vt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",vt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var te=ot.documentElement,ee=/^key/,ne=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ie=/^([^.]*)(?:\.(.+)|)/;bt.event={global:{},add:function(t,e,n,i,r){var a,o,s,l,u,c,p,h,d,f,m,g=Nt.get(t);if(g)for(n.handler&&(n=(a=n).handler,r=a.selector),r&&bt.find.matchesSelector(te,r),n.guid||(n.guid=bt.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(e){return void 0!==bt&&bt.event.triggered!==e.type?bt.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(Pt)||[""]).length;u--;)d=m=(s=ie.exec(e[u])||[])[1],f=(s[2]||"").split(".").sort(),d&&(p=bt.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,p=bt.event.special[d]||{},c=bt.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&bt.expr.match.needsContext.test(r),namespace:f.join(".")},a),(h=l[d])||((h=l[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(t,i,f,o)||t.addEventListener&&t.addEventListener(d,o)),p.add&&(p.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),bt.event.global[d]=!0)},remove:function(t,e,n,i,r){var a,o,s,l,u,c,p,h,d,f,m,g=Nt.hasData(t)&&Nt.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(Pt)||[""]).length;u--;)if(s=ie.exec(e[u])||[],d=m=s[1],f=(s[2]||"").split(".").sort(),d){for(p=bt.event.special[d]||{},h=l[d=(i?p.delegateType:p.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)c=h[a],!r&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,p.remove&&p.remove.call(t,c));o&&!h.length&&(p.teardown&&!1!==p.teardown.call(t,f,g.handle)||bt.removeEvent(t,d,g.handle),delete l[d])}else for(d in l)bt.event.remove(t,d+e[u],n,i,!0);bt.isEmptyObject(l)&&Nt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,a,o,s=bt.event.fix(t),l=new Array(arguments.length),u=(Nt.get(this,"events")||{})[s.type]||[],c=bt.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(o=bt.event.handlers.call(this,s,u),e=0;(r=o[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(i=((bt.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,a,o,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(a=[],o={},n=0;n<l;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?bt(r,this).index(u)>-1:bt.find(r,this,null,[u]).length),o[r]&&a.push(i);a.length&&s.push({elem:u,handlers:a})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(bt.Event.prototype,t,{enumerable:!0,configurable:!0,get:yt(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[bt.expando]?t:new bt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&a(this,"input"))return this.click(),!1},_default:function(t){return a(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},bt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},bt.Event=function(t,e){if(!(this instanceof bt.Event))return new bt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?T:S,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&bt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[bt.expando]=!0},bt.Event.prototype={constructor:bt.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=T,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=T,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=T,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},bt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&ee.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&ne.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},bt.event.addProp),bt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){bt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,a=t.handleObj;return r&&(r===i||bt.contains(i,r))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}}),bt.fn.extend({on:function(t,e,n,i){return k(this,t,e,n,i)},one:function(t,e,n,i){return k(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,bt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=S),this.each(function(){bt.event.remove(this,t,n,e)})}});var re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ae=/<script|<style|<link/i,oe=/checked\s*(?:[^=]|=\s*.checked.)/i,se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;bt.extend({htmlPrefilter:function(t){return t.replace(re,"<$1></$2>")},clone:function(t,e,n){var i,r,a,o,s=t.cloneNode(!0),l=bt.contains(t.ownerDocument,t);if(!(vt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||bt.isXMLDoc(t)))for(o=b(s),i=0,r=(a=b(t)).length;i<r;i++)P(a[i],o[i]);if(e)if(n)for(a=a||b(t),o=o||b(s),i=0,r=a.length;i<r;i++)I(a[i],o[i]);else I(t,s);return(o=b(s,"script")).length>0&&w(o,!l&&b(t,"script")),s},cleanData:function(t){for(var e,n,i,r=bt.event.special,a=0;void 0!==(n=t[a]);a++)if(Ft(n)){if(e=n[Nt.expando]){if(e.events)for(i in e.events)r[i]?bt.event.remove(n,i):bt.removeEvent(n,i,e.handle);n[Nt.expando]=void 0}n[Vt.expando]&&(n[Vt.expando]=void 0)}}}),bt.fn.extend({detach:function(t){return D(this,t,!0)},remove:function(t){return D(this,t)},text:function(t){return Ot(this,function(t){return void 0===t?bt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return L(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||z(this,t).appendChild(t)})},prepend:function(){return L(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=z(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return L(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return L(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(bt.cleanData(b(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return bt.clone(this,t,e)})},html:function(t){return Ot(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ae.test(t)&&!Jt[(Yt.exec(t)||["",""])[1].toLowerCase()]){t=bt.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(bt.cleanData(b(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return L(this,arguments,function(e){var n=this.parentNode;bt.inArray(this,t)<0&&(bt.cleanData(b(this)),n&&n.replaceChild(e,this))},t)}}),bt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){bt.fn[t]=function(t){for(var n,i=[],r=bt(t),a=r.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),bt(r[o])[e](n),ct.apply(i,n.get());return this.pushStack(i)}});var le=new RegExp("^("+qt+")(?!px)[a-z%]+$","i"),ue=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},ce=new RegExp(Gt.join("|"),"i");!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",te.appendChild(l).appendChild(u);var e=t.getComputedStyle(u);i="1%"!==e.top,s=12===n(e.marginLeft),u.style.right="60%",o=36===n(e.right),r=36===n(e.width),u.style.position="absolute",a=36===u.offsetWidth||"absolute",te.removeChild(l),u=null}}function n(t){return Math.round(parseFloat(t))}var i,r,a,o,s,l=ot.createElement("div"),u=ot.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",vt.clearCloneStyle="content-box"===u.style.backgroundClip,bt.extend(vt,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),a}}))}();var pe=/^(none|table(?!-c[ea]).+)/,he=/^--/,de={position:"absolute",visibility:"hidden",display:"block"},fe={letterSpacing:"0",fontWeight:"400"},me=["Webkit","Moz","ms"],ge=ot.createElement("div").style;bt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=O(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,a,o,s=f(e),l=he.test(e),u=t.style;if(l||(e=F(s)),o=bt.cssHooks[e]||bt.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:u[e];"string"==(a=typeof n)&&(r=$t.exec(n))&&r[1]&&(n=y(t,e,r),a="number"),null!=n&&n===n&&("number"===a&&(n+=r&&r[3]||(bt.cssNumber[s]?"":"px")),vt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var r,a,o,s=f(e);return he.test(e)||(e=F(s)),(o=bt.cssHooks[e]||bt.cssHooks[s])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=O(t,e,i)),"normal"===r&&e in fe&&(r=fe[e]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),bt.each(["height","width"],function(t,e){bt.cssHooks[e]={get:function(t,n,i){if(n)return!pe.test(bt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?j(t,e,i):Xt(t,de,function(){return j(t,e,i)})},set:function(t,n,i){var r,a=ue(t),o="border-box"===bt.css(t,"boxSizing",!1,a),s=i&&V(t,e,i,o,a);return o&&vt.scrollboxSize()===a.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-V(t,e,"border",!1,a)-.5)),s&&(r=$t.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=bt.css(t,e)),N(t,n,s)}}}),bt.cssHooks.marginLeft=B(vt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(O(t,"marginLeft"))||t.getBoundingClientRect().left-Xt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),bt.each({margin:"",padding:"",border:"Width"},function(t,e){bt.cssHooks[t+e]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+Gt[i]+e]=a[i]||a[i-2]||a[0];return r}},"margin"!==t&&(bt.cssHooks[t+e].set=N)}),bt.fn.extend({css:function(t,e){return Ot(this,function(t,e,n){var i,r,a={},o=0;if(Array.isArray(e)){for(i=ue(t),r=e.length;o<r;o++)a[e[o]]=bt.css(t,e[o],!1,i);return a}return void 0!==n?bt.style(t,e,n):bt.css(t,e)},t,e,arguments.length>1)}}),bt.Tween=U,U.prototype={constructor:U,init:function(t,e,n,i,r,a){this.elem=t,this.prop=n,this.easing=r||bt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(bt.cssNumber[n]?"":"px")},cur:function(){var t=U.propHooks[this.prop];return t&&t.get?t.get(this):U.propHooks._default.get(this)},run:function(t){var e,n=U.propHooks[this.prop];return this.options.duration?this.pos=e=bt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=bt.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){bt.fx.step[t.prop]?bt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[bt.cssProps[t.prop]]&&!bt.cssHooks[t.prop]?t.elem[t.prop]=t.now:bt.style(t.elem,t.prop,t.now+t.unit)}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},bt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},bt.fx=U.prototype.init,bt.fx.step={};var ve,ye,_e=/^(?:toggle|show|hide)$/,xe=/queueHooks$/;bt.Animation=bt.extend(Z,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return y(n.elem,t,$t.exec(e),n),n}]},tweener:function(t,e){yt(t)?(e=t,t=["*"]):t=t.match(Pt);for(var n,i=0,r=t.length;i<r;i++)n=t[i],Z.tweeners[n]=Z.tweeners[n]||[],Z.tweeners[n].unshift(e)},prefilters:[X],prefilter:function(t,e){e?Z.prefilters.unshift(t):Z.prefilters.push(t)}}),bt.speed=function(t,e,n){var i=t&&"object"==typeof t?bt.extend({},t):{complete:n||!n&&e||yt(t)&&t,duration:t,easing:n&&e||e&&!yt(e)&&e};return bt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in bt.fx.speeds?i.duration=bt.fx.speeds[i.duration]:i.duration=bt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){yt(i.old)&&i.old.call(this),i.queue&&bt.dequeue(this,i.queue)},i},bt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ht).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=bt.isEmptyObject(t),a=bt.speed(e,n,i),o=function(){var e=Z(this,bt.extend({},t),a);(r||Nt.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",a=bt.timers,o=Nt.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&xe.test(r)&&i(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=t&&a[r].queue!==t||(a[r].anim.stop(n),e=!1,a.splice(r,1));!e&&n||bt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Nt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],a=bt.timers,o=i?i.length:0;for(n.finish=!0,bt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),bt.each(["toggle","show","hide"],function(t,e){var n=bt.fn[e];bt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(G(e,!0),t,i,r)}}),bt.each({slideDown:G("show"),slideUp:G("hide"),slideToggle:G("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){bt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),bt.timers=[],bt.fx.tick=function(){var t,e=0,n=bt.timers;for(ve=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||bt.fx.stop(),ve=void 0},bt.fx.timer=function(t){bt.timers.push(t),bt.fx.start()},bt.fx.interval=13,bt.fx.start=function(){ye||(ye=!0,q())},bt.fx.stop=function(){ye=null},bt.fx.speeds={slow:600,fast:200,_default:400},bt.fn.delay=function(e,n){return e=bt.fx?bt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},function(){var t=ot.createElement("input"),e=ot.createElement("select").appendChild(ot.createElement("option"));t.type="checkbox",vt.checkOn=""!==t.value,vt.optSelected=e.selected,(t=ot.createElement("input")).value="t",t.type="radio",vt.radioValue="t"===t.value}();var be,we=bt.expr.attrHandle;bt.fn.extend({attr:function(t,e){return Ot(this,bt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){bt.removeAttr(this,t)})}}),bt.extend({attr:function(t,e,n){var i,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?bt.prop(t,e,n):(1===a&&bt.isXMLDoc(t)||(r=bt.attrHooks[e.toLowerCase()]||(bt.expr.match.bool.test(e)?be:void 0)),void 0!==n?null===n?void bt.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=bt.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!vt.radioValue&&"radio"===e&&a(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Pt);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),be={set:function(t,e,n){return!1===e?bt.removeAttr(t,n):t.setAttribute(n,n),n}},bt.each(bt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=we[e]||bt.find.attr;we[e]=function(t,e,i){var r,a,o=e.toLowerCase();return i||(a=we[o],we[o]=r,r=null!=n(t,e,i)?o:null,we[o]=a),r}});var Ee=/^(?:input|select|textarea|button)$/i,Te=/^(?:a|area)$/i;bt.fn.extend({prop:function(t,e){return Ot(this,bt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[bt.propFix[t]||t]})}}),bt.extend({prop:function(t,e,n){var i,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&bt.isXMLDoc(t)||(e=bt.propFix[e]||e,r=bt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=bt.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Te.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),vt.optSelected||(bt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),bt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){bt.propFix[this.toLowerCase()]=this}),bt.fn.extend({addClass:function(t){var e,n,i,r,a,o,s,l=0;if(yt(t))return this.each(function(e){bt(this).addClass(t.call(this,e,K(this)))});if((e=J(t)).length)for(;n=this[l++];)if(r=K(n),i=1===n.nodeType&&" "+Y(r)+" "){for(o=0;a=e[o++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(s=Y(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,a,o,s,l=0;if(yt(t))return this.each(function(e){bt(this).removeClass(t.call(this,e,K(this)))});if(!arguments.length)return this.attr("class","");if((e=J(t)).length)for(;n=this[l++];)if(r=K(n),i=1===n.nodeType&&" "+Y(r)+" "){for(o=0;a=e[o++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");r!==(s=Y(i))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):yt(t)?this.each(function(n){bt(this).toggleClass(t.call(this,n,K(this),e),e)}):this.each(function(){var e,r,a,o;if(i)for(r=0,a=bt(this),o=J(t);e=o[r++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==n||((e=K(this))&&Nt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Nt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Y(K(n))+" ").indexOf(e)>-1)return!0;return!1}});var Se=/\r/g;bt.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=yt(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,bt(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=bt.map(r,function(t){return null==t?"":t+""})),(e=bt.valHooks[this.type]||bt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=bt.valHooks[r.type]||bt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Se,""):null==n?"":n:void 0}}),bt.extend({valHooks:{option:{get:function(t){var e=bt.find.attr(t,"value");return null!=e?e:Y(bt.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,s="select-one"===t.type,l=s?null:[],u=s?o+1:r.length;for(i=o<0?u:s?o:0;i<u;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!a(n.parentNode,"optgroup"))){if(e=bt(n).val(),s)return e;l.push(e)}return l},set:function(t,e){for(var n,i,r=t.options,a=bt.makeArray(e),o=r.length;o--;)((i=r[o]).selected=bt.inArray(bt.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(t.selectedIndex=-1),a}}}}),bt.each(["radio","checkbox"],function(){bt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=bt.inArray(bt(t).val(),e)>-1}},vt.checkOn||(bt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),vt.focusin="onfocusin"in t;var Ce=/^(?:focusinfocus|focusoutblur)$/,ke=function(t){t.stopPropagation()};bt.extend(bt.event,{trigger:function(e,n,i,r){var a,o,s,l,u,c,p,h,d=[i||ot],f=ft.call(e,"type")?e.type:e,m=ft.call(e,"namespace")?e.namespace.split("."):[];if(o=h=s=i=i||ot,3!==i.nodeType&&8!==i.nodeType&&!Ce.test(f+bt.event.triggered)&&(f.indexOf(".")>-1&&(f=(m=f.split(".")).shift(),m.sort()),u=f.indexOf(":")<0&&"on"+f,e=e[bt.expando]?e:new bt.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:bt.makeArray(n,[e]),p=bt.event.special[f]||{},r||!p.trigger||!1!==p.trigger.apply(i,n))){if(!r&&!p.noBubble&&!_t(i)){for(l=p.delegateType||f,Ce.test(l+f)||(o=o.parentNode);o;o=o.parentNode)d.push(o),s=o;s===(i.ownerDocument||ot)&&d.push(s.defaultView||s.parentWindow||t)}for(a=0;(o=d[a++])&&!e.isPropagationStopped();)h=o,e.type=a>1?l:p.bindType||f,(c=(Nt.get(o,"events")||{})[e.type]&&Nt.get(o,"handle"))&&c.apply(o,n),(c=u&&o[u])&&c.apply&&Ft(o)&&(e.result=c.apply(o,n),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(d.pop(),n)||!Ft(i)||u&&yt(i[f])&&!_t(i)&&((s=i[u])&&(i[u]=null),bt.event.triggered=f,e.isPropagationStopped()&&h.addEventListener(f,ke),i[f](),e.isPropagationStopped()&&h.removeEventListener(f,ke),bt.event.triggered=void 0,s&&(i[u]=s)),e.result}},simulate:function(t,e,n){var i=bt.extend(new bt.Event,n,{type:t,isSimulated:!0});bt.event.trigger(i,null,e)}}),bt.fn.extend({trigger:function(t,e){return this.each(function(){bt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return bt.event.trigger(t,e,n,!0)}}),vt.focusin||bt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){bt.event.simulate(e,t.target,bt.event.fix(t))};bt.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Nt.access(i,e);r||i.addEventListener(t,n,!0),Nt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Nt.access(i,e)-1;r?Nt.access(i,e,r):(i.removeEventListener(t,n,!0),Nt.remove(i,e))}}});var ze=t.location,Ae=Date.now(),Me=/\?/;bt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||bt.error("Invalid XML: "+e),n};var Ie=/\[\]$/,Pe=/\r?\n/g,Le=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;bt.param=function(t,e){var n,i=[],r=function(t,e){var n=yt(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!bt.isPlainObject(t))bt.each(t,function(){r(this.name,this.value)});else for(n in t)Q(n,t[n],e,r);return i.join("&")},bt.fn.extend({serialize:function(){return bt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=bt.prop(this,"elements");return t?bt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!bt(this).is(":disabled")&&De.test(this.nodeName)&&!Le.test(t)&&(this.checked||!Zt.test(t))}).map(function(t,e){var n=bt(this).val();return null==n?null:Array.isArray(n)?bt.map(n,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:n.replace(Pe,"\r\n")}}).get()}});var Oe=/%20/g,Be=/#.*$/,Re=/([?&])_=[^&]*/,Fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ve=/^(?:GET|HEAD)$/,je=/^\/\//,Ue={},qe={},$e="*/".concat("*"),Ge=ot.createElement("a");Ge.href=ze.href,bt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ze.href,type:"GET",isLocal:Ne.test(ze.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":bt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,bt.ajaxSettings),e):nt(bt.ajaxSettings,t)},ajaxPrefilter:tt(Ue),ajaxTransport:tt(qe),ajax:function(e,n){function i(e,n,i,s){var u,h,d,x,b,w=n;c||(c=!0,l&&t.clearTimeout(l),r=void 0,o=s||"",E.readyState=e>0?4:0,u=e>=200&&e<300||304===e,i&&(x=it(f,E,i)),x=rt(f,x,E,u),u?(f.ifModified&&((b=E.getResponseHeader("Last-Modified"))&&(bt.lastModified[a]=b),(b=E.getResponseHeader("etag"))&&(bt.etag[a]=b)),204===e||"HEAD"===f.type?w="nocontent":304===e?w="notmodified":(w=x.state,h=x.data,u=!(d=x.error))):(d=w,!e&&w||(w="error",e<0&&(e=0))),E.status=e,E.statusText=(n||w)+"",u?v.resolveWith(m,[h,w,E]):v.rejectWith(m,[E,w,d]),E.statusCode(_),_=void 0,p&&g.trigger(u?"ajaxSuccess":"ajaxError",[E,f,u?h:d]),y.fireWith(m,[E,w]),p&&(g.trigger("ajaxComplete",[E,f]),--bt.active||bt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,a,o,s,l,u,c,p,h,d,f=bt.ajaxSetup({},n),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?bt(m):bt.event,v=bt.Deferred(),y=bt.Callbacks("once memory"),_=f.statusCode||{},x={},b={},w="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Fe.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)E.always(t[E.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||w;return r&&r.abort(e),i(0,e),this}};if(v.promise(E),f.url=((e||f.url||ze.href)+"").replace(je,ze.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Pt)||[""],null==f.crossDomain){u=ot.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Ge.protocol+"//"+Ge.host!=u.protocol+"//"+u.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=bt.param(f.data,f.traditional)),et(Ue,f,n,E),c)return E;(p=bt.event&&f.global)&&0==bt.active++&&bt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ve.test(f.type),a=f.url.replace(Be,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Oe,"+")):(d=f.url.slice(a.length),f.data&&(f.processData||"string"==typeof f.data)&&(a+=(Me.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(a=a.replace(Re,"$1"),d=(Me.test(a)?"&":"?")+"_="+Ae+++d),f.url=a+d),f.ifModified&&(bt.lastModified[a]&&E.setRequestHeader("If-Modified-Since",bt.lastModified[a]),bt.etag[a]&&E.setRequestHeader("If-None-Match",bt.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&E.setRequestHeader("Content-Type",f.contentType),E.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+$e+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)E.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(m,E,f)||c))return E.abort();if(w="abort",y.add(f.complete),E.done(f.success),E.fail(f.error),r=et(qe,f,n,E)){if(E.readyState=1,p&&g.trigger("ajaxSend",[E,f]),c)return E;f.async&&f.timeout>0&&(l=t.setTimeout(function(){E.abort("timeout")},f.timeout));try{c=!1,r.send(x,i)}catch(t){if(c)throw t;i(-1,t)}}else i(-1,"No Transport");return E},getJSON:function(t,e,n){return bt.get(t,e,n,"json")},getScript:function(t,e){return bt.get(t,void 0,e,"script")}}),bt.each(["get","post"],function(t,e){bt[e]=function(t,n,i,r){return yt(n)&&(r=r||i,i=n,n=void 0),bt.ajax(bt.extend({url:t,type:e,dataType:r,data:n,success:i},bt.isPlainObject(t)&&t))}}),bt._evalUrl=function(t){return bt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},bt.fn.extend({wrapAll:function(t){var e;return this[0]&&(yt(t)&&(t=t.call(this[0])),e=bt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return yt(t)?this.each(function(e){bt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=bt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=yt(t);return this.each(function(n){bt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){bt(this).replaceWith(this.childNodes)}),this}}),bt.expr.pseudos.hidden=function(t){return!bt.expr.pseudos.visible(t)},bt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},bt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},Xe=bt.ajaxSettings.xhr();vt.cors=!!Xe&&"withCredentials"in Xe,vt.ajax=Xe=!!Xe,bt.ajaxTransport(function(e){var n,i;if(vt.cors||Xe&&!e.crossDomain)return{send:function(r,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)s.setRequestHeader(o,r[o]);n=function(t){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(He[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),bt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),bt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return bt.globalEval(t),t}}}),bt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),bt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=bt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),ot.head.appendChild(e[0])},abort:function(){n&&n()}}}});var We=[],Ze=/(=)\?(?=&|$)|\?\?/;bt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=We.pop()||bt.expando+"_"+Ae++;return this[t]=!0,t}}),bt.ajaxPrefilter("json jsonp",function(e,n,i){var r,a,o,s=!1!==e.jsonp&&(Ze.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ze.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=yt(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ze,"$1"+r):!1!==e.jsonp&&(e.url+=(Me.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||bt.error(r+" was not called"),o[0]},e.dataTypes[0]="json",a=t[r],t[r]=function(){o=arguments},i.always(function(){void 0===a?bt(t).removeProp(r):t[r]=a,e[r]&&(e.jsonpCallback=n.jsonpCallback,We.push(r)),o&&yt(a)&&a(o[0]),o=a=void 0}),"script"}),vt.createHTMLDocument=function(){var t=ot.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),bt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,r,a;return e||(vt.createHTMLDocument?((i=(e=ot.implementation.createHTMLDocument("")).createElement("base")).href=ot.location.href,e.head.appendChild(i)):e=ot),r=kt.exec(t),a=!n&&[],r?[e.createElement(r[1])]:(r=E([t],e,a),a&&a.length&&bt(a).remove(),bt.merge([],r.childNodes))},bt.fn.load=function(t,e,n){var i,r,a,o=this,s=t.indexOf(" ");return s>-1&&(i=Y(t.slice(s)),t=t.slice(0,s)),yt(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&bt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){a=arguments,o.html(i?bt("<div>").append(bt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,a||[t.responseText,e,t])})}),this},bt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){bt.fn[e]=function(t){return this.on(e,t)}}),bt.expr.pseudos.animated=function(t){return bt.grep(bt.timers,function(e){return t===e.elem}).length},bt.offset={setOffset:function(t,e,n){var i,r,a,o,s,l,u=bt.css(t,"position"),c=bt(t),p={};"static"===u&&(t.style.position="relative"),s=c.offset(),a=bt.css(t,"top"),l=bt.css(t,"left"),("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1?(o=(i=c.position()).top,r=i.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),yt(e)&&(e=e.call(t,n,bt.extend({},s))),null!=e.top&&(p.top=e.top-s.top+o),null!=e.left&&(p.left=e.left-s.left+r),"using"in e?e.using.call(t,p):c.css(p)}},bt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){bt.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===bt.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===bt.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=bt(t).offset()).top+=bt.css(t,"borderTopWidth",!0),r.left+=bt.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-bt.css(i,"marginTop",!0),left:e.left-r.left-bt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===bt.css(t,"position");)t=t.offsetParent;return t||te})}}),bt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;bt.fn[t]=function(i){return Ot(this,function(t,i,r){var a;if(_t(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===r)return a?a[e]:t[i];a?a.scrollTo(n?a.pageXOffset:r,n?r:a.pageYOffset):t[i]=r},t,i,arguments.length)}}),bt.each(["top","left"],function(t,e){bt.cssHooks[e]=B(vt.pixelPosition,function(t,n){if(n)return n=O(t,e),le.test(n)?bt(t).position()[e]+"px":n})}),bt.each({Height:"height",Width:"width"},function(t,e){bt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){bt.fn[i]=function(r,a){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===a?"margin":"border");return Ot(this,function(e,n,r){var a;return _t(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===r?bt.css(e,n,s):bt.style(e,n,r,s)},e,o?r:void 0,o)}})}),bt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){bt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),bt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),bt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),bt.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),yt(t))return i=lt.call(arguments,2),r=function(){return t.apply(e||this,i.concat(lt.call(arguments)))},r.guid=t.guid=t.guid||bt.guid++,r},bt.holdReady=function(t){t?bt.readyWait++:bt.ready(!0)},bt.isArray=Array.isArray,bt.parseJSON=JSON.parse,bt.nodeName=a,bt.isFunction=yt,bt.isWindow=_t,bt.camelCase=f,bt.type=i,bt.now=Date.now,bt.isNumeric=function(t){var e=bt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return bt});var Ye=t.jQuery,Ke=t.$;return bt.noConflict=function(e){return t.$===bt&&(t.$=Ke),e&&t.jQuery===bt&&(t.jQuery=Ye),bt},e||(t.jQuery=t.$=bt),bt});var $jscomp={scope:{},findInternal:function(t,e,n){t instanceof String&&(t=String(t));for(var i=t.length,r=0;r<i;r++){var a=t[r];if(e.call(n,a,r,t))return{i:r,v:a}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}t=t[t.length-1],i=n[t],e=e(i),e!=i&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.find",function(t){return t||function(t,e){return $jscomp.findInternal(this,t,e).v}},"es6-impl","es3"),function(t,e,n){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e||n)}(function(t){var e=function(e,n,i){var r={invalid:[],getCaret:function(){try{var t,n=0,i=e.get(0),a=document.selection,o=i.selectionStart;return a&&-1===navigator.appVersion.indexOf("MSIE 10")?(t=a.createRange(),t.moveStart("character",-r.val().length),n=t.text.length):(o||"0"===o)&&(n=o),n}catch(t){}},setCaret:function(t){try{if(e.is(":focus")){var n,i=e.get(0);i.setSelectionRange?i.setSelectionRange(t,t):(n=i.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select())}}catch(t){}},events:function(){e.on("keydown.mask",function(t){e.data("mask-keycode",t.keyCode||t.which),e.data("mask-previus-value",e.val()),e.data("mask-previus-caret-pos",r.getCaret()),r.maskDigitPosMapOld=r.maskDigitPosMap}).on(t.jMaskGlobals.useInput?"input.mask":"keyup.mask",r.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){s===r.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)}).on("blur.mask",function(){s=r.val()}).on("focus.mask",function(e){!0===i.selectOnFocus&&t(e.target).select()}).on("focusout.mask",function(){i.clearIfNotMatch&&!a.test(r.val())&&r.val("")})},getRegexMask:function(){for(var t,e,i,r,a=[],s=0;s<n.length;s++)(t=o.translation[n.charAt(s)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),i=t.optional,(t=t.recursive)?(a.push(n.charAt(s)),r={digit:n.charAt(s),pattern:e}):a.push(i||t?e+"?":e)):a.push(n.charAt(s).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=a.join(""),r&&(a=a.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern)),new RegExp(a)},destroyEvents:function(){e.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(t){var n=e.is("input")?"val":"text";return 0<arguments.length?(e[n]()!==t&&e[n](t),n=e):n=e[n](),n},calculateCaretPosition:function(){var t=e.data("mask-previus-value")||"",n=r.getMasked(),i=r.getCaret();if(t!==n){var a,o=e.data("mask-previus-caret-pos")||0,n=n.length,s=t.length,l=t=0,u=0,c=0;for(a=i;a<n&&r.maskDigitPosMap[a];a++)l++;for(a=i-1;0<=a&&r.maskDigitPosMap[a];a--)t++;for(a=i-1;0<=a;a--)r.maskDigitPosMap[a]&&u++;for(a=o-1;0<=a;a--)r.maskDigitPosMapOld[a]&&c++;i>s?i=10*n:o>=i&&o!==s?r.maskDigitPosMapOld[i]||(o=i,i=i-(c-u)-t,r.maskDigitPosMap[i]&&(i=o)):i>o&&(i=i+(u-c)+l)}return i},behaviour:function(n){n=n||window.event,r.invalid=[];var i=e.data("mask-keycode");if(-1===t.inArray(i,o.byPassKeys)){var i=r.getMasked(),a=r.getCaret();return setTimeout(function(){r.setCaret(r.calculateCaretPosition())},t.jMaskGlobals.keyStrokeCompensation),r.val(i),r.setCaret(a),r.callbacks(n)}},getMasked:function(t,e){var a,s,l=[],u=void 0===e?r.val():e+"",c=0,p=n.length,h=0,d=u.length,f=1,m="push",g=-1,v=0,y=[];i.reverse?(m="unshift",f=-1,a=0,c=p-1,h=d-1,s=function(){return-1<c&&-1<h}):(a=p-1,s=function(){return c<p&&h<d});for(var _;s();){var x=n.charAt(c),b=u.charAt(h),w=o.translation[x];w?(b.match(w.pattern)?(l[m](b),w.recursive&&(-1===g?g=c:c===a&&c!==g&&(c=g-f),a===g&&(c-=f)),c+=f):b===_?(v--,_=void 0):w.optional?(c+=f,h-=f):w.fallback?(l[m](w.fallback),c+=f,h-=f):r.invalid.push({p:h,v:b,e:w.pattern}),h+=f):(t||l[m](x),b===x?(y.push(h),h+=f):(_=x,y.push(h+v),v++),c+=f)}return u=n.charAt(a),p!==d+1||o.translation[u]||l.push(u),l=l.join(""),r.mapMaskdigitPositions(l,y,d),l},mapMaskdigitPositions:function(t,e,n){for(t=i.reverse?t.length-n:0,r.maskDigitPosMap={},n=0;n<e.length;n++)r.maskDigitPosMap[e[n]+t]=1},callbacks:function(t){var a=r.val(),o=a!==s,l=[a,t,e,i],u=function(t,e,n){"function"==typeof i[t]&&e&&i[t].apply(this,n)};u("onChange",!0===o,l),u("onKeyPress",!0===o,l),u("onComplete",a.length===n.length,l),u("onInvalid",0<r.invalid.length,[a,t,e,r.invalid,i])}};e=t(e);var a,o=this,s=r.val();n="function"==typeof n?n(r.val(),void 0,e,i):n,o.mask=n,o.options=i,o.remove=function(){var t=r.getCaret();return o.options.placeholder&&e.removeAttr("placeholder"),e.data("mask-maxlength")&&e.removeAttr("maxlength"),r.destroyEvents(),r.val(o.getCleanVal()),r.setCaret(t),e},o.getCleanVal=function(){return r.getMasked(!0)},o.getMaskedVal=function(t){return r.getMasked(!1,t)},o.init=function(s){if(s=s||!1,i=i||{},o.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,o.byPassKeys=t.jMaskGlobals.byPassKeys,o.translation=t.extend({},t.jMaskGlobals.translation,i.translation),o=t.extend(!0,{},o,i),a=r.getRegexMask(),s)r.events(),r.val(r.getMasked());else{i.placeholder&&e.attr("placeholder",i.placeholder),e.data("mask")&&e.attr("autocomplete","off"),s=0;for(var l=!0;s<n.length;s++){var u=o.translation[n.charAt(s)];if(u&&u.recursive){l=!1;break}}l&&e.attr("maxlength",n.length).data("mask-maxlength",!0),r.destroyEvents(),r.events(),s=r.getCaret(),r.val(r.getMasked()),r.setCaret(s)}},o.init(!e.is("input"))};t.maskWatchers={};var n=function(){var n=t(this),r={},a=n.attr("data-mask");if(n.attr("data-mask-reverse")&&(r.reverse=!0),n.attr("data-mask-clearifnotmatch")&&(r.clearIfNotMatch=!0),"true"===n.attr("data-mask-selectonfocus")&&(r.selectOnFocus=!0),i(n,a,r))return n.data("mask",new e(this,a,r))},i=function(e,n,i){i=i||{};var r=t(e).data("mask"),a=JSON.stringify;e=t(e).val()||t(e).text();try{return"function"==typeof n&&(n=n(e)),"object"!=typeof r||a(r.options)!==a(i)||r.mask!==n}catch(t){}},r=function(t){var e,n=document.createElement("div");return t="on"+t,e=t in n,e||(n.setAttribute(t,"return;"),e="function"==typeof n[t]),e};t.fn.mask=function(n,r){r=r||{};var a=this.selector,o=t.jMaskGlobals,s=o.watchInterval,o=r.watchInputs||o.watchInputs,l=function(){if(i(this,n,r))return t(this).data("mask",new e(this,n,r))};return t(this).each(l),a&&""!==a&&o&&(clearInterval(t.maskWatchers[a]),t.maskWatchers[a]=setInterval(function(){t(document).find(a).each(l)},s)),this},t.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")})},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){e=e||t.jMaskGlobals.maskElements,(e instanceof t?e:t(e)).filter(t.jMaskGlobals.dataMaskAttr).each(n)},r={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&r("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}},t.jMaskGlobals=t.jMaskGlobals||{},r=t.jMaskGlobals=t.extend(!0,{},r,t.jMaskGlobals),r.dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},r.watchInterval)},window.jQuery,window.Zepto),function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.svg4everybody=e()}):"object"==typeof module&&module.exports?module.exports=e():t.svg4everybody=e()}(this,function(){function t(t,e,n){if(n){var i=document.createDocumentFragment(),r=!e.hasAttribute("viewBox")&&n.getAttribute("viewBox");r&&e.setAttribute("viewBox",r);for(var a=n.cloneNode(!0);a.childNodes.length;)i.appendChild(a.firstChild);t.appendChild(i)}}function e(e){e.onreadystatechange=function(){if(4===e.readyState){var n=e._cachedDocument;n||(n=e._cachedDocument=document.implementation.createHTMLDocument(""),n.body.innerHTML=e.responseText,e._cachedTarget={}),e._embeds.splice(0).map(function(i){var r=e._cachedTarget[i.id];r||(r=e._cachedTarget[i.id]=n.getElementById(i.id)),t(i.parent,i.svg,r)})}},e.onreadystatechange()}function n(n){function r(){for(var n=0;n<f.length;){var s=f[n],l=s.parentNode,u=i(l),c=s.getAttribute("xlink:href")||s.getAttribute("href");if(!c&&o.attributeName&&(c=s.getAttribute(o.attributeName)),u&&c){if(a)if(!o.validate||o.validate(c,u,s)){l.removeChild(s);var p=c.split("#"),g=p.shift(),v=p.join("#");if(g.length){var y=h[g];y||(y=h[g]=new XMLHttpRequest,y.open("GET",g),y.send(),y._embeds=[]),y._embeds.push({parent:l,svg:u,id:v}),e(y)}else t(l,u,document.getElementById(v))}else++n,++m}else++n}(!f.length||f.length-m>0)&&d(r,67)}var a,o=Object(n),s=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,l=/\bAppleWebKit\/(\d+)\b/,u=/\bEdge\/12\.(\d+)\b/,c=/\bEdge\/.(\d+)\b/,p=window.top!==window.self;a="polyfill"in o?o.polyfill:s.test(navigator.userAgent)||(navigator.userAgent.match(u)||[])[1]<10547||(navigator.userAgent.match(l)||[])[1]<537||c.test(navigator.userAgent)&&p;var h={},d=window.requestAnimationFrame||setTimeout,f=document.getElementsByTagName("use"),m=0;a&&r()}function i(t){for(var e=t;"svg"!==e.nodeName.toLowerCase()&&(e=e.parentNode););return e}return n});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(e,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n),n}:t(jQuery)}(function(t){return t.fn.tilt=function(e){var n=function(){this.ticking||(requestAnimationFrame(c.bind(this)),this.ticking=!0)},i=function(){var e=this;t(this).on("mousemove",s),t(this).on("mouseenter",a),this.settings.reset&&t(this).on("mouseleave",l),this.settings.glare&&t(window).on("resize",h.bind(e))},r=function(){var e=this;void 0!==this.timeout&&clearTimeout(this.timeout),t(this).css({transition:this.settings.speed+"ms "+this.settings.easing}),this.settings.glare&&this.glareElement.css({transition:"opacity "+this.settings.speed+"ms "+this.settings.easing}),this.timeout=setTimeout(function(){t(e).css({transition:""}),e.settings.glare&&e.glareElement.css({transition:""})},this.settings.speed)},a=function(e){this.ticking=!1,t(this).css({"will-change":"transform"}),r.call(this),t(this).trigger("tilt.mouseEnter")},o=function(e){return void 0===e&&(e={pageX:t(this).offset().left+t(this).outerWidth()/2,pageY:t(this).offset().top+t(this).outerHeight()/2}),{x:e.pageX,y:e.pageY}},s=function(t){this.mousePositions=o(t),n.call(this)},l=function(){r.call(this),this.reset=!0,n.call(this),t(this).trigger("tilt.mouseLeave")},u=function(){var e=t(this).outerWidth(),n=t(this).outerHeight(),i=t(this).offset().left,r=t(this).offset().top,a=(this.mousePositions.x-i)/e,o=(this.mousePositions.y-r)/n;return{tiltX:(this.settings.maxTilt/2-a*this.settings.maxTilt).toFixed(2),tiltY:(o*this.settings.maxTilt-this.settings.maxTilt/2).toFixed(2),percentageX:100*a,percentageY:100*o,angle:Math.atan2(this.mousePositions.x-(i+e/2),-(this.mousePositions.y-(r+n/2)))*(180/Math.PI)}},c=function(){if(this.transforms=u.call(this),this.reset)return this.reset=!1,t(this).css("transform","perspective("+this.settings.perspective+"px) rotateX(0deg) rotateY(0deg)"),void(this.settings.glare&&(this.glareElement.css("transform","rotate(180deg) translate(-50%, -50%)"),this.glareElement.css("opacity","0")));t(this).css("transform","perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.disableAxis?0:this.transforms.tiltY)+"deg) rotateY("+("y"===this.settings.disableAxis?0:this.transforms.tiltX)+"deg) scale3d("+this.settings.scale+","+this.settings.scale+","+this.settings.scale+")"),this.settings.glare&&(this.glareElement.css("transform","rotate("+this.transforms.angle+"deg) translate(-50%, -50%)"),this.glareElement.css("opacity",""+this.transforms.percentageY*this.settings.maxGlare/100)),t(this).trigger("change",[this.transforms]),this.ticking=!1},p=function(){var e=this.settings.glarePrerender;if(e||t(this).append('<div class="js-tilt-glare"><div class="js-tilt-glare-inner"></div></div>'),this.glareElementWrapper=t(this).find(".js-tilt-glare"),this.glareElement=t(this).find(".js-tilt-glare-inner"),!e){var n={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"};this.glareElementWrapper.css(n).css({overflow:"hidden","pointer-events":"none"}),this.glareElement.css({position:"absolute",top:"50%",left:"50%","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",width:""+2*t(this).outerWidth(),height:""+2*t(this).outerWidth(),transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"})}},h=function(){this.glareElement.css({width:""+2*t(this).outerWidth(),height:""+2*t(this).outerWidth()})};return t.fn.tilt.destroy=function(){t(this).each(function(){t(this).find(".js-tilt-glare").remove(),t(this).css({"will-change":"",transform:""}),t(this).off("mousemove mouseenter mouseleave")})},t.fn.tilt.getValues=function(){var e=[];return t(this).each(function(){this.mousePositions=o.call(this),e.push(u.call(this))}),e},t.fn.tilt.reset=function(){t(this).each(function(){var e=this;this.mousePositions=o.call(this),this.settings=t(this).data("settings"),l.call(this),setTimeout(function(){e.reset=!1},this.settings.transition)})},this.each(function(){var n=this;this.settings=t.extend({maxTilt:t(this).is("[data-tilt-max]")?t(this).data("tilt-max"):20,perspective:t(this).is("[data-tilt-perspective]")?t(this).data("tilt-perspective"):300,easing:t(this).is("[data-tilt-easing]")?t(this).data("tilt-easing"):"cubic-bezier(.03,.98,.52,.99)",scale:t(this).is("[data-tilt-scale]")?t(this).data("tilt-scale"):"1",speed:t(this).is("[data-tilt-speed]")?t(this).data("tilt-speed"):"400",transition:!t(this).is("[data-tilt-transition]")||t(this).data("tilt-transition"),disableAxis:t(this).is("[data-tilt-disable-axis]")?t(this).data("tilt-disable-axis"):null,axis:t(this).is("[data-tilt-axis]")?t(this).data("tilt-axis"):null,reset:!t(this).is("[data-tilt-reset]")||t(this).data("tilt-reset"),glare:!!t(this).is("[data-tilt-glare]")&&t(this).data("tilt-glare"),maxGlare:t(this).is("[data-tilt-maxglare]")?t(this).data("tilt-maxglare"):1},e),null!==this.settings.axis&&(console.warn("Tilt.js: the axis setting has been renamed to disableAxis. See https://github.com/gijsroge/tilt.js/pull/26 for more information"),this.settings.disableAxis=this.settings.axis),this.init=function(){t(n).data("settings",n.settings),n.settings.glare&&p.call(n),i.call(n)},this.init()})},t("[data-tilt]").tilt(),!0}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(e){n.submitButton=e.currentTarget,t(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(e){function i(){var i,r;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),!(n.settings.submitHandler&&!n.settings.debug)||(r=n.settings.submitHandler.call(n,n.currentForm,e),i&&i.remove(),void 0!==r&&r)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var e,n,i;return t(this[0]).is("form")?e=this.validate().form():(i=[],e=!0,n=t(this[0].form).validate(),this.each(function(){(e=n.element(this)&&e)||(i=i.concat(n.errorList))}),n.errorList=i),e},rules:function(e,n){var i,r,a,o,s,l,u=this[0];if(null!=u&&(!u.form&&u.isContentEditable&&(u.form=this.closest("form")[0],u.name=this.attr("name")),null!=u.form)){if(e)switch(i=t.data(u.form,"validator").settings,r=i.rules,a=t.validator.staticRules(u),e){case"add":t.extend(a,t.validator.normalizeRule(n)),delete a.messages,r[u.name]=a,n.messages&&(i.messages[u.name]=t.extend(i.messages[u.name],n.messages));break;case"remove":return n?(l={},t.each(n.split(/\s/),function(t,e){l[e]=a[e],delete a[e]}),l):(delete r[u.name],a)}return o=t.validator.normalizeRules(t.extend({},t.validator.classRules(u),t.validator.attributeRules(u),t.validator.dataRules(u),t.validator.staticRules(u)),u),o.required&&(s=o.required,delete o.required,o=t.extend({required:s},o)),o.remote&&(s=o.remote,delete o.remote,o=t.extend(o,{remote:s})),o}}}),t.extend(t.expr.pseudos||t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){var n=t(e).val();return null!==n&&!!t.trim(""+n)},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:void 0===n?e:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,n){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===n.which&&""===this.elementValue(e)||-1!==t.inArray(n.keyCode,i)||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}."),step:t.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){if(!this.form&&this.isContentEditable&&(this.form=t(this).closest("form")[0],this.name=t(this).attr("name")),i===this.form){var n=t.data(this.form,"validator"),r="on"+e.type.replace(/^validate/,""),a=n.settings;a[r]&&!t(this).is(a.ignore)&&a[r].call(n,this,e)}}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.currentForm,r=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){r[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n,i,r=this.clean(e),a=this.validationTargetFor(r),o=this,s=!0;return void 0===a?delete this.invalid[r.name]:(this.prepareElement(a),this.currentElements=t(a),i=this.groups[a.name],i&&t.each(this.groups,function(t,e){e===i&&t!==a.name&&(r=o.validationTargetFor(o.clean(o.findByName(t))))&&r.name in o.invalid&&(o.currentElements.push(r),s=o.check(r)&&s)}),n=!1!==this.check(a),s=s&&n,this.invalid[a.name]=!n,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t(e).attr("aria-invalid",!n)),s},showErrors:function(e){if(e){var n=this;t.extend(this.errorMap,e),this.errorList=t.map(this.errorMap,function(t,e){return{message:t,element:n.findByName(e)[0]}}),this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var i=this.name||t(this).attr("name");return!i&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.isContentEditable&&(this.form=t(this).closest("form")[0],this.name=i),!(this.form!==e.currentForm||i in n||!e.objectLength(t(this).rules())||(n[i]=!0,0))})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([])},reset:function(){this.resetInternals(),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i,r=t(e),a=e.type;return"radio"===a||"checkbox"===a?this.findByName(e.name).filter(":checked").val():"number"===a&&void 0!==e.validity?e.validity.badInput?"NaN":r.val():(n=e.isContentEditable?r.text():r.val(),"file"===a?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(i=n.lastIndexOf("/"),i>=0?n.substr(i+1):(i=n.lastIndexOf("\\"),i>=0?n.substr(i+1):n)):"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,r,a,o=t(e).rules(),s=t.map(o,function(t,e){return e}).length,l=!1,u=this.elementValue(e);"function"==typeof o.normalizer?a=o.normalizer:"function"==typeof this.settings.normalizer&&(a=this.settings.normalizer),a&&(u=a.call(e,u),delete o.normalizer);for(i in o){r={method:i,parameters:o[i]};try{if("dependency-mismatch"===(n=t.validator.methods[i].call(this,u,e,r.parameters))&&1===s){l=!0;continue}if(l=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,r),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+r.method+"' method."),t}}if(!l)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){"string"==typeof n&&(n={method:n});var i=this.findDefined(this.customMessage(e.name,n.method),this.customDataMessage(e,n.method),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,n.parameters,e):r.test(i)&&(i=t.validator.format(i.replace(r,"{$1}"),n.parameters)),i},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,r,a,o,s=this.errorsFor(e),l=this.idOrName(e),u=t(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(n)):(s=t("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(n||""),i=s,this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,t(e)):i.insertAfter(e),s.is("label")?s.attr("for",l):0===s.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(a=s.attr("id"),u?u.match(new RegExp("\\b"+this.escapeCssMeta(a)+"\\b"))||(u+=" "+a):u=a,t(e).attr("aria-describedby",u),(r=this.groups[e.name])&&(o=this,t.each(o.groups,function(e,n){n===r&&t("[name='"+o.escapeCssMeta(e)+"']",o.currentForm).attr("aria-describedby",s.attr("id"))})))),!n&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var n=this.escapeCssMeta(this.idOrName(e)),i=t(e).attr("aria-describedby"),r="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(r=r+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(r)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,t(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t(e).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.submitButton&&t("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,n){return n="string"==typeof n&&n||"remote",t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:n})})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(t,e,n,i){/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(e){var n,i,r={},a=t(e),o=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(i=e.getAttribute(n),""===i&&(i=!0),i=!!i):i=a.attr(n),this.normalizeAttributeRule(r,o,n,i);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var n,i,r={},a=t(e),o=e.getAttribute("type");for(n in t.validator.methods)i=a.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),""===i&&(i=!0),this.normalizeAttributeRule(r,o,n,i);return r},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,r){if(!1===r)return void delete e[i];if(r.param||r.depends){var a=!0;switch(typeof r.depends){case"string":a=!!t(r.depends,n.form).length;break;case"function":a=r.depends.call(n,n)}a?e[i]=void 0===r.param||r.param:(t.data(n.form,"validator").resetElements(t(n)),delete e[i])}}),t.each(e,function(i,r){e[i]=t.isFunction(r)&&"normalizer"!==i?r(n):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var r=t(n).val();return r&&r.length>0}return this.checkable(n)?this.getLength(e,n)>0:void 0!==e&&null!==e&&e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(){var t=!1;return function(e,n){return t||(t=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(n)||!/Invalid|NaN/.test(new Date(e).toString())}}(),dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i},maxlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r<=i},rangelength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i[0]&&r<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},step:function(e,n,i){var r,a=t(n).attr("type"),o="Step attribute on input type "+a+" is not supported.",s=["text","number","range"],l=new RegExp("\\b"+a+"\\b"),u=a&&!l.test(s.join()),c=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},p=function(t){return Math.round(t*Math.pow(10,r))},h=!0;if(u)throw new Error(o);return r=c(i),(c(e)>r||p(e)%p(i)!=0)&&(h=!1),this.optional(n)||h},equalTo:function(e,n,i){var r=t(i);return this.settings.onfocusout&&r.not(".validate-equalTo-blur").length&&r.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){t(n).valid()}),e===r.val()},remote:function(e,n,i,r){if(this.optional(n))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var a,o,s,l=this.previousValue(n,r);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[n.name][r],this.settings.messages[n.name][r]=l.message,i="string"==typeof i&&{url:i}||i,s=t.param(t.extend({data:e},i.data)),l.old===s?l.valid:(l.old=s,a=this,this.startRequest(n),o={},o[n.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:o,context:a.currentForm,success:function(t){var i,o,s,u=!0===t||"true"===t;a.settings.messages[n.name][r]=l.originalMessage,u?(s=a.formSubmitted,a.resetInternals(),a.toHide=a.errorsFor(n),a.formSubmitted=s,a.successList.push(n),a.invalid[n.name]=!1,a.showErrors()):(i={},o=t||a.defaultMessage(n,{method:r,parameters:e}),i[n.name]=l.message=o,a.invalid[n.name]=!0,a.showErrors(i)),l.valid=u,a.stopRequest(n,u)}},i)),"pending")}}});var e,n={};return t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,i){var r=t.port;"abort"===t.mode&&(n[r]&&n[r].abort(),n[r]=i)}):(e=t.ajax,t.ajax=function(i){var r=("mode"in i?i:t.ajaxSettings).mode,a=("port"in i?i:t.ajaxSettings).port;return"abort"===r?(n[a]&&n[a].abort(),n[a]=e.apply(this,arguments),n[a]):e.apply(this,arguments)}),t}),function(t){"function"==typeof define&&define.amd?define(["jquery","../jquery.validate.min"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){return t.extend(t.validator.messages,{required:"Это поле необходимо заполнить.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",extension:"Пожалуйста, выберите файл с правильным расширением.",maxlength:t.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:t.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:t.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:t.validator.format("Пожалуйста, введите число от {0} до {1}."),max:t.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:t.validator.format("Пожалуйста, введите число, большее или равное {0}.")}),t}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n),n}:t(jQuery)}(function(t){function e(){var t,e=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}function n(t){return 9===t?-1!==navigator.appVersion.indexOf("MSIE 9."):(userAgent=navigator.userAgent,userAgent.indexOf("MSIE ")>-1||userAgent.indexOf("Trident/")>-1)}function i(t){var e=/%|px|em|cm|vh|vw/;return parseInt(String(t).split(e)[0])}var r=t(window),a=t(document),o="iziModal",s={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened",DESTROYED:"destroyed"},l=e(),u=!!/Mobi/.test(navigator.userAgent);window.$iziModal={},window.$iziModal.autoOpen=0,window.$iziModal.history=!1;var c=function(t,e){this.init(t,e)};return c.prototype={constructor:c,init:function(e,n){var i=this;this.$element=t(e),void 0!==this.$element[0].id&&""!==this.$element[0].id?this.id=this.$element[0].id:(this.id=o+Math.floor(1e7*Math.random()+1),this.$element.attr("id",this.id)),this.classes=void 0!==this.$element.attr("class")?this.$element.attr("class"):"",this.content=this.$element.html(),this.state=s.CLOSED,this.options=n,this.width=0,this.timer=null,this.timerTimeout=null,this.progressBar=null,this.isPaused=!1,this.isFullscreen=!1,this.headerHeight=0,this.modalHeight=0,this.$overlay=t('<div class="'+o+'-overlay" style="background-color:'+n.overlayColor+'"></div>'),this.$navigate=t('<div class="'+o+'-navigate"><div class="'+o+'-navigate-caption">Use</div><button class="'+o+'-navigate-prev"></button><button class="'+o+'-navigate-next"></button></div>'),this.group={name:this.$element.attr("data-"+o+"-group"),index:null,ids:[]},this.$element.attr("aria-hidden","true"),this.$element.attr("aria-labelledby",this.id),this.$element.attr("role","dialog"),this.$element.hasClass("iziModal")||this.$element.addClass("iziModal"),void 0===this.group.name&&""!==n.group&&(this.group.name=n.group,this.$element.attr("data-"+o+"-group",n.group)),!0===this.options.loop&&this.$element.attr("data-"+o+"-loop",!0),t.each(this.options,function(t,e){var r=i.$element.attr("data-"+o+"-"+t);try{void 0!==r&&(n[t]=""===r||"true"==r||"false"!=r&&("function"==typeof e?new Function(r):r))}catch(t){}}),!1!==n.appendTo&&this.$element.appendTo(n.appendTo),!0===n.iframe?(this.$element.html('<div class="'+o+'-wrap"><div class="'+o+'-content"><iframe class="'+o+'-iframe"></iframe>'+this.content+"</div></div>"),null!==n.iframeHeight&&this.$element.find("."+o+"-iframe").css("height",n.iframeHeight)):this.$element.html('<div class="'+o+'-wrap"><div class="'+o+'-content">'+this.content+"</div></div>"),null!==this.options.background&&this.$element.css("background",this.options.background),this.$wrap=this.$element.find("."+o+"-wrap"),null===n.zindex||isNaN(parseInt(n.zindex))||(this.$element.css("z-index",n.zindex),this.$navigate.css("z-index",n.zindex-1),this.$overlay.css("z-index",n.zindex-2)),""!==n.radius&&this.$element.css("border-radius",n.radius),""!==n.padding&&this.$element.find("."+o+"-content").css("padding",n.padding),""!==n.theme&&("light"===n.theme?this.$element.addClass(o+"-light"):this.$element.addClass(n.theme)),!0===n.rtl&&this.$element.addClass(o+"-rtl"),!0===n.openFullscreen&&(this.isFullscreen=!0,this.$element.addClass("isFullscreen")),this.createHeader(),this.recalcWidth(),this.recalcVerticalPos(),!i.options.afterRender||"function"!=typeof i.options.afterRender&&"object"!=typeof i.options.afterRender||i.options.afterRender(i)},createHeader:function(){this.$header=t('<div class="'+o+'-header"><h2 class="'+o+'-header-title">'+this.options.title+'</h2><p class="'+o+'-header-subtitle">'+this.options.subtitle+'</p><div class="'+o+'-header-buttons"></div></div>'),!0===this.options.closeButton&&this.$header.find("."+o+"-header-buttons").append('<a href="javascript:void(0)" class="'+o+"-button "+o+'-button-close" data-'+o+"-close></a>"),!0===this.options.fullscreen&&this.$header.find("."+o+"-header-buttons").append('<a href="javascript:void(0)" class="'+o+"-button "+o+'-button-fullscreen" data-'+o+"-fullscreen></a>"),!0!==this.options.timeoutProgressbar||isNaN(parseInt(this.options.timeout))||!1===this.options.timeout||0===this.options.timeout||this.$header.prepend('<div class="'+o+'-progressbar"><div style="background-color:'+this.options.timeoutProgressbarColor+'"></div></div>'),""===this.options.subtitle&&this.$header.addClass(o+"-noSubtitle"),""!==this.options.title&&(null!==this.options.headerColor&&(!0===this.options.borderBottom&&this.$element.css("border-bottom","3px solid "+this.options.headerColor),this.$header.css("background",this.options.headerColor)),null===this.options.icon&&null===this.options.iconText||(this.$header.prepend('<i class="'+o+'-header-icon"></i>'),null!==this.options.icon&&this.$header.find("."+o+"-header-icon").addClass(this.options.icon).css("color",this.options.iconColor),null!==this.options.iconText&&this.$header.find("."+o+"-header-icon").html(this.options.iconText)),this.$element.css("overflow","hidden").prepend(this.$header))},setGroup:function(e){var n=this,i=this.group.name||e;if(this.group.ids=[],void 0!==e&&e!==this.group.name&&(i=e,this.group.name=i,this.$element.attr("data-"+o+"-group",i)),void 0!==i&&""!==i){var r=0;t.each(t("."+o+"[data-"+o+"-group="+i+"]"),function(e,i){n.group.ids.push(t(this)[0].id),n.id==t(this)[0].id&&(n.group.index=r),r++})}},toggle:function(){this.state==s.OPENED&&this.close(),this.state==s.CLOSED&&this.open()},open:function(e){function n(){r.state=s.OPENED,r.$element.trigger(s.OPENED),!r.options.onOpened||"function"!=typeof r.options.onOpened&&"object"!=typeof r.options.onOpened||r.options.onOpened(r)}function i(){r.$element.off("click","[data-"+o+"-close]").on("click","[data-"+o+"-close]",function(e){e.preventDefault();var n=t(e.currentTarget).attr("data-"+o+"-transitionOut");void 0!==n?r.close({transition:n}):r.close()}),r.$element.off("click","[data-"+o+"-fullscreen]").on("click","[data-"+o+"-fullscreen]",function(t){t.preventDefault(),!0===r.isFullscreen?(r.isFullscreen=!1,r.$element.removeClass("isFullscreen")):(r.isFullscreen=!0,r.$element.addClass("isFullscreen")),r.options.onFullscreen&&"function"==typeof r.options.onFullscreen&&r.options.onFullscreen(r),r.$element.trigger("fullscreen",r)}),r.$navigate.off("click","."+o+"-navigate-next").on("click","."+o+"-navigate-next",function(t){r.next(t)}),r.$element.off("click","[data-"+o+"-next]").on("click","[data-"+o+"-next]",function(t){r.next(t)}),r.$navigate.off("click","."+o+"-navigate-prev").on("click","."+o+"-navigate-prev",function(t){r.prev(t)}),r.$element.off("click","[data-"+o+"-prev]").on("click","[data-"+o+"-prev]",function(t){r.prev(t)})}var r=this;if(t.each(t("."+o),function(e,n){if(void 0!==t(n).data().iziModal){var i=t(n).iziModal("getState");"opened"!=i&&"opening"!=i||t(n).iziModal("close")}}),function(){if(r.options.history){var t=document.title;document.title=t+" - "+r.options.title,document.location.hash=r.id,document.title=t,window.$iziModal.history=!0}else window.$iziModal.history=!1}(),this.state==s.CLOSED){if(i(),this.setGroup(),this.state=s.OPENING,this.$element.trigger(s.OPENING),this.$element.attr("aria-hidden","false"),!0===this.options.iframe){this.$element.find("."+o+"-content").addClass(o+"-content-loader"),this.$element.find("."+o+"-iframe").on("load",function(){t(this).parent().removeClass(o+"-content-loader")});var c=null;try{c=""!==t(e.currentTarget).attr("href")?t(e.currentTarget).attr("href"):null}catch(t){}if(null===this.options.iframeURL||null!==c&&void 0!==c||(c=this.options.iframeURL),null===c||void 0===c)throw new Error("Failed to find iframe URL");this.$element.find("."+o+"-iframe").attr("src",c)}(this.options.bodyOverflow||u)&&(t("html").addClass(o+"-isOverflow"),u&&t("body").css("overflow","hidden")),this.options.onOpening&&"function"==typeof this.options.onOpening&&this.options.onOpening(this),function(){if(r.group.ids.length>1){r.$navigate.appendTo("body"),r.$navigate.addClass("fadeIn"),!0===r.options.navigateCaption&&r.$navigate.find("."+o+"-navigate-caption").show();var i=r.$element.outerWidth();!1!==r.options.navigateArrows?"closeScreenEdge"===r.options.navigateArrows?(r.$navigate.find("."+o+"-navigate-prev").css("left",0).show(),r.$navigate.find("."+o+"-navigate-next").css("right",0).show()):(r.$navigate.find("."+o+"-navigate-prev").css("margin-left",-(i/2+84)).show(),r.$navigate.find("."+o+"-navigate-next").css("margin-right",-(i/2+84)).show()):(r.$navigate.find("."+o+"-navigate-prev").hide(),r.$navigate.find("."+o+"-navigate-next").hide());0===r.group.index&&0===t("."+o+"[data-"+o+'-group="'+r.group.name+'"][data-'+o+"-loop]").length&&!1===r.options.loop&&r.$navigate.find("."+o+"-navigate-prev").hide(),r.group.index+1===r.group.ids.length&&0===t("."+o+"[data-"+o+'-group="'+r.group.name+'"][data-'+o+"-loop]").length&&!1===r.options.loop&&r.$navigate.find("."+o+"-navigate-next").hide()}!0===r.options.overlay&&(!1===r.options.appendToOverlay?r.$overlay.appendTo("body"):r.$overlay.appendTo(r.options.appendToOverlay)),r.options.transitionInOverlay&&r.$overlay.addClass(r.options.transitionInOverlay);var a=r.options.transitionIn;"object"==typeof e&&(void 0===e.transition&&void 0===e.transitionIn||(a=e.transition||e.transitionIn)),""!==a&&void 0!==l?(r.$element.addClass("transitionIn "+a).show(),r.$wrap.one(l,function(){r.$element.removeClass(a+" transitionIn"),r.$overlay.removeClass(r.options.transitionInOverlay),r.$navigate.removeClass("fadeIn"),n()})):(r.$element.show(),n()),!0!==r.options.pauseOnHover||!0!==r.options.pauseOnHover||!1===r.options.timeout||isNaN(parseInt(r.options.timeout))||!1===r.options.timeout||0===r.options.timeout||(r.$element.off("mouseenter").on("mouseenter",function(t){t.preventDefault(),r.isPaused=!0}),r.$element.off("mouseleave").on("mouseleave",function(t){t.preventDefault(),r.isPaused=!1}))}(),!1===this.options.timeout||isNaN(parseInt(this.options.timeout))||!1===this.options.timeout||0===this.options.timeout||(!0===this.options.timeoutProgressbar?(this.progressBar={hideEta:null,maxHideTime:null,currentTime:(new Date).getTime(),el:this.$element.find("."+o+"-progressbar > div"),updateProgress:function(){if(!r.isPaused){r.progressBar.currentTime=r.progressBar.currentTime+10;var t=(r.progressBar.hideEta-r.progressBar.currentTime)/r.progressBar.maxHideTime*100;r.progressBar.el.width(t+"%"),t<0&&r.close()}}},this.options.timeout>0&&(this.progressBar.maxHideTime=parseFloat(this.options.timeout),this.progressBar.hideEta=(new Date).getTime()+this.progressBar.maxHideTime,this.timerTimeout=setInterval(this.progressBar.updateProgress,10))):this.timerTimeout=setTimeout(function(){r.close()},r.options.timeout)),this.options.overlayClose&&!this.$element.hasClass(this.options.transitionOut)&&this.$overlay.click(function(){r.close()}),this.options.focusInput&&this.$element.find(":input:not(button):enabled:visible:first").focus(),function t(){r.recalcLayout(),r.timer=setTimeout(t,300)}(),a.on("keydown."+o,function(t){r.options.closeOnEscape&&27===t.keyCode&&r.close()})}},close:function(e){function n(){i.state=s.CLOSED,i.$element.trigger(s.CLOSED),!0===i.options.iframe&&i.$element.find("."+o+"-iframe").attr("src",""),(i.options.bodyOverflow||u)&&(t("html").removeClass(o+"-isOverflow"),u&&t("body").css("overflow","auto")),i.options.onClosed&&"function"==typeof i.options.onClosed&&i.options.onClosed(i),!0===i.options.restoreDefaultContent&&i.$element.find("."+o+"-content").html(i.content),0===t("."+o+":visible").length&&t("html").removeClass(o+"-isAttached")}var i=this;if(this.state==s.OPENED||this.state==s.OPENING){a.off("keydown."+o),this.state=s.CLOSING,this.$element.trigger(s.CLOSING),this.$element.attr("aria-hidden","true"),clearTimeout(this.timer),clearTimeout(this.timerTimeout),i.options.onClosing&&"function"==typeof i.options.onClosing&&i.options.onClosing(this);var r=this.options.transitionOut;"object"==typeof e&&(void 0===e.transition&&void 0===e.transitionOut||(r=e.transition||e.transitionOut)),!1===r||""===r||void 0===l?(this.$element.hide(),this.$overlay.remove(),this.$navigate.remove(),n()):(this.$element.attr("class",[this.classes,o,r,"light"==this.options.theme?o+"-light":this.options.theme,!0===this.isFullscreen?"isFullscreen":"",this.options.rtl?o+"-rtl":""].join(" ")),this.$overlay.attr("class",o+"-overlay "+this.options.transitionOutOverlay),!1!==i.options.navigateArrows&&this.$navigate.attr("class",o+"-navigate fadeOut"),this.$element.one(l,function(){i.$element.hasClass(r)&&i.$element.removeClass(r+" transitionOut").hide(),i.$overlay.removeClass(i.options.transitionOutOverlay).remove(),i.$navigate.removeClass("fadeOut").remove(),n()}))}},next:function(e){var n=this,i="fadeInRight",r="fadeOutLeft",a=t("."+o+":visible"),s={};s.out=this,void 0!==e&&"object"!=typeof e?(e.preventDefault(),a=t(e.currentTarget),i=a.attr("data-"+o+"-transitionIn"),r=a.attr("data-"+o+"-transitionOut")):void 0!==e&&(void 0!==e.transitionIn&&(i=e.transitionIn),void 0!==e.transitionOut&&(r=e.transitionOut)),this.close({transition:r}),setTimeout(function(){for(var e=t("."+o+"[data-"+o+'-group="'+n.group.name+'"][data-'+o+"-loop]").length,r=n.group.index+1;r<=n.group.ids.length;r++){try{s.in=t("#"+n.group.ids[r]).data().iziModal}catch(t){}if(void 0!==s.in){t("#"+n.group.ids[r]).iziModal("open",{transition:i});break}if(r==n.group.ids.length&&e>0||!0===n.options.loop)for(var a=0;a<=n.group.ids.length;a++)if(s.in=t("#"+n.group.ids[a]).data().iziModal,void 0!==s.in){t("#"+n.group.ids[a]).iziModal("open",{transition:i});break}}},200),t(document).trigger(o+"-group-change",s)},prev:function(e){var n=this,i="fadeInLeft",r="fadeOutRight",a=t("."+o+":visible"),s={};s.out=this,void 0!==e&&"object"!=typeof e?(e.preventDefault(),a=t(e.currentTarget),i=a.attr("data-"+o+"-transitionIn"),r=a.attr("data-"+o+"-transitionOut")):void 0!==e&&(void 0!==e.transitionIn&&(i=e.transitionIn),void 0!==e.transitionOut&&(r=e.transitionOut)),this.close({transition:r}),setTimeout(function(){for(var e=t("."+o+"[data-"+o+'-group="'+n.group.name+'"][data-'+o+"-loop]").length,r=n.group.index;r>=0;r--){try{s.in=t("#"+n.group.ids[r-1]).data().iziModal}catch(t){}if(void 0!==s.in){t("#"+n.group.ids[r-1]).iziModal("open",{transition:i});break}if(0===r&&e>0||!0===n.options.loop)for(var a=n.group.ids.length-1;a>=0;a--)if(s.in=t("#"+n.group.ids[a]).data().iziModal,void 0!==s.in){t("#"+n.group.ids[a]).iziModal("open",{transition:i});break}}},200),t(document).trigger(o+"-group-change",s)},destroy:function(){var e=t.Event("destroy");this.$element.trigger(e),a.off("keydown."+o),clearTimeout(this.timer),clearTimeout(this.timerTimeout),!0===this.options.iframe&&this.$element.find("."+o+"-iframe").remove(),this.$element.html(this.$element.find("."+o+"-content").html()),this.$element.off("click","[data-"+o+"-close]"),this.$element.off("click","[data-"+o+"-fullscreen]"),this.$element.off("."+o).removeData(o).attr("style",""),this.$overlay.remove(),this.$navigate.remove(),this.$element.trigger(s.DESTROYED),this.$element=null},getState:function(){return this.state},getGroup:function(){return this.group},setWidth:function(t){this.options.width=t,this.recalcWidth();var e=this.$element.outerWidth();!0!==this.options.navigateArrows&&"closeToModal"!=this.options.navigateArrows||(this.$navigate.find("."+o+"-navigate-prev").css("margin-left",-(e/2+84)).show(),this.$navigate.find("."+o+"-navigate-next").css("margin-right",-(e/2+84)).show())},setTop:function(t){this.options.top=t,this.recalcVerticalPos(!1)},setBottom:function(t){this.options.bottom=t,this.recalcVerticalPos(!1)},setHeader:function(t){t?this.$element.find("."+o+"-header").show():(this.headerHeight=0,this.$element.find("."+o+"-header").hide())},setTitle:function(t){this.options.title=t,0===this.headerHeight&&this.createHeader(),0===this.$header.find("."+o+"-header-title").length&&this.$header.append('<h2 class="'+o+'-header-title"></h2>'),this.$header.find("."+o+"-header-title").html(t)},setSubtitle:function(t){""===t?(this.$header.find("."+o+"-header-subtitle").remove(),this.$header.addClass(o+"-noSubtitle")):(0===this.$header.find("."+o+"-header-subtitle").length&&this.$header.append('<p class="'+o+'-header-subtitle"></p>'),this.$header.removeClass(o+"-noSubtitle")),this.$header.find("."+o+"-header-subtitle").html(t),this.options.subtitle=t},setIcon:function(t){0===this.$header.find("."+o+"-header-icon").length&&this.$header.prepend('<i class="'+o+'-header-icon"></i>'),this.$header.find("."+o+"-header-icon").attr("class",o+"-header-icon "+t),this.options.icon=t},setIconText:function(t){this.$header.find("."+o+"-header-icon").html(t),this.options.iconText=t},setHeaderColor:function(t){!0===this.options.borderBottom&&this.$element.css("border-bottom","3px solid "+t),this.$header.css("background",t),this.options.headerColor=t},setBackground:function(t){!1===t?(this.options.background=null,this.$element.css("background","")):(this.$element.css("background",t),this.options.background=t)},setZindex:function(t){isNaN(parseInt(this.options.zindex))||(this.options.zindex=t,this.$element.css("z-index",t),this.$navigate.css("z-index",t-1),this.$overlay.css("z-index",t-2))},setFullscreen:function(t){t?(this.isFullscreen=!0,this.$element.addClass("isFullscreen")):(this.isFullscreen=!1,this.$element.removeClass("isFullscreen"))},setContent:function(t){if("object"==typeof t){!0===(t.default||!1)&&(this.content=t.content),t=t.content}!1===this.options.iframe&&this.$element.find("."+o+"-content").html(t)},setTransitionIn:function(t){this.options.transitionIn=t},setTransitionOut:function(t){this.options.transitionOut=t},resetContent:function(){this.$element.find("."+o+"-content").html(this.content)},startLoading:function(){this.$element.find("."+o+"-loader").length||this.$element.append('<div class="'+o+'-loader fadeIn"></div>'),this.$element.find("."+o+"-loader").css({top:this.headerHeight,borderRadius:this.options.radius})},stopLoading:function(){var t=this.$element.find("."+o+"-loader");t.length||(this.$element.prepend('<div class="'+o+'-loader fadeIn"></div>'),t=this.$element.find("."+o+"-loader").css("border-radius",this.options.radius)),t.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t.remove()},600)},recalcWidth:function(){var t=this;if(this.$element.css("max-width",this.options.width),n()){var e=t.options.width;e.toString().split("%").length>1&&(e=t.$element.outerWidth()),t.$element.css({left:"50%",marginLeft:-e/2})}},recalcVerticalPos:function(t){null!==this.options.top&&!1!==this.options.top?(this.$element.css("margin-top",this.options.top),0===this.options.top&&this.$element.css({borderTopRightRadius:0,borderTopLeftRadius:0})):!1===t&&this.$element.css({marginTop:"",borderRadius:this.options.radius}),null!==this.options.bottom&&!1!==this.options.bottom?(this.$element.css("margin-bottom",this.options.bottom),0===this.options.bottom&&this.$element.css({borderBottomRightRadius:0,borderBottomLeftRadius:0})):!1===t&&this.$element.css({marginBottom:"",borderRadius:this.options.radius})},recalcLayout:function(){var e=this,a=r.height(),l=this.$element.outerHeight(),u=this.$element.outerWidth(),c=this.$element.find("."+o+"-content")[0].scrollHeight,p=c+this.headerHeight,h=this.$element.innerHeight()-this.headerHeight,d=(parseInt(-(this.$element.innerHeight()+1)/2),this.$wrap.scrollTop()),f=0;n()&&(u>=r.width()||!0===this.isFullscreen?this.$element.css({left:"0",marginLeft:""}):this.$element.css({left:"50%",marginLeft:-u/2})),!0===this.options.borderBottom&&""!==this.options.title&&(f=3),this.$element.find("."+o+"-header").length&&this.$element.find("."+o+"-header").is(":visible")?(this.headerHeight=parseInt(this.$element.find("."+o+"-header").innerHeight()),this.$element.css("overflow","hidden")):(this.headerHeight=0,this.$element.css("overflow","")),this.$element.find("."+o+"-loader").length&&this.$element.find("."+o+"-loader").css("top",this.headerHeight),l!==this.modalHeight&&(this.modalHeight=l,this.options.onResize&&"function"==typeof this.options.onResize&&this.options.onResize(this)),this.state!=s.OPENED&&this.state!=s.OPENING||(!0===this.options.iframe&&(a<this.options.iframeHeight+this.headerHeight+f||!0===this.isFullscreen?this.$element.find("."+o+"-iframe").css("height",a-(this.headerHeight+f)):this.$element.find("."+o+"-iframe").css("height",this.options.iframeHeight)),l==a?this.$element.addClass("isAttached"):this.$element.removeClass("isAttached"),!1===this.isFullscreen&&this.$element.width()>=r.width()?this.$element.find("."+o+"-button-fullscreen").hide():this.$element.find("."+o+"-button-fullscreen").show(),this.recalcButtons(),!1===this.isFullscreen&&(a=a-(i(this.options.top)||0)-(i(this.options.bottom)||0)),p>a?(this.options.top>0&&null===this.options.bottom&&c<r.height()&&this.$element.addClass("isAttachedBottom"),this.options.bottom>0&&null===this.options.top&&c<r.height()&&this.$element.addClass("isAttachedTop"),t("html").addClass(o+"-isAttached"),this.$element.css("height",a)):(this.$element.css("height",c+(this.headerHeight+f)),this.$element.removeClass("isAttachedTop isAttachedBottom"),t("html").removeClass(o+"-isAttached")),function(){c>h&&p>a?(e.$element.addClass("hasScroll"),e.$wrap.css("height",l-(e.headerHeight+f))):(e.$element.removeClass("hasScroll"),e.$wrap.css("height","auto"))}(),function(){h+d<c-30?e.$element.addClass("hasShadow"):e.$element.removeClass("hasShadow")}())},recalcButtons:function(){var t=this.$header.find("."+o+"-header-buttons").innerWidth()+10;!0===this.options.rtl?this.$header.css("padding-left",t):this.$header.css("padding-right",t)}},r.off("load."+o).on("load."+o,function(e){var n=document.location.hash;if(0===window.$iziModal.autoOpen&&!t("."+o).is(":visible"))try{var i=t(n).data();void 0!==i&&!1!==i.iziModal.options.autoOpen&&t(n).iziModal("open")}catch(t){}}),r.off("hashchange."+o).on("hashchange."+o,function(e){var n=document.location.hash,i=t(n).data();if(""!==n)try{void 0!==i&&"opening"!==t(n).iziModal("getState")&&setTimeout(function(){t(n).iziModal("open")},200)}catch(t){}else window.$iziModal.history&&t.each(t("."+o),function(e,n){if(void 0!==t(n).data().iziModal){var i=t(n).iziModal("getState");"opened"!=i&&"opening"!=i||t(n).iziModal("close")}})}),a.off("click","[data-"+o+"-open]").on("click","[data-"+o+"-open]",function(e){e.preventDefault();var n=t("."+o+":visible"),i=t(e.currentTarget).attr("data-"+o+"-open"),r=t(e.currentTarget).attr("data-"+o+"-transitionIn"),a=t(e.currentTarget).attr("data-"+o+"-transitionOut");void 0!==a?n.iziModal("close",{transition:a}):n.iziModal("close"),setTimeout(function(){void 0!==r?t(i).iziModal("open",{transition:r}):t(i).iziModal("open")},200)}),a.off("keyup."+o).on("keyup."+o,function(e){if(t("."+o+":visible").length){var n=t("."+o+":visible")[0].id,i=t("#"+n).iziModal("getGroup"),r=e||window.event,a=r.target||r.srcElement;void 0===n||void 0===i.name||r.ctrlKey||r.metaKey||r.altKey||"INPUT"===a.tagName.toUpperCase()||"TEXTAREA"==a.tagName.toUpperCase()||(37===r.keyCode?t("#"+n).iziModal("prev",r):39===r.keyCode&&t("#"+n).iziModal("next",r))}}),t.fn[o]=function(e,n){if(!t(this).length&&"object"==typeof e){var i={$el:document.createElement("div"),id:this.selector.split("#"),class:this.selector.split(".")};if(i.id.length>1){try{i.$el=document.createElement(id[0])}catch(t){}i.$el.id=this.selector.split("#")[1].trim()}else if(i.class.length>1){try{i.$el=document.createElement(i.class[0])}catch(t){}for(var r=1;r<i.class.length;r++)i.$el.classList.add(i.class[r].trim())}document.body.appendChild(i.$el),this.push(t(this.selector))}for(var a=this,s=0;s<a.length;s++){var l=t(a[s]),u=l.data(o),p=t.extend({},t.fn[o].defaults,l.data(),"object"==typeof e&&e);if(u||e&&"object"!=typeof e){if("string"==typeof e&&void 0!==u)return u[e].apply(u,[].concat(n))}else l.data(o,u=new c(l,p));p.autoOpen&&(isNaN(parseInt(p.autoOpen))?!0===p.autoOpen&&u.open():setTimeout(function(){u.open()},p.autoOpen),window.$iziModal.autoOpen++)}return this},t.fn[o].defaults={title:"",subtitle:"",headerColor:"#88A0B9",background:null,theme:"",icon:null,iconText:null,iconColor:"",rtl:!1,width:600,top:null,bottom:null,borderBottom:!0,padding:0,radius:3,zindex:999,iframe:!1,iframeHeight:400,iframeURL:null,focusInput:!0,group:"",loop:!1,navigateCaption:!0,navigateArrows:!0,history:!1,restoreDefaultContent:!1,autoOpen:0,bodyOverflow:!1,fullscreen:!1,openFullscreen:!1,closeOnEscape:!0,closeButton:!0,appendTo:"body",appendToOverlay:"body",overlay:!0,overlayClose:!0,overlayColor:"rgba(0, 0, 0, 0.4)",timeout:!1,timeoutProgressbar:!1,pauseOnHover:!1,timeoutProgressbarColor:"rgba(255,255,255,0.5)",transitionIn:"comingIn",transitionOut:"comingOut",transitionInOverlay:"fadeIn",transitionOutOverlay:"fadeOut",onFullscreen:function(){},onResize:function(){},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){},afterRender:function(){}},t.fn[o].Constructor=c,t.fn.iziModal}),function(t,e,n,i){var r,a,o,s,l,u,c,p,h,d,f,m,g="mPageScroll2id",v="mPS2id",y=".m_PageScroll2id,a[rel~='m_PageScroll2id'],.page-scroll-to-id,a[rel~='page-scroll-to-id'],._ps2id",_={scrollSpeed:1e3,autoScrollSpeed:!0,scrollEasing:"easeInOutQuint",scrollingEasing:"easeOutQuint",pageEndSmoothScroll:!0,layout:"vertical",offset:0,highlightSelector:!1,clickedClass:v+"-clicked",targetClass:v+"-target",highlightClass:v+"-highlight",forceSingleHighlight:!1,keepHighlightUntilNext:!1,highlightByNextTarget:!1,disablePluginBelow:!1,clickEvents:!0,appendHash:!1,onStart:function(){},onComplete:function(){},defaultSelector:!1,live:!0,liveSelector:!1},x=0,b={init:function(i){var i=t.extend(!0,{},_,i);if(t(n).data(v,i),a=t(n).data(v),!this.selector){var u="__"+v;this.each(function(){var e=t(this);e.hasClass(u)||e.addClass(u)}),this.selector="."+u}a.liveSelector&&(this.selector+=","+a.liveSelector),r=r?r+","+this.selector:this.selector,a.defaultSelector&&("object"==typeof t(r)&&0!==t(r).length||(r=y)),a.clickEvents&&t(n).undelegate("."+v).delegate(r,"click."+v,function(e){if(w._isDisabled.call(null))return void w._removeClasses.call(null);var n=t(this),i=n.attr("href"),r=n.prop("href");i&&-1!==i.indexOf("#/")||(w._reset.call(null),d=n.data("ps2id-offset")||0,w._isValid.call(null,i,r)&&w._findTarget.call(null,i)&&(e.preventDefault(),s="selector",l=n,w._setClasses.call(null,!0),w._scrollTo.call(null)))}),t(e).unbind("."+v).bind("scroll."+v+" resize."+v,function(){if(w._isDisabled.call(null))return void w._removeClasses.call(null);var e=t("._"+v+"-t");e.each(function(n){var i=t(this),r=i.attr("id"),a=w._findHighlight.call(null,r);w._setClasses.call(null,!1,i,a),n==e.length-1&&w._extendClasses.call(null)})}),o=!0,w._setup.call(null),w._live.call(null)},scrollTo:function(e,n){if(w._isDisabled.call(null))return void w._removeClasses.call(null);if(e&&void 0!==e){w._isInit.call(null);var i={layout:a.layout,offset:a.offset,clicked:!1},n=t.extend(!0,{},i,n);w._reset.call(null),p=n.layout,h=n.offset,e=-1!==e.indexOf("#")?e:"#"+e,w._isValid.call(null,e)&&w._findTarget.call(null,e)&&(s="scrollTo",l=n.clicked,l&&w._setClasses.call(null,!0),w._scrollTo.call(null))}},destroy:function(){t(e).unbind("."+v),t(n).undelegate("."+v).removeData(v),t("._"+v+"-t").removeData(v),w._removeClasses.call(null,!0)}},w={_isDisabled:function(){var t=e,i="inner",r=a.disablePluginBelow instanceof Array?[a.disablePluginBelow[0]||0,a.disablePluginBelow[1]||0]:[a.disablePluginBelow||0,0];return"innerWidth"in e||(i="client",t=n.documentElement||n.body),t[i+"Width"]<=r[0]||t[i+"Height"]<=r[1]},_isValid:function(t,n){if(t){n=n||t;var i=-1!==n.indexOf("#/")?n.split("#/")[0]:n.split("#")[0],r=e.location.toString().split("#")[0];return"#"!==t&&-1!==t.indexOf("#")&&(""===i||decodeURIComponent(i)===decodeURIComponent(r))}},_setup:function(){var e=w._highlightSelector(),n=1,i=0;return t(e).each(function(){var r=t(this),o=r.attr("href"),s=r.prop("href");if(w._isValid.call(null,o,s)){var l=-1!==o.indexOf("#/")?o.split("#/")[1]:o.split("#")[1],u=t("#"+l);if(u.length>0){a.highlightByNextTarget&&u!==i&&(i?i.data(v,{tn:u}):u.data(v,{tn:"0"}),i=u),u.hasClass("_"+v+"-t")||u.addClass("_"+v+"-t"),u.data(v,{i:n}),r.hasClass("_"+v+"-h")||r.addClass("_"+v+"-h");var c=w._findHighlight.call(null,l);w._setClasses.call(null,!1,u,c),x=n,n++,n==t(e).length&&w._extendClasses.call(null)}}})},_highlightSelector:function(){return a.highlightSelector&&""!==a.highlightSelector?a.highlightSelector:r},_findTarget:function(e){var n=-1!==e.indexOf("#/")?e.split("#/")[1]:e.split("#")[1],i=t("#"+n);if(i.length<1||"fixed"===i.css("position")){if("top"!==n)return;i=t("body")}return u=i,p||(p=a.layout),h=w._setOffset.call(null),c=[(i.offset().top-h[0]).toString(),(i.offset().left-h[1]).toString()],c[0]=c[0]<0?0:c[0],c[1]=c[1]<0?0:c[1],c},_setOffset:function(){h||(h=a.offset?a.offset:0),d&&(h=d);var e,n,i,r;switch(typeof h){case"object":case"string":e=[h.y?h.y:h,h.x?h.x:h],n=[e[0]instanceof jQuery?e[0]:t(e[0]),e[1]instanceof jQuery?e[1]:t(e[1])],n[0].length>0?(i=n[0].height(),"fixed"===n[0].css("position")&&(i+=n[0][0].offsetTop)):i=!isNaN(parseFloat(e[0]))&&isFinite(e[0])?parseInt(e[0]):0,n[1].length>0?(r=n[1].width(),"fixed"===n[1].css("position")&&(r+=n[1][0].offsetLeft)):r=!isNaN(parseFloat(e[1]))&&isFinite(e[1])?parseInt(e[1]):0;break;case"function":e=h.call(null),e instanceof Array?(i=e[0],r=e[1]):i=r=e;break;default:i=r=parseInt(h)}return[i,r]},_findHighlight:function(n){var i=e.location,r=i.toString().split("#")[0],a=i.pathname;return t("._"+v+"-h[href='#"+n+"'],._"+v+"-h[href='"+r+"#"+n+"'],._"+v+"-h[href='"+a+"#"+n+"'],._"+v+"-h[href='#/"+n+"'],._"+v+"-h[href='"+r+"#/"+n+"'],._"+v+"-h[href='"+a+"#/"+n+"']")},_setClasses:function(e,n,i){var r=a.clickedClass,o=a.targetClass,s=a.highlightClass;e&&r&&""!==r?(t("."+r).removeClass(r),l.addClass(r)):n&&o&&""!==o&&i&&s&&""!==s&&(w._currentTarget.call(null,n)?(n.addClass(o),i.addClass(s)):(!a.keepHighlightUntilNext||t("."+s).length>1)&&(n.removeClass(o),i.removeClass(s)))},_extendClasses:function(){var e=a.targetClass,n=a.highlightClass,i=t("."+e),r=t("."+n),o=e+"-first",s=e+"-last",l=n+"-first",u=n+"-last";t("._"+v+"-t").removeClass(o+" "+s),t("._"+v+"-h").removeClass(l+" "+u),a.forceSingleHighlight?a.keepHighlightUntilNext&&i.length>1?(i.slice(0,1).removeClass(e),r.slice(0,1).removeClass(n)):(i.slice(1).removeClass(e),r.slice(1).removeClass(n)):(i.slice(0,1).addClass(o).end().slice(-1).addClass(s),r.slice(0,1).addClass(l).end().slice(-1).addClass(u))},_removeClasses:function(e){t("."+a.clickedClass).removeClass(a.clickedClass),t("."+a.targetClass).removeClass(a.targetClass+" "+a.targetClass+"-first "+a.targetClass+"-last"),t("."+a.highlightClass).removeClass(a.highlightClass+" "+a.highlightClass+"-first "+a.highlightClass+"-last"),e&&(t("._"+v+"-t").removeClass("_"+v+"-t"),t("._"+v+"-h").removeClass("_"+v+"-h"))},_currentTarget:function(n){var i=a["target_"+n.data(v).i],r=n.data("ps2id-target"),o=r&&t(r)[0]?t(r)[0].getBoundingClientRect():n[0].getBoundingClientRect();if(void 0!==i){var s=n.offset().top,l=n.offset().left,u=i.from?i.from+s:s,c=i.to?i.to+s:s,p=i.fromX?i.fromX+l:l,h=i.toX?i.toX+l:l;return o.top>=c&&o.top<=u&&o.left>=h&&o.left<=p}var d=t(e).height(),f=t(e).width(),m=r?t(r).height():n.height(),g=r?t(r).width():n.width(),y=1+m/d,_=y,x=m<d?y*(d/m):y,b=1+g/f,w=b,E=g<f?b*(f/g):b,T=[o.top<=d/_,o.bottom>=d/x,o.left<=f/w,o.right>=f/E];if(a.highlightByNextTarget){var S=n.data(v).tn;if(S){var C=S[0].getBoundingClientRect();"vertical"===a.layout?T=[o.top<=d/2,C.top>d/2,1,1]:"horizontal"===a.layout&&(T=[1,1,o.left<=f/2,C.left>f/2])}}return T[0]&&T[1]&&T[2]&&T[3]},_scrollTo:function(){m=w._scrollSpeed.call(null),c=a.pageEndSmoothScroll?w._pageEndSmoothScroll.call(null):c;var n=t("html,body"),i=a.autoScrollSpeed?w._autoScrollSpeed.call(null):m,r=n.is(":animated")?a.scrollingEasing:a.scrollEasing,o=t(e).scrollTop(),s=t(e).scrollLeft();switch(p){case"horizontal":s!=c[1]&&(w._callbacks.call(null,"onStart"),n.stop().animate({scrollLeft:c[1]},i,r).promise().then(function(){w._callbacks.call(null,"onComplete")}));break;case"auto":if(o!=c[0]||s!=c[1])if(w._callbacks.call(null,"onStart"),navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){var l;n.stop().animate({pageYOffset:c[0],pageXOffset:c[1]},{duration:i,easing:r,step:function(t,n){"pageXOffset"==n.prop?l=t:"pageYOffset"==n.prop&&e.scrollTo(l,t)}}).promise().then(function(){w._callbacks.call(null,"onComplete")})}else n.stop().animate({scrollTop:c[0],scrollLeft:c[1]},i,r).promise().then(function(){w._callbacks.call(null,"onComplete")});break;default:o!=c[0]&&(w._callbacks.call(null,"onStart"),n.stop().animate({scrollTop:c[0]},i,r).promise().then(function(){w._callbacks.call(null,"onComplete")}))}},_pageEndSmoothScroll:function(){var i=t(n).height(),r=t(n).width(),a=t(e).height(),o=t(e).width();return[i-c[0]<a?i-a:c[0],r-c[1]<o?r-o:c[1]]},_scrollSpeed:function(){var e=a.scrollSpeed;return l&&l.length&&l.add(l.parent()).each(function(){var n=t(this);if(n.attr("class")){var i=n.attr("class").split(" ");for(var r in i)if(String(i[r]).match(/^ps2id-speed-\d+$/)){e=i[r].split("ps2id-speed-")[1];break}}}),parseInt(e)},_autoScrollSpeed:function(){var i=t(e).scrollTop(),r=t(e).scrollLeft(),a=t(n).height(),o=t(n).width(),s=[m+m*Math.floor(Math.abs(c[0]-i)/a*100)/100,m+m*Math.floor(Math.abs(c[1]-r)/o*100)/100];return Math.max.apply(Math,s)},_callbacks:function(t){if(a)switch(this[v]={trigger:s,clicked:l,target:u,scrollTo:{y:c[0],x:c[1]}},t){case"onStart":if(a.appendHash&&e.history&&e.history.pushState&&l&&l.length){var n="#"+l.attr("href").split("#")[1];n!==e.location.hash&&history.pushState("","",n)}a.onStart.call(null,this[v]);break;case"onComplete":a.onComplete.call(null,this[v])}},_reset:function(){p=h=d=!1},_isInit:function(){o||b.init.apply(this)},_live:function(){f=setTimeout(function(){a.live?t(w._highlightSelector()).length!==x&&w._setup.call(null):f&&clearTimeout(f),w._live.call(null)},1e3)},_easing:function(){function e(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375}t.easing.easeInQuad=t.easing.easeInQuad||function(t){return t*t},t.easing.easeOutQuad=t.easing.easeOutQuad||function(t){return 1-(1-t)*(1-t)},t.easing.easeInOutQuad=t.easing.easeInOutQuad||function(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2},t.easing.easeInCubic=t.easing.easeInCubic||function(t){return t*t*t},t.easing.easeOutCubic=t.easing.easeOutCubic||function(t){return 1-Math.pow(1-t,3)},t.easing.easeInOutCubic=t.easing.easeInOutCubic||function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2},t.easing.easeInQuart=t.easing.easeInQuart||function(t){return t*t*t*t},t.easing.easeOutQuart=t.easing.easeOutQuart||function(t){return 1-Math.pow(1-t,4)},t.easing.easeInOutQuart=t.easing.easeInOutQuart||function(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2},t.easing.easeInQuint=t.easing.easeInQuint||function(t){return t*t*t*t*t},t.easing.easeOutQuint=t.easing.easeOutQuint||function(t){return 1-Math.pow(1-t,5)},t.easing.easeInOutQuint=t.easing.easeInOutQuint||function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2},t.easing.easeInExpo=t.easing.easeInExpo||function(t){return 0===t?0:Math.pow(2,10*t-10)},t.easing.easeOutExpo=t.easing.easeOutExpo||function(t){return 1===t?1:1-Math.pow(2,-10*t)},t.easing.easeInOutExpo=t.easing.easeInOutExpo||function(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2},t.easing.easeInSine=t.easing.easeInSine||function(t){return 1-Math.cos(t*Math.PI/2)},t.easing.easeOutSine=t.easing.easeOutSine||function(t){return Math.sin(t*Math.PI/2)},t.easing.easeInOutSine=t.easing.easeInOutSine||function(t){return-(Math.cos(Math.PI*t)-1)/2},t.easing.easeInCirc=t.easing.easeInCirc||function(t){return 1-Math.sqrt(1-Math.pow(t,2))},t.easing.easeOutCirc=t.easing.easeOutCirc||function(t){return Math.sqrt(1-Math.pow(t-1,2))},t.easing.easeInOutCirc=t.easing.easeInOutCirc||function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2},t.easing.easeInElastic=t.easing.easeInElastic||function(t){return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*(2*Math.PI/3))},t.easing.easeOutElastic=t.easing.easeOutElastic||function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*(2*Math.PI/3))+1},t.easing.easeInOutElastic=t.easing.easeInOutElastic||function(t){return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*(2*Math.PI/4.5))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*(2*Math.PI/4.5))/2+1},t.easing.easeInBack=t.easing.easeInBack||function(t){return 2.70158*t*t*t-1.70158*t*t},t.easing.easeOutBack=t.easing.easeOutBack||function(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)},t.easing.easeInOutBack=t.easing.easeInOutBack||function(t){return t<.5?Math.pow(2*t,2)*(7.189819*t-2.5949095)/2:(Math.pow(2*t-2,2)*(3.5949095*(2*t-2)+2.5949095)+2)/2},t.easing.easeInBounce=t.easing.easeInBounce||function(t){return 1-e(1-t)},t.easing.easeOutBounce=t.easing.easeOutBounce||e,t.easing.easeInOutBounce=t.easing.easeInOutBounce||function(t){return t<.5?(1-e(1-2*t))/2:(1+e(2*t-1))/2}}};w._easing.call(),t.fn[g]=function(e){return b[e]?b[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):b.init.apply(this,arguments)},t[g]=function(e){return b[e]?b[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):b.init.apply(this,arguments)},t[g].defaults=_}(jQuery,window,document),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Rellax=e()}(this,function(){var t=function(e,n){var i=Object.create(t.prototype),r=0,a=0,o=0,s=0,l=[],u=!0,c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},p=window.transformProp||function(){var t=document.createElement("div");if(null===t.style.transform){var e,n=["Webkit","Moz","ms"];for(e in n)if(void 0!==t.style[n[e]+"Transform"])return n[e]+"Transform"}return"transform"}();i.options={speed:-2,center:!1,wrapper:null,round:!0,vertical:!0,horizontal:!1,callback:function(){}},n&&Object.keys(n).forEach(function(t){i.options[t]=n[t]}),e||(e=".rellax");var h="string"==typeof e?document.querySelectorAll(e):[e];if(!(0<h.length))throw Error("The elements you're trying to select don't exist.");if(i.elems=h,i.options.wrapper&&!i.options.wrapper.nodeType){if(!(h=document.querySelector(i.options.wrapper)))throw Error("The wrapper you're trying to use don't exist.");i.options.wrapper=h}var d=function(){for(var t=0;t<l.length;t++)i.elems[t].style.cssText=l[t].style;for(l=[],a=window.innerHeight,s=window.innerWidth,f(),t=0;t<i.elems.length;t++){var e=i.elems[t],n=e.getAttribute("data-rellax-percentage"),r=e.getAttribute("data-rellax-speed"),o=e.getAttribute("data-rellax-zindex")||0,c=i.options.wrapper?i.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,p=i.options.vertical&&(n||i.options.center)?c:0,h=i.options.horizontal&&(n||i.options.center)?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0;c=p+e.getBoundingClientRect().top;var g=e.clientHeight||e.offsetHeight||e.scrollHeight,y=h+e.getBoundingClientRect().left,_=e.clientWidth||e.offsetWidth||e.scrollWidth;p=n||(p-c+a)/(g+a),n=n||(h-y+s)/(_+s),i.options.center&&(p=n=.5),r=r||i.options.speed,n=m(n,p,r),e=e.style.cssText,p="",0<=e.indexOf("transform")&&(p=e.indexOf("transform"),p=e.slice(p),p=(h=p.indexOf(";"))?" "+p.slice(11,h).replace(/\s/g,""):" "+p.slice(11).replace(/\s/g,"")),l.push({baseX:n.x,baseY:n.y,top:c,left:y,height:g,width:_,speed:r,style:e,transform:p,zindex:o})}u&&(window.addEventListener("resize",d),u=!1),v()},f=function(){var t=r,e=o;return r=i.options.wrapper?i.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset,o=i.options.wrapper?i.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset,!!(t!=r&&i.options.vertical||e!=o&&i.options.horizontal)},m=function(t,e,n){var r={};return t=100*n*(1-t),e=100*n*(1-e),r.x=i.options.round?Math.round(t):Math.round(100*t)/100,r.y=i.options.round?Math.round(e):Math.round(100*e)/100,r},g=function(){f()&&!1===u&&v(),c(g)},v=function(){for(var t,e=0;e<i.elems.length;e++){t=m((o-l[e].left+s)/(l[e].width+s),(r-l[e].top+a)/(l[e].height+a),l[e].speed);var n=t.y-l[e].baseY,u=t.x-l[e].baseX;i.elems[e].style[p]="translate3d("+(i.options.horizontal?u:"0")+"px,"+(i.options.vertical?n:"0")+"px,"+l[e].zindex+"px) "+l[e].transform}i.options.callback(t)};return i.destroy=function(){for(var t=0;t<i.elems.length;t++)i.elems[t].style.cssText=l[t].style;u||(window.removeEventListener("resize",d),u=!0)},d(),g(),i.refresh=d,i};return t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.mapboxgl=e()}(this,function(){"use strict";function t(t,r){if(e)if(n){var a="var sharedChunk = {}; ("+e+")(sharedChunk); ("+n+")(sharedChunk);",o={};e(o),i=r(o),i.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else n=r;else e=r}var e,n,i;return t(["exports"],function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}function i(t,e){this.x=t,this.y=e}function r(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!r(t[i],e[i]))return!1;return!0}return t===e}function a(t,e,n,i){var r=new ei(t,e,n,i);return function(t){return r.solve(t)}}function o(t,e,n){return Math.min(n,Math.max(e,t))}function s(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var a=r[i];for(var o in a)t[o]=a[o]}return t}function l(){return ai++}function u(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function c(t,e){return-1!==t.indexOf(e,t.length-e.length)}function p(t,e,n){var i={};for(var r in t)i[r]=e.call(n||this,t[r],r,t);return i}function h(t,e,n){var i={};for(var r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function d(t){return Array.isArray(t)?t.map(d):"object"==typeof t&&t?p(t,d):t}function f(t){oi[t]||("undefined"!=typeof console&&console.warn(t),oi[t]=!0)}function m(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function g(t){for(var e=0,n=0,i=t.length,r=i-1,a=void 0,o=void 0;n<i;r=n++)a=t[n],e+=((o=t[r]).x-a.x)*(a.y+o.y);return e}function v(t){var e=new self.XMLHttpRequest;for(var n in e.open(t.method||"GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function y(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function _(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}function x(t){var e=t.key,n=t.value;return n?[new _i(e,n,"constants have been deprecated as of v8")]:[]}function b(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var a=r[i];for(var o in a)t[o]=a[o]}return t}function w(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function E(t){return Array.isArray(t)?t.map(E):w(t)}function T(t,e){return{kind:"array",itemType:t,N:e}}function S(t){if("array"===t.kind){var e=S(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}function C(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&!C(t.itemType,e.itemType)&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,i=Ii;n<i.length;n+=1)if(!C(i[n],e))return null}return"Expected "+S(t)+" but found "+S(e)+" instead."}function k(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,n,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function z(t){if(null===t)return wi;if("string"==typeof t)return Ti;if("boolean"==typeof t)return Si;if("number"==typeof t)return Ei;if(t instanceof Li)return Ci;if(t instanceof Di)return Ai;if(Array.isArray(t)){for(var e,n=t.length,i=0,r=t;i<r.length;i+=1){var a=z(r[i]);if(e){if(e===a)continue;e=zi;break}e=a}return T(e||zi,n)}return ki}function A(t){if(t instanceof Xi){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!A(t)&&(e=!1)}),e}function M(t){if(t instanceof Xi&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!M(t)&&(e=!1)}),e}function I(t,e){if(t instanceof Xi&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!I(t,e)&&(n=!1)}),n}function P(t,e){for(var n,i,r=0,a=t.length-1,o=0;r<=a;){if(n=t[o=Math.floor((r+a)/2)],i=t[o+1],e===n||e>n&&e<i)return o;if(n<e)r=o+1;else{if(!(n>e))throw new Vi("Input is not a number.");a=o-1}}return Math.max(o-1,0)}function L(t,e,n){return t*(1-n)+e*n}function D(t){return t>rr?Math.pow(t,1/3):t/ir+er}function O(t){return t>nr?t*t*t:ir*(t-er)}function B(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function R(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function F(t){var e=R(t.r),n=R(t.g),i=R(t.b),r=D((.4124564*e+.3575761*n+.1804375*i)/Ji),a=D((.2126729*e+.7151522*n+.072175*i)/Qi);return{l:116*a-16,a:500*(r-a),b:200*(a-D((.0193339*e+.119192*n+.9503041*i)/tr)),alpha:t.a}}function N(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=Qi*O(e),n=Ji*O(n),i=tr*O(i),new Li(B(3.2404542*n-1.5371385*e-.4985314*i),B(-.969266*n+1.8760108*e+.041556*i),B(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function V(t,e,n,i){var r=i-n,a=t-n;return 0===r?0:1===e?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}function j(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function U(t,e,n,i){return 0===i.compare(e,n)}function q(t,e,n){var i="=="!==t&&"!="!==t;return function(){function r(t,e,n){this.type=Si,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],a=e.parse(t[1],1,zi);if(!a)return null;if(!j(n,a.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+S(a.type)+"'.");var o=e.parse(t[2],2,zi);if(!o)return null;if(!j(n,o.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+S(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+S(a.type)+"' and '"+S(o.type)+"'.");i&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Ui(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Ui(a.type,[o])));var s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Ai)))return null}return new r(a,o,s)},r.prototype.evaluate=function(r){var a=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){var s=z(a),l=z(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new Vi('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var u=z(a),c=z(o);if("string"!==u.kind||"string"!==c.kind)return e(r,a,o)}return this.collator?n(r,a,o,this.collator.evaluate(r)):e(r,a,o)},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},r.prototype.possibleOutputs=function(){return[!0,!1]},r.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},r}()}function $(t,e){var n=e[0],i=e[1],r=e[2],a=e[3];n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);var o=a?a.evaluate(t):1,s=k(n,i,r,o);if(s)throw new Vi(s);return new Li(n/255*o,i/255*o,r/255*o,o)}function G(t,e){return t in e}function H(t,e){var n=e[t];return void 0===n?null:n}function X(t){return{type:t}}function W(t){return{result:"success",value:t}}function Z(t){return{result:"error",value:t}}function Y(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function K(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function J(t){return!!t.expression&&t.expression.interpolated}function Q(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function tt(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function et(t){return t}function nt(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function it(t,e,n,i,r){return nt(typeof n===r?i[n]:void 0,t.default,e.default)}function rt(t,e,n){if("number"!==Q(n))return nt(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var r=st(t.stops,n);return t.stops[r][1]}function at(t,e,n){var i=void 0!==t.base?t.base:1;if("number"!==Q(n))return nt(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var a=st(t.stops,n),o=function(t,e,n,i){var r=i-n,a=t-n;return 0===r?0:1===e?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],l=t.stops[a+1][1],u=Ki[e.type]||et;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=ur[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return u(n,i,o)}}:u(s,l,o)}function ot(t,e,n){return"color"===e.type?n=Li.parse(n):Q(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),nt(n,t.default,e.default)}function st(t,e){for(var n,i,r=0,a=t.length-1,o=0;r<=a;){if(n=t[o=Math.floor((r+a)/2)][0],i=t[o+1][0],e===n||e>n&&e<i)return o;n<e?r=o+1:n>e&&(a=o-1)}return Math.max(o-1,0)}function lt(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Er}function ut(t,e){var n=new Zi(Er,[],function(t){var e={color:Ci,string:Ti,number:Ei,enum:Ti,boolean:Si};return"array"===t.type?T(e[t.value]||zi,t.length):e[t.type]||null}(e)),i=n.parse(t);return i?W(new Tr(i,e)):Z(n.errors)}function ct(t,e){if("error"===(t=ut(t,e)).result)return t;var n=t.value.expression,i=A(n);if(!i&&!Y(e))return Z([new xi("","data expressions not supported")]);var r=I(n,["zoom"]);if(!r&&!K(e))return Z([new xi("","zoom expressions not supported")]);var a=function t(e){var n=null;if(e instanceof hr)n=t(e.result);else if(e instanceof pr)for(var i=0,r=e.args;i<r.length;i+=1){var a=r[i];if(n=t(a))break}else(e instanceof Yi||e instanceof cr)&&e.input instanceof Xi&&"zoom"===e.input.name&&(n=e);return n instanceof xi?n:(e.eachChild(function(e){var i=t(e);i instanceof xi?n=i:!n&&i?n=new xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new xi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return a||r?a instanceof xi?Z([a]):a instanceof cr&&!J(e)?Z([new xi("",'"interpolate" expressions cannot be used with this property')]):W(a?new Cr(i?"camera":"composite",t.value,a):new Sr(i?"constant":"source",t.value)):Z([new xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function pt(t,e){if(tt(t))return new kr(t,e);if(lt(t)){var n=ct(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=Li.parse(t)),{kind:"constant",evaluate:function(){return i}}}function ht(t){var e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=[],l=Q(n);if("object"!==l)return[new _i(e,n,"object expected, "+l+" found")];for(var u in n){var c=u.split(".")[0],p=i[c]||i["*"],h=void 0;if(r[c])h=r[c];else if(i[c])h=Dt;else if(r["*"])h=r["*"];else{if(!i["*"]){s.push(new _i(e,n[u],'unknown property "'+u+'"'));continue}h=Dt}s=s.concat(h({key:(e?e+".":e)+u,value:n[u],valueSpec:p,style:a,styleSpec:o,object:n,objectKey:u},n))}for(var d in i)r[d]||i[d].required&&void 0===i[d].default&&void 0===n[d]&&s.push(new _i(e,n,'missing required property "'+d+'"'));return s}function dt(t){var e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,a=t.key,o=t.arrayElementValidator||Dt;if("array"!==Q(e))return[new _i(a,e,"array expected, "+Q(e)+" found")];if(n.length&&e.length!==n.length)return[new _i(a,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new _i(a,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};r.$version<7&&(s.function=n.function),"object"===Q(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(o({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:i,styleSpec:r,key:a+"["+u+"]"}));return l}function ft(t){var e=t.key,n=t.value,i=t.valueSpec,r=Q(n);return"number"!==r?[new _i(e,n,"number expected, "+r+" found")]:"minimum"in i&&n<i.minimum?[new _i(e,n,n+" is less than the minimum value "+i.minimum)]:"maximum"in i&&n>i.maximum?[new _i(e,n,n+" is greater than the maximum value "+i.maximum)]:[]}function mt(t){function e(t){var e=[],i=t.value,s=t.key;if("array"!==Q(i))return[new _i(s,i,"array expected, "+Q(i)+" found")];if(2!==i.length)return[new _i(s,i,"array length 2 expected, length "+i.length+" found")];if(p){if("object"!==Q(i[0]))return[new _i(s,i,"object expected, "+Q(i[0])+" found")];if(void 0===i[0].zoom)return[new _i(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new _i(s,i,"object stop key must have value")];if(a&&a>w(i[0].zoom))return[new _i(s,i[0].zoom,"stop zoom values must appear in ascending order")];w(i[0].zoom)!==a&&(a=w(i[0].zoom),r=void 0,l={}),e=e.concat(ht({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:ft,value:n}}))}else e=e.concat(n({key:s+"[0]",value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return e.concat(Dt({key:s+"[1]",value:i[1],valueSpec:o,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=Q(t.value),a=w(t.value),u=null!==t.value?t.value:e;if(i){if(n!==i)return[new _i(t.key,u,n+" stop domain type must match previous stop domain type "+i)]}else i=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new _i(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==s){var c="number expected, "+n+" found";return Y(o)&&void 0===s&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _i(t.key,u,c)]}return"categorical"!==s||"number"!==n||isFinite(a)&&Math.floor(a)===a?"categorical"!==s&&"number"===n&&void 0!==r&&a<r?[new _i(t.key,u,"stop domain values must appear in ascending order")]:(r=a,"categorical"===s&&a in l?[new _i(t.key,u,"stop domain values must be unique")]:(l[a]=!0,[])):[new _i(t.key,u,"integer expected, found "+a)]}var i,r,a,o=t.valueSpec,s=w(t.value.type),l={},u="categorical"!==s&&void 0===t.value.property,c=!u,p="array"===Q(t.value.stops)&&"array"===Q(t.value.stops[0])&&"object"===Q(t.value.stops[0][0]),h=ht({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===s)return[new _i(t.key,t.value,'identity function may not have a "stops" property')];var n=[],i=t.value;return n=n.concat(dt({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===Q(i)&&0===i.length&&n.push(new _i(t.key,i,"array must have at least one stop")),n},default:function(t){return Dt({key:t.key,value:t.value,valueSpec:o,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===s&&u&&h.push(new _i(t.key,t.value,'missing required property "property"')),"identity"===s||t.value.stops||h.push(new _i(t.key,t.value,'missing required property "stops"')),"exponential"===s&&t.valueSpec.expression&&!J(t.valueSpec)&&h.push(new _i(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!Y(t.valueSpec)?h.push(new _i(t.key,t.value,"property functions not supported")):u&&!K(t.valueSpec)&&h.push(new _i(t.key,t.value,"zoom functions not supported"))),"categorical"!==s&&!p||void 0!==t.value.property||h.push(new _i(t.key,t.value,'"property" property is required')),h}function gt(t){var e=("property"===t.expressionContext?ct:ut)(E(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new _i(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new _i(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')]:"property"!==t.expressionContext||"layout"!==t.propertyType||M(e.value._styleExpression.expression)?[]:[new _i(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')]}function vt(t){var e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(w(n))&&r.push(new _i(e,n,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(i.values).indexOf(w(n))&&r.push(new _i(e,n,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(n)+" found")),r}function yt(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var i=n[e];if(!yt(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}function _t(t){if(null==t)return function(){return!0};yt(t)||(t=bt(t));var e=ut(t,zr);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function xt(t,e){return t<e?-1:t>e?1:0}function bt(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?wt(t[1],t[2],"=="):"!="===n?St(wt(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?wt(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(bt))):"all"===n?["all"].concat(t.slice(1).map(bt)):"none"===n?["all"].concat(t.slice(1).map(bt).map(St)):"in"===n?Et(t[1],t.slice(2)):"!in"===n?St(Et(t[1],t.slice(2))):"has"===n?Tt(t[1]):"!has"!==n||St(Tt(t[1]))}function wt(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Et(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(xt)]]:["filter-in-small",t,["literal",e]]}}function Tt(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function St(t){return["!",t]}function Ct(t){return yt(E(t.value))?gt(b({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,i=e.key;if("array"!==Q(n))return[new _i(i,n,"array expected, "+Q(n)+" found")];var r,a=e.styleSpec,o=[];if(n.length<1)return[new _i(i,n,"filter array must have at least 1 element")];switch(o=o.concat(vt({key:i+"[0]",value:n[0],valueSpec:a.filter_operator,style:e.style,styleSpec:e.styleSpec})),w(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===w(n[1])&&o.push(new _i(i,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&o.push(new _i(i,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(r=Q(n[1]))&&o.push(new _i(i+"[1]",n[1],"string expected, "+r+" found"));for(var s=2;s<n.length;s++)r=Q(n[s]),"$type"===w(n[1])?o=o.concat(vt({key:i+"["+s+"]",value:n[s],valueSpec:a.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new _i(i+"["+s+"]",n[s],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)o=o.concat(t({key:i+"["+l+"]",value:n[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Q(n[1]),2!==n.length?o.push(new _i(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==r&&o.push(new _i(i+"[1]",n[1],"string expected, "+r+" found"))}return o}(t)}function kt(t,e){var n=t.key,i=t.style,r=t.styleSpec,a=t.value,o=t.objectKey,s=r[e+"_"+t.layerType];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Dt({key:n,value:a,valueSpec:r.transition,style:i,styleSpec:r});var u,c=t.valueSpec||s[o];if(!c)return[new _i(n,a,'unknown property "'+o+'"')];if("string"===Q(a)&&Y(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new _i(n,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===o&&i&&!i.glyphs&&p.push(new _i(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&tt(E(a))&&"identity"===w(a.type)&&p.push(new _i(n,a,'"text-font" does not support identity functions'))),p.concat(Dt({key:t.key,value:a,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:o}))}function zt(t){return kt(t,"paint")}function At(t){return kt(t,"layout")}function Mt(t){var e=[],n=t.value,i=t.key,r=t.style,a=t.styleSpec;n.type||n.ref||e.push(new _i(i,n,'either "type" or "ref" is required'));var o,s=w(n.type),l=w(n.ref);if(n.id)for(var u=w(n.id),c=0;c<t.arrayIndex;c++){var p=r.layers[c];w(p.id)===u&&e.push(new _i(i,n.id,'duplicate layer id "'+n.id+'", previously used at line '+p.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new _i(i,n[t],'"'+t+'" is prohibited for ref layers'))}),r.layers.forEach(function(t){w(t.id)===l&&(o=t)}),o?o.ref?e.push(new _i(i,n.ref,"ref cannot reference another ref layer")):s=w(o.type):e.push(new _i(i,n.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(n.source){var h=r.sources&&r.sources[n.source],d=h&&w(h.type);h?"vector"===d&&"raster"===s?e.push(new _i(i,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===d&&"raster"!==s?e.push(new _i(i,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==s?e.push(new _i(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===d&&h.lineMetrics||e.push(new _i(i,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new _i(i,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new _i(i,n.source,'source "'+n.source+'" not found'))}else e.push(new _i(i,n,'missing required property "source"'));return e=e.concat(ht({key:i,value:n,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Dt({key:i+".type",value:n.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:Ct,layout:function(t){return ht({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return At(b({layerType:s},t))}}})},paint:function(t){return ht({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return zt(b({layerType:s},t))}}})}}}))}function It(t){var e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new _i(n,e,'"type" is required')];var a=w(e.type),o=[];switch(a){case"vector":case"raster":case"raster-dem":if(o=o.concat(ht({key:n,value:e,valueSpec:i["source_"+a.replace("-","_")],style:t.style,styleSpec:i})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&o.push(new _i(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":return ht({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i});case"video":return ht({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return ht({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return o.push(new _i(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),o;default:return vt({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function Pt(t){var e=t.value,n=t.styleSpec,i=n.light,r=t.style,a=[],o=Q(e);if(void 0===e)return a;if("object"!==o)return a=a.concat([new _i("light",e,"object expected, "+o+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);a=l&&i[l[1]]&&i[l[1]].transition?a.concat(Dt({key:s,value:e[s],valueSpec:n.transition,style:r,styleSpec:n})):i[s]?a.concat(Dt({key:s,value:e[s],valueSpec:i[s],style:r,styleSpec:n})):a.concat([new _i(s,e[s],'unknown property "'+s+'"')])}return a}function Lt(t){var e=t.value,n=t.key,i=Q(e);return"string"!==i?[new _i(n,e,"string expected, "+i+" found")]:[]}function Dt(t){var e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&tt(w(e))?mt(t):n.expression&&lt(E(e))?gt(t):n.type&&Ar[n.type]?Ar[n.type](t):ht(b({},t,{valueSpec:n.type?i[n.type]:n}))}function Ot(t){var e=t.value,n=t.key,i=Lt(t);return i.length?i:(-1===e.indexOf("{fontstack}")&&i.push(new _i(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new _i(n,e,'"glyphs" url must include a "{range}" token')),i)}function Bt(t,e){e=e||yi;var n=[];return n=n.concat(Dt({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ot,"*":function(){return[]}}})),t.constants&&(n=n.concat(x({key:"constants",value:t.constants,style:t,styleSpec:e}))),Rt(n)}function Rt(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Ft(t){return function(){return Rt(t.apply(this,arguments))}}function Nt(t,e){var n=!1;if(e&&e.length)for(var i=0,r=e;i<r.length;i+=1){var a=r[i];t.fire(new gi(new Error(a.message))),n=!0}return n}function Vt(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],e=r[1],n=r[2],this.d=e+2*n;for(var a=0;a<this.d*this.d;a++){var o=r[Or+a],s=r[Or+a+1];i.push(o===s?null:r.subarray(o,s))}var l=r[Or+i.length],u=r[Or+i.length+1];this.keys=r.subarray(l,u),this.bboxes=r.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var p=n/e*t;this.min=-p,this.max=t+p}function jt(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Rr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}function Ut(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Br)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],r=0,a=t;r<a.length;r+=1){var o=a[r];i.push(Ut(o,e))}return i}if("object"==typeof t){var s=t.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(Rr[l].omit.indexOf(c)>=0)){var p=t[c];u[c]=Rr[l].shallow.indexOf(c)>=0?p:Ut(p,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof t)}function qt(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof Br)return t;if(Array.isArray(t))return t.map(qt);if("object"==typeof t){var e=t.$name||"Object",n=Rr[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var i=Object.create(n.prototype),r=0,a=Object.keys(t);r<a.length;r+=1){var o=a[r];if("$name"!==o){var s=t[o];i[o]=Rr[e].shallow.indexOf(o)>=0?s:qt(s)}}return i}throw new Error("can't deserialize object of type "+typeof t)}function $t(t){for(var e=0,n=t;e<n.length;e+=1)if(Ht(n[e].charCodeAt(0)))return!0;return!1}function Gt(t){return!(jr.Arabic(t)||jr["Arabic Supplement"](t)||jr["Arabic Extended-A"](t)||jr["Arabic Presentation Forms-A"](t)||jr["Arabic Presentation Forms-B"](t))}function Ht(t){return!!(746===t||747===t||!(t<4352)&&(jr["Bopomofo Extended"](t)||jr.Bopomofo(t)||jr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||jr["CJK Compatibility Ideographs"](t)||jr["CJK Compatibility"](t)||jr["CJK Radicals Supplement"](t)||jr["CJK Strokes"](t)||!(!jr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||jr["CJK Unified Ideographs Extension A"](t)||jr["CJK Unified Ideographs"](t)||jr["Enclosed CJK Letters and Months"](t)||jr["Hangul Compatibility Jamo"](t)||jr["Hangul Jamo Extended-A"](t)||jr["Hangul Jamo Extended-B"](t)||jr["Hangul Jamo"](t)||jr["Hangul Syllables"](t)||jr.Hiragana(t)||jr["Ideographic Description Characters"](t)||jr.Kanbun(t)||jr["Kangxi Radicals"](t)||jr["Katakana Phonetic Extensions"](t)||jr.Katakana(t)&&12540!==t||!(!jr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!jr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||jr["Unified Canadian Aboriginal Syllabics"](t)||jr["Unified Canadian Aboriginal Syllabics Extended"](t)||jr["Vertical Forms"](t)||jr["Yijing Hexagram Symbols"](t)||jr["Yi Syllables"](t)||jr["Yi Radicals"](t)))}function Xt(t){return!(Ht(t)||function(t){return!!(jr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||jr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||jr["Letterlike Symbols"](t)||jr["Number Forms"](t)||jr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||jr["Control Pictures"](t)&&9251!==t||jr["Optical Character Recognition"](t)||jr["Enclosed Alphanumerics"](t)||jr["Geometric Shapes"](t)||jr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||jr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||jr["CJK Symbols and Punctuation"](t)||jr.Katakana(t)||jr["Private Use Area"](t)||jr["CJK Compatibility Forms"](t)||jr["Small Form Variants"](t)||jr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Wt(t,e){return!(!e&&(t>=1424&&t<=2303||jr["Arabic Presentation Forms-A"](t)||jr["Arabic Presentation Forms-B"](t))||t>=2304&&t<=3583||t>=3840&&t<=4255||jr.Khmer(t))}function Zt(t,e){void 0===e&&(e=1);var n=0,i=0;return{members:t.map(function(t){var r,a=(r=t.type,ua[r].BYTES_PER_ELEMENT),o=n=Yt(n,Math.max(e,a)),s=t.components||1;return i=Math.max(i,a),n+=a*s,{name:t.name,type:t.type,components:s,offset:o}}),size:Yt(n,Math.max(i,e)),alignment:e}}function Yt(t,e){return Math.ceil(t/e)*e}function Kt(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Jt(t){return[Wa(255*t.r,255*t.g),Wa(255*t.b,255*t.a)]}function Qt(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function te(t,e,n){var i={color:{source:Ia,composite:Pa},number:{source:Sa,composite:Ia}},r=function(t){return{"line-pattern":{source:ga,composite:ga},"fill-pattern":{source:ga,composite:ga},"fill-extrusion-pattern":{source:ga,composite:ga}}[t]}(t);return r&&r[n]||i[e][n]}function ee(t){for(var e=fo/t.extent,n=t.loadGeometry(),i=0;i<n.length;i++)for(var r=n[i],a=0;a<r.length;a++){var o=r[a];o.x=Math.round(o.x*e),o.y=Math.round(o.y*e),(o.x<mo.min||o.x>mo.max||o.y<mo.min||o.y>mo.max)&&f("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function ne(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}function ie(t,e,n){for(var i=0;i<t.length;i++){var r=t[i];if(he(r,e))return!0;if(ue(e,r,n))return!0}return!1}function re(t,e){if(1===t.length&&1===t[0].length)return pe(e,t[0][0]);for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)if(pe(t,i[r]))return!0;for(var a=0;a<t.length;a++){for(var o=t[a],s=0;s<o.length;s++)if(pe(e,o[s]))return!0;for(var l=0;l<e.length;l++)if(se(o,e[l]))return!0}return!1}function ae(t,e,n){for(var i=0;i<e.length;i++)for(var r=e[i],a=0;a<t.length;a++){var o=t[a];if(o.length>=3)for(var s=0;s<r.length;s++)if(he(o,r[s]))return!0;if(oe(o,r,n))return!0}return!1}function oe(t,e,n){if(t.length>1){if(se(t,e))return!0;for(var i=0;i<e.length;i++)if(ue(e[i],t,n))return!0}for(var r=0;r<t.length;r++)if(ue(t[r],e,n))return!0;return!1}function se(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],r=t[n+1],a=0;a<e.length-1;a++)if(le(i,r,e[a],e[a+1]))return!0;return!1}function le(t,e,n,i){return m(t,n,i)!==m(e,n,i)&&m(t,e,n)!==m(t,e,i)}function ue(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++)if(ce(t,e[r-1],e[r])<i)return!0;return!1}function ce(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return r<0?t.distSqr(e):r>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(r)._add(e))}function pe(t,e){for(var n,i,r,a=!1,o=0;o<t.length;o++)for(var s=0,l=(n=t[o]).length-1;s<n.length;l=s++)i=n[s],r=n[l],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(a=!a);return a}function he(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var a=t[i],o=t[r];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function de(t,e,n){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).binders[t].maxValue}function fe(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function me(t,e,n,i,r){if(!e[0]&&!e[1])return t;var a=ii.convert(e);"viewport"===n&&a._rotate(-i);for(var o=[],s=0;s<t.length;s++){for(var l=t[s],u=[],c=0;c<l.length;c++)u.push(l[c].sub(a._mult(r)));o.push(u)}return o}function ge(){var t=new yo(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ve(){var t=new yo(3);return t[0]=0,t[1]=0,t[2]=0,t}function ye(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function _e(t,e,n){var i=new yo(3);return i[0]=t,i[1]=e,i[2]=n,i}function xe(t,e){var n=e[0],i=e[1],r=e[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function be(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function we(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[0],s=n[1],l=n[2];return t[0]=r*l-a*s,t[1]=a*o-i*l,t[2]=i*s-r*o,t}function Ee(){var t=new yo(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Te(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=a*o),t}function Se(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,t}function Ce(){var t=new yo(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function ke(t,e,n){var i=Se([],[t.x,t.y,0,1],e);return new ii((i[0]/i[3]+1)*n.width*.5,(i[1]/i[3]+1)*n.height*.5)}function ze(t,e,n,i){var r=e.width,a=e.height;if(i){if(i.length!==r*a*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*a*n);return t.width=r,t.height=a,t.data=i,t}function Ae(t,e,n){var i=e.width,r=e.height;if(i!==t.width||r!==t.height){var a=ze({},{width:i,height:r},n);Me(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,r)},n),t.width=i,t.height=r,t.data=a.data}}function Me(t,e,n,i,r,a){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,l=0;l<r.height;l++)for(var u=((n.y+l)*t.width+n.x)*a,c=((i.y+l)*e.width+i.x)*a,p=0;p<r.width*a;p++)s[c+p]=o[u+p];return e}function Ie(t,e){for(var n=new Uint8Array(1024),i={},r=0,a=0;r<256;r++,a+=4){i[e]=r/255;var o=t.evaluate(i);n[a+0]=Math.floor(255*o.r/o.a),n[a+1]=Math.floor(255*o.g/o.a),n[a+2]=Math.floor(255*o.b/o.a),n[a+3]=Math.floor(255*o.a)}return new Co({width:256,height:1},n)}function Pe(t,e,n){n=n||2;var i,r,a,o,s,l,u,c=e&&e.length,p=c?e[0]*n:t.length,h=Le(t,0,p,n,!0),d=[];if(!h)return d;if(c&&(h=function(t,e,n,i){var r,a,o,s,l,u=[];for(r=0,a=e.length;r<a;r++)o=e[r]*i,s=r<a-1?e[r+1]*i:t.length,(l=Le(t,o,s,i,!1))===l.next&&(l.steiner=!0),u.push(qe(l));for(u.sort(Ve),r=0;r<u.length;r++)je(u[r],n),n=De(n,n.next);return n}(t,e,h,n)),t.length>80*n){i=a=t[0],r=o=t[1];for(var f=n;f<p;f+=n)(s=t[f])<i&&(i=s),(l=t[f+1])<r&&(r=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-i,o-r))?1/u:0}return Oe(h,d,n,i,r,u),d}function Le(t,e,n,i,r){var a,o;if(r===tn(t,e,n,i)>0)for(a=e;a<n;a+=i)o=Ke(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=Ke(a,t[a],t[a+1],o);return o&&Xe(o,o.next)&&(Je(o),o=o.next),o}function De(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Xe(i,i.next)&&0!==He(i.prev,i,i.next))i=i.next;else{if(Je(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Oe(t,e,n,i,r,a,o){if(t){!o&&a&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Ue(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,o,s,l,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1)}(r)}(t,i,r,a);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,a?Re(t,i,r,a):Be(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Je(t),t=l.next,u=l.next;else if((t=l)===u){o?1===o?Oe(t=Fe(t,e,n),e,n,i,r,a,2):2===o&&Ne(t,e,n,i,r,a):Oe(De(t),e,n,i,r,a,1);break}}}function Be(t){var e=t.prev,n=t,i=t.next;if(He(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if($e(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&He(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Re(t,e,n,i){var r=t.prev,a=t,o=t.next;if(He(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,p=Ue(s,l,e,n,i),h=Ue(u,c,e,n,i),d=t.prevZ,f=t.nextZ;d&&d.z>=p&&f&&f.z<=h;){if(d!==t.prev&&d!==t.next&&$e(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&He(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&$e(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&He(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=p;){if(d!==t.prev&&d!==t.next&&$e(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&He(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=h;){if(f!==t.prev&&f!==t.next&&$e(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&He(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Fe(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!Xe(r,a)&&We(r,i,i.next,a)&&Ze(r,a)&&Ze(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),Je(i),Je(i.next),i=t=a),i=i.next}while(i!==t);return i}function Ne(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ge(o,s)){var l=Ye(o,s);return o=De(o,o.next),l=De(l,l.next),Oe(o,e,n,i,r,a),void Oe(l,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}function Ve(t,e){return t.x-e.x}function je(t,e){if(e=function(t,e){var n,i=e,r=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;var l,u=n,c=n.x,p=n.y,h=1/0;for(i=n.next;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&$e(a<p?r:o,a,c,p,a<p?o:r,a,i.x,i.y)&&((l=Math.abs(a-i.y)/(r-i.x))<h||l===h&&i.x>n.x)&&Ze(i,t)&&(n=i,h=l),i=i.next;return n}(t,e)){var n=Ye(e,t);De(n,n.next)}}function Ue(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function qe(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function $e(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Ge(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&We(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Ze(t,e)&&Ze(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function He(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Xe(t,e){return t.x===e.x&&t.y===e.y}function We(t,e,n,i){return!!(Xe(t,e)&&Xe(n,i)||Xe(t,i)&&Xe(n,e))||He(t,e,n)>0!=He(t,e,i)>0&&He(n,i,t)>0!=He(n,i,e)>0}function Ze(t,e){return He(t.prev,t,t.next)<0?He(t,e,t.next)>=0&&He(t,t.prev,e)>=0:He(t,e,t.prev)<0||He(t,t.next,e)<0}function Ye(t,e){var n=new Qe(t.i,t.x,t.y),i=new Qe(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Ke(t,e,n,i){var r=new Qe(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Je(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Qe(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tn(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}function en(t,e,n,i,r){!function t(e,n,i,r,a){for(;r>i;){if(r-i>600){var o=r-i+1,s=n-i+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*u/o+c)),Math.min(r,Math.floor(n+(o-s)*u/o+c)),a)}var p=e[n],h=i,d=r;for(nn(e,i,n),a(e[r],p)>0&&nn(e,i,r);h<d;){for(nn(e,h,d),h++,d--;a(e[h],p)<0;)h++;for(;a(e[d],p)>0;)d--}0===a(e[i],p)?nn(e,i,d):nn(e,++d,r),d<=n&&(i=d+1),n<=d&&(r=d-1)}}(t,e,n||0,i||t.length-1,r||rn)}function nn(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function rn(t,e){return t<e?-1:t>e?1:0}function an(t,e){var n=t.length;if(n<=1)return[t];for(var i,r,a=[],o=0;o<n;o++){var s=g(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(i&&a.push(i),i=[t[o]]):i.push(t[o]))}if(i&&a.push(i),e>1)for(var l=0;l<a.length;l++)a[l].length<=e||(Oo(a[l],e,1,a[l].length-1,on),a[l]=a[l].slice(0,e));return a}function on(t,e){return e.area-t.area}function sn(t,e,n){for(var i=n.patternDependencies,r=!1,a=0,o=e;a<o.length;a+=1){var s=o[a].paint.get(t+"-pattern");s.isConstant()||(r=!0);var l=s.constantOr(null);l&&(r=!0,i[l.to]=!0,i[l.from]=!0)}return r}function ln(t,e,n,i,r){for(var a=r.patternDependencies,o=0,s=e;o<s.length;o+=1){var l=s[o],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:i-1},n,{}),p=u.evaluate({zoom:i},n,{}),h=u.evaluate({zoom:i+1},n,{});a[c]=!0,a[p]=!0,a[h]=!0,n.patterns[l.id]={min:c,mid:p,max:h}}}return n}function un(t,e,n,i,r,a,o,s){t.emplaceBack(e,n,2*Math.floor(i*Uo)+o,r*Uo*2,a*Uo*2,Math.round(s))}function cn(t,e){return t.x===e.x&&(t.x<0||t.x>fo)||t.y===e.y&&(t.y<0||t.y>fo)}function pn(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>fo})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>fo})}function hn(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(dn,this,e)}function dn(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function fn(t){for(var e,n,i=0,r=0,a=t.length,o=a-1;r<a;o=r++)e=t[r],i+=((n=t[o]).x-e.x)*(e.y+n.y);return i}function mn(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(gn,this,e),this.length=this._features.length}function gn(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function vn(t,e,n){if(3===t){var i=new Zo(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}function yn(t,e,n,i,r,a,o){t.emplaceBack(e.x,e.y,i?1:0,r?1:-1,Math.round(Jo*n.x)+128,Math.round(Jo*n.y)+128,1+(0===a?0:a<0?-1:1)|(o*ts&63)<<2,o*ts>>6)}function _n(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(es-1)}function xn(t,e){return e>0?e+2*t:t}function bn(t,e,n){var i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Hr.applyArabicShaping&&(t=Hr.applyArabicShaping(t)),t}function wn(t,e,n){return t instanceof Ri?(t.sections.forEach(function(t){t.text=bn(t.text,e,n)}),t):bn(t,e,n)}function En(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new Xr(t+1))};if("source"===n.kind)return{functionType:"source"};for(var i=n.zoomStops,r=0;r<i.length&&i[r]<=t;)r++;for(var a=r=Math.max(0,r-1);a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a);var o={min:i[r],max:i[a]};return"composite"===n.kind?{functionType:"composite",zoomRange:o,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new Xr(t+1)),zoomRange:o,sizeRange:{min:n.evaluate(new Xr(o.min)),max:n.evaluate(new Xr(o.max))},propertyValue:e.value}}function Tn(t,e,n,i,r,a,o,s){t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),a,o,s?s[0]:0,s?s[1]:0)}function Sn(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Cn(t){for(var e=0,n=0,i=0,r=t;i<r.length;i+=1){var a=r[i];e+=a.w*a.h,n=Math.max(n,a.w)}t.sort(function(t,e){return e.h-t.h});for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var p=c[u],h=o.length-1;h>=0;h--){var d=o[h];if(!(p.w>d.w||p.h>d.h)){if(p.x=d.x,p.y=d.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===d.w&&p.h===d.h){var f=o.pop();h<o.length&&(o[h]=f)}else p.h===d.h?(d.x+=p.w,d.w-=p.w):p.w===d.w?(d.y+=p.h,d.h-=p.h):(o.push({x:d.x+p.w,y:d.y,w:d.w-p.w,h:p.h}),d.y+=p.h,d.h-=p.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}function kn(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function zn(t){return t.type===kn.Bytes?t.readVarint()+t.pos:t.pos+1}function An(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Mn(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function In(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Pn(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Ln(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Dn(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function On(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Bn(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Rn(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Fn(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Nn(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Vn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function jn(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Un(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function qn(t,e,n){1===t&&n.readMessage($n,e)}function $n(t,e,n){if(3===t){var i=n.readMessage(Gn,{}),r=i.id,a=i.bitmap,o=i.width,s=i.height,l=i.left,u=i.top,c=i.advance;e.push({id:r,bitmap:new So({width:o+2*Fs,height:s+2*Fs},a),metrics:{width:o,height:s,left:l,top:u,advance:c}})}}function Gn(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Hn(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}function Xn(t,e,n,i){(t*=2)<0&&(t=-1*t-1);var r=1<<e;return 32*(r*r*t+r*i+n)+e}function Wn(t,e){return e-t}function Zn(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function Yn(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Kn(t,e,n,i,r,a){for(var o=null,s=Zn(e,n,r,a),l=0,u=i;l<u.length;l+=1){var c=u[l],p=Zn(e-c.x,n,r,a)+c.badness;p<=s&&(o=c,s=p)}return{index:t,x:e,priorBreak:o,badness:s}}function Jn(t,e,n,i){if(!n)return[];if(!t)return[];for(var r,a=[],o=function(t,e,n,i){for(var r=0,a=0;a<t.length();a++){var o=t.getSection(a),s=i[o.fontStack],l=s&&s[t.getCharCode(a)];l&&(r+=l.metrics.advance*o.scale+e)}return r/Math.max(1,Math.ceil(r/n))}(t,e,n,i),s=0,l=0;l<t.length();l++){var u=t.getSection(l),c=t.getCharCode(l),p=i[u.fontStack],h=p&&p[c];h&&!tl[c]&&(s+=h.metrics.advance*u.scale+e),l<t.length()-1&&(el[c]||!((r=c)<11904)&&(jr["Bopomofo Extended"](r)||jr.Bopomofo(r)||jr["CJK Compatibility Forms"](r)||jr["CJK Compatibility Ideographs"](r)||jr["CJK Compatibility"](r)||jr["CJK Radicals Supplement"](r)||jr["CJK Strokes"](r)||jr["CJK Symbols and Punctuation"](r)||jr["CJK Unified Ideographs Extension A"](r)||jr["CJK Unified Ideographs"](r)||jr["Enclosed CJK Letters and Months"](r)||jr["Halfwidth and Fullwidth Forms"](r)||jr.Hiragana(r)||jr["Ideographic Description Characters"](r)||jr["Kangxi Radicals"](r)||jr["Katakana Phonetic Extensions"](r)||jr.Katakana(r)||jr["Vertical Forms"](r)||jr["Yi Radicals"](r)||jr["Yi Syllables"](r)))&&a.push(Kn(l+1,s,o,a,Yn(c,t.getCharCode(l+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Kn(t.length(),s,o,a,0,!0))}function Qn(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function ti(t,e,n,i,r){if(r){var a=t[i],o=e[a.fontStack],s=o&&o[a.glyph];if(s)for(var l=s.metrics.advance*a.scale,u=(t[i].x+l)*r,c=n;c<=i;c++)t[c].x-=u}}var ei=n;n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var n,i,r,a,o;for(void 0===e&&(e=1e-6),r=t,o=0;o<8;o++){if(a=this.sampleCurveX(r)-t,Math.abs(a)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=a/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(a=this.sampleCurveX(r),Math.abs(a-t)<e)return r;t>a?n=r:i=r,r=.5*(i-n)+n}return r},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var ni=function(t,e,n){this.column=t,this.row=e,this.zoom=n};ni.prototype.clone=function(){return new ni(this.column,this.row,this.zoom)},ni.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},ni.prototype.sub=function(t){return this.clone()._sub(t)},ni.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},ni.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var ii=i;i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.x+n*(this.x-e.x)-i*(this.y-e.y),a=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=r,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t};var ri=a(.25,.1,.25,1),ai=1,oi={},si=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),li=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ui=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ci={now:si,frame:function(t){var e=li(t);return{cancel:function(){return ui(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var pi=self.document.createElement("img");pi.onload=function(){ci.supportsWebp=!0},pi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var hi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(hi);var di=function(t){function e(e,n,i){t.call(this,e),this.status=n,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),fi=function(t,e){var n=v(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var i=n.response;if(0===i.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));(n.status>=200&&n.status<300||0===n.status)&&n.response?e(null,{data:i,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new di(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},mi=function(t,e){void 0===e&&(e={}),s(this,e),this.type=t},gi=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",s({error:e},n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mi),vi=function(){};vi.prototype.on=function(t,e){return this._listeners=this._listeners||{},y(t,e,this._listeners),this},vi.prototype.off=function(t,e){return _(t,e,this._listeners),_(t,e,this._oneTimeListeners),this},vi.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},y(t,e,this._oneTimeListeners),this},vi.prototype.fire=function(t){"string"==typeof t&&(t=new mi(t,arguments[1]||{}));var e=t.type;if(this.listens(e)){t.target=this;for(var n=0,i=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var r=0,a=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];r<a.length;r+=1){var o=a[r];_(e,o,this._oneTimeListeners),o.call(this,t)}var l=this._eventedParent;l&&(s(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof gi&&console.error(t.error);return this},vi.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},vi.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var yi={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-z-order":{type:"enum",values:{"viewport-y":{},source:{}},default:"viewport-y",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},_i=function(t,e,n,i){this.message=(t?t+": ":"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)},xi=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),bi=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,i=e;n<i.length;n+=1){var r=i[n],a=r[0],o=r[1];this.bindings[a]=o}};bi.prototype.concat=function(t){return new bi(this,t)},bi.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},bi.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var wi={kind:"null"},Ei={kind:"number"},Ti={kind:"string"},Si={kind:"boolean"},Ci={kind:"color"},ki={kind:"object"},zi={kind:"value"},Ai={kind:"collator"},Mi={kind:"formatted"},Ii=[wi,Ei,Ti,Si,Ci,Mi,ki,T(zi)],Pi=e(function(t,e){function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function r(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return i("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function o(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in s)return s[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),p=i.substr(l+1,u-(l+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=a(p.pop());case"rgb":return 3!==p.length?null:[r(p[0]),r(p[1]),r(p[2]),h];case"hsla":if(4!==p.length)return null;h=a(p.pop());case"hsl":if(3!==p.length)return null;var d=(parseFloat(p[0])%360+360)%360/360,f=a(p[1]),m=a(p[2]),g=m<=.5?m*(f+1):m+f-m*f,v=2*m-g;return[n(255*o(v,g,d+1/3)),n(255*o(v,g,d)),n(255*o(v,g,d-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,Li=function(t,e,n,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i};Li.parse=function(t){if(t){if(t instanceof Li)return t;if("string"==typeof t){var e=Pi(t);if(e)return new Li(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Li.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],i=t[2],r=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(i)+","+r+")"},Li.prototype.toArray=function(){var t=this.r,e=this.g,n=this.b,i=this.a;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*n/i,i]},Li.black=new Li(0,0,0,1),Li.white=new Li(1,1,1,1),Li.transparent=new Li(0,0,0,0),Li.red=new Li(1,0,0,1);var Di=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Di.prototype.compare=function(t,e){return this.collator.compare(t,e)},Di.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Oi=function(t,e,n){this.type=Ai,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};Oi.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Si);if(!i)return null;var r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Si);if(!r)return null;var a=null;return n.locale&&!(a=e.parse(n.locale,1,Ti))?null:new Oi(i,r,a)},Oi.prototype.evaluate=function(t){return new Di(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Oi.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Oi.prototype.possibleOutputs=function(){return[void 0]},Oi.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Bi=function(t,e,n){this.text=t,this.scale=e,this.fontStack=n},Ri=function(t){this.sections=t};Ri.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},Ri.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t.push(i.text);var r=i.fontStack?["literal",i.fontStack.split(",")]:null;t.push({"text-font":r,"font-scale":i.scale})}return t};var Fi=function(t){this.type=Mi,this.sections=t};Fi.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var n=[],i=1;i<t.length-1;i+=2){var r=e.parse(t[i],1,zi);if(!r)return null;var a=r.type.kind;if("string"!==a&&"value"!==a&&"null"!==a)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var o=t[i+1];if("object"!=typeof o||Array.isArray(o))return e.error("Format options argument must be an object.");var s=null;if(o["font-scale"]&&!(s=e.parse(o["font-scale"],1,Ei)))return null;var l=null;if(o["text-font"]&&!(l=e.parse(o["text-font"],1,T(Ti))))return null;n.push({text:r,scale:s,font:l})}return new Fi(n)},Fi.prototype.evaluate=function(t){return new Ri(this.sections.map(function(e){return new Bi(e.text.evaluate(t)||"",e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},Fi.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t(i.text),i.scale&&t(i.scale),i.font&&t(i.font)}},Fi.prototype.possibleOutputs=function(){return[void 0]},Fi.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t.push(i.text.serialize());var r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),t.push(r)}return t};var Ni=function(t,e){this.type=t,this.value=e};Ni.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Li)return!0;if(e instanceof Di)return!0;if(Array.isArray(e)){for(var n=0,i=e;n<i.length;n+=1)if(!t(i[n]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!t(e[r]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],i=z(n),r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new Ni(i,n)},Ni.prototype.evaluate=function(){return this.value},Ni.prototype.eachChild=function(){},Ni.prototype.possibleOutputs=function(){return[this.value]},Ni.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Li?["rgba"].concat(this.value.toArray()):this.value instanceof Ri?this.value.serialize():this.value};var Vi=function(t){this.name="ExpressionEvaluationError",this.message=t};Vi.prototype.toJSON=function(){return this.message};var ji={string:Ti,number:Ei,boolean:Si,object:ki},Ui=function(t,e){this.type=t,this.args=e};Ui.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,i=1,r=t[0];if("array"===r){var a,o;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in ji)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=ji[s],i++}else a=zi;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],i++}n=T(a,o)}else n=ji[r];for(var l=[];i<t.length;i++){var u=e.parse(t[i],i,zi);if(!u)return null;l.push(u)}return new Ui(n,l)},Ui.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!C(this.type,z(n)))return n;if(e===this.args.length-1)throw new Vi("Expected value to be of type "+S(this.type)+", but found "+S(z(n))+" instead.")}return null},Ui.prototype.eachChild=function(t){this.args.forEach(t)},Ui.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Ui.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var qi={"to-number":Ei,"to-color":Ci},$i=function(t,e){this.type=t,this.args=e};$i.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],i=qi[n],r=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,zi);if(!o)return null;r.push(o)}return new $i(i,r)},$i.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,n,i=0,r=this.args;i<r.length;i+=1)if(n=null,"string"==typeof(e=r[i].evaluate(t))){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":k(e[0],e[1],e[2],e[3])))return new Li(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new Vi(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}if("formatted"===this.type.kind){for(var o,s=0,l=this.args;s<l.length;s+=1)if("string"==typeof(o=l[s].evaluate(t)))return new Ri([new Bi(o,null,null)]);throw new Vi("Could not parse formatted text from value '"+("string"==typeof o?o:JSON.stringify(o))+"'")}for(var u=null,c=0,p=this.args;c<p.length;c+=1)if(null!==(u=p[c].evaluate(t))){var h=Number(u);if(!isNaN(h))return h}throw new Vi("Could not convert "+JSON.stringify(u)+" to number.")},$i.prototype.eachChild=function(t){this.args.forEach(t)},$i.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},$i.prototype.serialize=function(){var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Gi=["Unknown","Point","LineString","Polygon"],Hi=function(){this._parseColorCache={}};Hi.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Hi.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Gi[this.feature.type]:this.feature.type:null},Hi.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Hi.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Li.parse(t)),e};var Xi=function(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i};Xi.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Xi.prototype.eachChild=function(t){this.args.forEach(t)},Xi.prototype.possibleOutputs=function(){return[void 0]},Xi.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Xi.parse=function(t,e){var n=t[0],i=Xi.definitions[n];if(!i)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var r=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),s=null,l=0,u=o;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];s=new Zi(e.registry,e.path,null,e.scope);for(var d=[],f=!1,m=1;m<t.length;m++){var g=t[m],v=Array.isArray(p)?p[m-1]:p.type,y=s.parse(g,1+d.length,v);if(!y){f=!0;break}d.push(y)}if(!f)if(Array.isArray(p)&&p.length!==d.length)s.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var _=0;_<d.length;_++){var x=Array.isArray(p)?p[_]:p.type,b=d[_];s.concat(_+1).checkSubtype(x,b.type)}if(0===s.errors.length)return new Xi(n,r,h,d)}}if(1===o.length)e.errors.push.apply(e.errors,s.errors);else{for(var w=(o.length?o:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(S).join(", ")+")":"("+S(e.type)+"...)"}).join(" | "),E=[],T=1;T<t.length;T++){var C=e.parse(t[T],1+E.length);if(!C)return null;E.push(S(C.type))}e.error("Expected arguments of type "+w+", but found ("+E.join(", ")+") instead.")}return null},Xi.register=function(t,e){for(var n in Xi.definitions=e,e)t[n]=Xi};var Wi=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Wi.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Wi(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Wi.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Wi.prototype.eachChild=function(){},Wi.prototype.possibleOutputs=function(){return[void 0]},Wi.prototype.serialize=function(){return["var",this.name]};var Zi=function(t,e,n,i,r){void 0===e&&(e=[]),void 0===i&&(i=new bi),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=i,this.errors=r,this.expectedType=n};Zi.prototype.parse=function(t,e,n,i,r){return void 0===r&&(r={}),e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)},Zi.prototype._parse=function(t,e){if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var r=i.parse(t,this);if(!r)return null;if(this.expectedType){var a=this.expectedType,o=r.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==o.kind)if("color"!==a.kind||"value"!==o.kind&&"string"!==o.kind)if("formatted"!==a.kind||"value"!==o.kind&&"string"!==o.kind){if(this.checkSubtype(this.expectedType,r.type))return null}else e.omitTypeAnnotations||(r=new $i(a,[r]));else e.omitTypeAnnotations||(r=new $i(a,[r]));else e.omitTypeAnnotations||(r=new Ui(a,[r]))}if(!(r instanceof Ni)&&function t(e){if(e instanceof Wi)return t(e.boundExpression);if(e instanceof Xi&&"error"===e.name)return!1;if(e instanceof Oi)return!1;var n=e instanceof $i||e instanceof Ui,i=!0;return e.eachChild(function(e){i=n?i&&t(e):i&&e instanceof Ni}),!!i&&(A(e)&&I(e,["zoom","heatmap-density","line-progress","is-supported-script"]))}(r)){var s=new Hi;try{r=new Ni(r.type,r.evaluate(s))}catch(t){return this.error(t.message),null}}return r}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},Zi.prototype.concat=function(t,e,n){var i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new Zi(this.registry,i,e||null,r,this.errors)},Zi.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new xi(i,t))},Zi.prototype.checkSubtype=function(t,e){var n=C(t,e);return n&&this.error(n),n};var Yi=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,r=n;i<r.length;i+=1){var a=r[i],o=a[0],s=a[1];this.labels.push(o),this.outputs.push(s)}};Yi.parse=function(t,e){var n=t[1],i=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,Ei)))return null;var r=[],a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType),i.unshift(-1/0);for(var o=0;o<i.length;o+=2){var s=i[o],l=i[o+1],u=o+1,c=o+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=e.parse(l,c,a);if(!p)return null;a=a||p.type,r.push([s,p])}return new Yi(a,n,r)},Yi.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[P(e,i)].evaluate(t)},Yi.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Yi.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Yi.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ki=Object.freeze({number:L,color:function(t,e,n){return new Li(L(t.r,e.r,n),L(t.g,e.g,n),L(t.b,e.b,n),L(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,i){return L(t,e[i],n)})}}),Ji=.95047,Qi=1,tr=1.08883,er=4/29,nr=6/29,ir=3*nr*nr,rr=nr*nr*nr,ar=Math.PI/180,or=180/Math.PI,sr={forward:F,reverse:N,interpolate:function(t,e,n){return{l:L(t.l,e.l,n),a:L(t.a,e.a,n),b:L(t.b,e.b,n),alpha:L(t.alpha,e.alpha,n)}}},lr={forward:function(t){var e=F(t),n=e.l,i=e.a,r=e.b,a=Math.atan2(r,i)*or;return{h:a<0?a+360:a,c:Math.sqrt(i*i+r*r),l:n,alpha:t.a}},reverse:function(t){var e=t.h*ar,n=t.c;return N({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e,n){var i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}(t.h,e.h,n),c:L(t.c,e.c,n),l:L(t.l,e.l,n),alpha:L(t.alpha,e.alpha,n)}}},ur=Object.freeze({lab:sr,hcl:lr}),cr=function(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(var a=0,o=r;a<o.length;a+=1){var s=o[a],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};cr.interpolationFactor=function(t,e,n,i){var r=0;if("exponential"===t.name)r=V(e,t.base,n,i);else if("linear"===t.name)r=V(e,1,n,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;r=new ei(a[0],a[1],a[2],a[3]).solve(V(e,1,n,i))}return r},cr.parse=function(t,e){var n=t[0],i=t[1],r=t[2],a=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var o=i[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:o}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,Ei)))return null;var l=[],u=null;"interpolate-hcl"===n||"interpolate-lab"===n?u=Ci:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<a.length;c+=2){var p=a[c],h=a[c+1],d=c+3,f=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=e.parse(h,f,u);if(!m)return null;u=u||m.type,l.push([p,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new cr(u,n,i,r,l):e.error("Type "+S(u)+" is not interpolatable.")},cr.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);var a=P(e,i),o=e[a],s=e[a+1],l=cr.interpolationFactor(this.interpolation,i,o,s),u=n[a].evaluate(t),c=n[a+1].evaluate(t);return"interpolate"===this.operator?Ki[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?lr.reverse(lr.interpolate(lr.forward(u),lr.forward(c),l)):sr.reverse(sr.interpolate(sr.forward(u),sr.forward(c),l))},cr.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},cr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},cr.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var pr=function(t,e){this.type=t,this.args=e};pr.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,i=e.expectedType;i&&"value"!==i.kind&&(n=i);for(var r=[],a=0,o=t.slice(1);a<o.length;a+=1){var s=o[a],l=e.parse(s,1+r.length,n,void 0,{omitTypeAnnotations:!0});if(!l)return null;n=n||l.type,r.push(l)}var u=i&&r.some(function(t){return C(i,t.type)});return new pr(u?zi:n,r)},pr.prototype.evaluate=function(t){for(var e=null,n=0,i=this.args;n<i.length&&null===(e=i[n].evaluate(t));n+=1);return e},pr.prototype.eachChild=function(t){this.args.forEach(t)},pr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},pr.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var hr=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};hr.prototype.evaluate=function(t){return this.result.evaluate(t)},hr.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},hr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],i=1;i<t.length-1;i+=2){var r=t[i];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=e.parse(t[i+1],i+1);if(!a)return null;n.push([r,a])}var o=e.parse(t[t.length-1],t.length-1,void 0,n);return o?new hr(n,o):null},hr.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},hr.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var i=n[e],r=i[0],a=i[1];t.push(r,a.serialize())}return t.push(this.result.serialize()),t};var dr=function(t,e,n){this.type=t,this.index=e,this.input=n};dr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Ei),i=e.parse(t[2],2,T(e.expectedType||zi));if(!n||!i)return null;var r=i.type;return new dr(r.itemType,n,i)},dr.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Vi("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new Vi("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new Vi("Array index must be an integer, but found "+e+" instead.");return n[e]},dr.prototype.eachChild=function(t){t(this.index),t(this.input)},dr.prototype.possibleOutputs=function(){return[void 0]},dr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fr=function(t,e,n,i,r,a){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=a};fr.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],l=t[o+1];Array.isArray(s)||(s=[s]);var u=e.concat(o);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,z(h)))return null}else n=z(h);if(void 0!==r[String(h)])return u.error("Branch labels must be unique.");r[String(h)]=a.length}var d=e.parse(l,o,i);if(!d)return null;i=i||d.type,a.push(d)}var f=e.parse(t[1],1,zi);if(!f)return null;var m=e.parse(t[t.length-1],t.length-1,i);return m?"value"!==f.type.kind&&e.concat(1).checkSubtype(n,f.type)?null:new fr(n,i,f,r,a,m):null},fr.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(z(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},fr.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},fr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},fr.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],i={},r=0,a=Object.keys(this.cases).sort();r<a.length;r+=1){var o=a[r],s=i[t.cases[o]];void 0===s?(i[t.cases[o]]=n.length,n.push([t.cases[o],[o]])):n[s][1].push(o)}for(var l=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,c=n;u<c.length;u+=1){var p=c[u],h=p[0],d=p[1];1===d.length?e.push(l(d[0])):e.push(d.map(l)),e.push(t.outputs[h].serialize())}return e.push(this.otherwise.serialize()),e};var mr=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};mr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i=[],r=1;r<t.length-1;r+=2){var a=e.parse(t[r],r,Si);if(!a)return null;var o=e.parse(t[r+1],r+1,n);if(!o)return null;i.push([a,o]),n=n||o.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new mr(n,i,s):null},mr.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[0],a=i[1];if(r.evaluate(t))return a.evaluate(t)}return this.otherwise.evaluate(t)},mr.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[0],a=i[1];t(r),t(a)}t(this.otherwise)},mr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},mr.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var gr=q("==",function(t,e,n){return e===n},U),vr=q("!=",function(t,e,n){return e!==n},function(t,e,n,i){return!U(0,e,n,i)}),yr=q("<",function(t,e,n){return e<n},function(t,e,n,i){return i.compare(e,n)<0}),_r=q(">",function(t,e,n){return e>n},function(t,e,n,i){return i.compare(e,n)>0}),xr=q("<=",function(t,e,n){return e<=n},function(t,e,n,i){return i.compare(e,n)<=0}),br=q(">=",function(t,e,n){return e>=n},function(t,e,n,i){return i.compare(e,n)>=0}),wr=function(t){this.type=Ei,this.input=t};wr.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+S(n.type)+" instead."):new wr(n):null},wr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Vi("Expected value to be of type string or array, but found "+S(z(e))+" instead.")},wr.prototype.eachChild=function(t){t(this.input)},wr.prototype.possibleOutputs=function(){return[void 0]},wr.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Er={"==":gr,"!=":vr,">":_r,"<":yr,">=":br,"<=":xr,array:Ui,at:dr,boolean:Ui,case:mr,coalesce:pr,collator:Oi,format:Fi,interpolate:cr,"interpolate-hcl":cr,"interpolate-lab":cr,length:wr,let:hr,literal:Ni,match:fr,number:Ui,object:Ui,step:Yi,string:Ui,"to-color":$i,"to-number":$i,var:Wi};Xi.register(Er,{error:[{kind:"error"},[Ti],function(t,e){var n=e[0];throw new Vi(n.evaluate(t))}],typeof:[Ti,[zi],function(t,e){return S(z(e[0].evaluate(t)))}],"to-string":[Ti,[zi],function(t,e){var n=e[0],i=typeof(n=n.evaluate(t));return null===n?"":"string"===i||"number"===i||"boolean"===i?String(n):n instanceof Li||n instanceof Ri?n.toString():JSON.stringify(n)}],"to-boolean":[Si,[zi],function(t,e){var n=e[0];return Boolean(n.evaluate(t))}],"to-rgba":[T(Ei,4),[Ci],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ci,[Ei,Ei,Ei],$],rgba:[Ci,[Ei,Ei,Ei,Ei],$],has:{type:Si,overloads:[[[Ti],function(t,e){return G(e[0].evaluate(t),t.properties())}],[[Ti,ki],function(t,e){var n=e[0],i=e[1];return G(n.evaluate(t),i.evaluate(t))}]]},get:{type:zi,overloads:[[[Ti],function(t,e){return H(e[0].evaluate(t),t.properties())}],[[Ti,ki],function(t,e){var n=e[0],i=e[1];return H(n.evaluate(t),i.evaluate(t))}]]},"feature-state":[zi,[Ti],function(t,e){return H(e[0].evaluate(t),t.featureState||{})}],properties:[ki,[],function(t){return t.properties()}],"geometry-type":[Ti,[],function(t){return t.geometryType()}],id:[zi,[],function(t){return t.id()}],zoom:[Ei,[],function(t){return t.globals.zoom}],"heatmap-density":[Ei,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ei,[],function(t){return t.globals.lineProgress||0}],"+":[Ei,X(Ei),function(t,e){for(var n=0,i=0,r=e;i<r.length;i+=1)n+=r[i].evaluate(t);return n}],"*":[Ei,X(Ei),function(t,e){for(var n=1,i=0,r=e;i<r.length;i+=1)n*=r[i].evaluate(t);return n}],"-":{type:Ei,overloads:[[[Ei,Ei],function(t,e){var n=e[0],i=e[1];return n.evaluate(t)-i.evaluate(t)}],[[Ei],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ei,[Ei,Ei],function(t,e){var n=e[0],i=e[1];return n.evaluate(t)/i.evaluate(t)}],"%":[Ei,[Ei,Ei],function(t,e){var n=e[0],i=e[1];return n.evaluate(t)%i.evaluate(t)}],ln2:[Ei,[],function(){return Math.LN2}],pi:[Ei,[],function(){return Math.PI}],e:[Ei,[],function(){return Math.E}],"^":[Ei,[Ei,Ei],function(t,e){var n=e[0],i=e[1];return Math.pow(n.evaluate(t),i.evaluate(t))}],sqrt:[Ei,[Ei],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[Ei,[Ei],function(t,e){var n=e[0];return Math.log10(n.evaluate(t))}],ln:[Ei,[Ei],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[Ei,[Ei],function(t,e){var n=e[0];return Math.log2(n.evaluate(t))}],sin:[Ei,[Ei],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[Ei,[Ei],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[Ei,[Ei],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[Ei,[Ei],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[Ei,[Ei],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[Ei,[Ei],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[Ei,X(Ei),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[Ei,X(Ei),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[Ei,[Ei],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[Ei,[Ei],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ei,[Ei],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[Ei,[Ei],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[Si,[Ti,zi],function(t,e){var n=e[0],i=e[1];return t.properties()[n.value]===i.value}],"filter-id-==":[Si,[zi],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Si,[Ti],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Si,[Ti,zi],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],a=i.value;return typeof r==typeof a&&r<a}],"filter-id-<":[Si,[zi],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[Si,[Ti,zi],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],a=i.value;return typeof r==typeof a&&r>a}],"filter-id->":[Si,[zi],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[Si,[Ti,zi],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],a=i.value;return typeof r==typeof a&&r<=a}],"filter-id-<=":[Si,[zi],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[Si,[Ti,zi],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],a=i.value;return typeof r==typeof a&&r>=a}],"filter-id->=":[Si,[zi],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[Si,[zi],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Si,[],function(t){return null!==t.id()}],"filter-type-in":[Si,[T(Ti)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Si,[T(zi)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Si,[Ti,T(zi)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Si,[Ti,T(zi)],function(t,e){var n=e[0],i=e[1];return function(t,e,n,i){for(;n<=i;){var r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:Si,overloads:[[[Si,Si],function(t,e){var n=e[0],i=e[1];return n.evaluate(t)&&i.evaluate(t)}],[X(Si),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(!i[n].evaluate(t))return!1;return!0}]]},any:{type:Si,overloads:[[[Si,Si],function(t,e){var n=e[0],i=e[1];return n.evaluate(t)||i.evaluate(t)}],[X(Si),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(i[n].evaluate(t))return!0;return!1}]]},"!":[Si,[Si],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Si,[Ti],function(t,e){var n=e[0],i=t.globals&&t.globals.isSupportedScript;return!i||i(n.evaluate(t))}],upcase:[Ti,[Ti],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ti,[Ti],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ti,X(Ti),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}],"resolved-locale":[Ti,[Ai],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Tr=function(t,e){var n;this.expression=t,this._warningHistory={},this._defaultValue="color"===(n=e).type&&tt(n.default)?new Li(0,0,0,0):"color"===n.type?Li.parse(n.default)||null:void 0===n.default?null:n.default,"enum"===e.type&&(this._enumValues=e.values)};Tr.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator||(this._evaluator=new Hi),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},Tr.prototype.evaluate=function(t,e,n){this._evaluator||(this._evaluator=new Hi),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n;try{var i=this.expression.evaluate(this._evaluator);if(null==i)return this._defaultValue;if(this._enumValues&&!(i in this._enumValues))throw new Vi("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(i)+" instead.");return i}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Sr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!M(e.expression)};Sr.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},Sr.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var Cr=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!M(e.expression),n instanceof cr&&(this._interpolationType=n.interpolation)};Cr.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},Cr.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},Cr.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?cr.interpolationFactor(this._interpolationType,t,e,n):0};var kr=function(t,e){this._parameters=t,this._specification=e,b(this,function t(e,n){var i,r,a,o="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||void 0!==e.property,u=s||!l,c=e.type||(J(n)?"exponential":"interval");if(o&&((e=b({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Li.parse(t[1])]})),e.default?e.default=Li.parse(e.default):e.default=Li.parse(n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!ur[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)i=at;else if("interval"===c)i=rt;else if("categorical"===c){i=it,r=Object.create(null);for(var p=0,h=e.stops;p<h.length;p+=1){var d=h[p];r[d[0]]=d[1]}a=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');i=ot}if(s){for(var f={},m=[],g=0;g<e.stops.length;g++){var v=e.stops[g],y=v[0].zoom;void 0===f[y]&&(f[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},m.push(y)),f[y].stops.push([v[0].value,v[1]])}for(var _=[],x=0,w=m;x<w.length;x+=1){var E=w[x];_.push([f[E].zoom,t(f[E],n)])}return{kind:"composite",interpolationFactor:cr.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(t){return t[0]}),evaluate:function(t,i){var r=t.zoom;return at({stops:_,base:e.base},n,r).evaluate(r,i)}}}return u?{kind:"camera",interpolationFactor:"exponential"===c?cr.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var o=t.zoom;return i(e,n,o,r,a)}}:{kind:"source",evaluate:function(t,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?nt(e.default,n.default):i(e,n,s,r,a)}}}(this._parameters,this._specification))};kr.deserialize=function(t){return new kr(t._parameters,t._specification)},kr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var zr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Ar={"*":function(){return[]},array:dt,boolean:function(t){var e=t.value,n=t.key,i=Q(e);return"boolean"!==i?[new _i(n,e,"boolean expected, "+i+" found")]:[]},number:ft,color:function(t){var e=t.key,n=t.value,i=Q(n);return"string"!==i?[new _i(e,n,"color expected, "+i+" found")]:null===Pi(n)?[new _i(e,n,'color expected, "'+n+'" found')]:[]},constants:x,enum:vt,filter:Ct,function:mt,layer:Mt,object:ht,source:It,light:Pt,string:Lt,formatted:function(t){return 0===Lt(t).length?[]:gt(t)}};Bt.source=Ft(It),Bt.light=Ft(Pt),Bt.layer=Ft(Mt),Bt.filter=Ft(Ct),Bt.paintProperty=Ft(zt),Bt.layoutProperty=Ft(At);var Mr=Bt,Ir=Bt.light,Pr=Bt.paintProperty,Lr=Bt.layoutProperty,Dr=Vt,Or=3;Vt.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Vt.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vt.prototype._insertCell=function(t,e,n,i,r,a){this.cells[r].push(a)},Vt.prototype.query=function(t,e,n,i){var r=this.min,a=this.max;if(t<=r&&e<=r&&a<=n&&a<=i)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(t,e,n,i,this._queryCell,o,{}),o},Vt.prototype._queryCell=function(t,e,n,i,r,a,o){var s=this.cells[r];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===o[p]){var h=4*p;t<=u[h+2]&&e<=u[h+3]&&n>=u[h+0]&&i>=u[h+1]?(o[p]=!0,a.push(l[p])):o[p]=!1}}},Vt.prototype._forEachCell=function(t,e,n,i,r,a,o){for(var s=this._convertToCellCoord(t),l=this._convertToCellCoord(e),u=this._convertToCellCoord(n),c=this._convertToCellCoord(i),p=s;p<=u;p++)for(var h=l;h<=c;h++){var d=this.d*h+p;if(r.call(this,t,e,n,i,d,a,o))return}},Vt.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Vt.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Or+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];r[Or+o]=a,r.set(s,a),a+=s.length}return r[Or+t.length]=a,r.set(this.keys,a),a+=this.keys.length,r[Or+t.length+1]=a,r.set(this.bboxes,a),a+=this.bboxes.length,r.buffer};var Br=self.ImageData,Rr={};for(var Fr in jt("Object",Object),Dr.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Dr.deserialize=function(t){return new Dr(t.buffer)},jt("Grid",Dr),jt("Color",Li),jt("Error",Error),jt("StylePropertyFunction",kr),jt("StyleExpression",Tr,{omit:["_evaluator"]}),jt("ZoomDependentExpression",Cr),jt("ZoomConstantExpression",Sr),jt("CompoundExpression",Xi,{omit:["_evaluate"]}),Er)Er[Fr]._classRegistryKey||jt("Expression_"+Fr,Er[Fr]);var Nr=function(){this.first=!0};Nr.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Vr,jr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}},Ur=!1,qr=null,$r=!1,Gr=new vi,Hr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return $r||null!=Hr.applyArabicShaping}},Xr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Nr,this.transition={})};Xr.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,i=t;n<i.length;n+=1)if(!Wt(i[n].charCodeAt(0),e))return!1;return!0}(t,Hr.isLoaded())},Xr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Xr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var Wr=function(t,e){this.property=t,this.value=e,this.expression=pt(void 0===e?t.specification.default:e,t.specification)};Wr.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Wr.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var Zr=function(t){this.property=t,this.value=new Wr(t,void 0)};Zr.prototype.transitioned=function(t,e){return new Kr(this.property,this.value,e,s({},t.transition,this.transition),t.now)},Zr.prototype.untransitioned=function(){return new Kr(this.property,this.value,null,{},0)};var Yr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Yr.prototype.getValue=function(t){return d(this._values[t].value.value)},Yr.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Zr(this._values[t].property)),this._values[t].value=new Wr(this._values[t].property,null===e?void 0:d(e))},Yr.prototype.getTransition=function(t){return d(this._values[t].transition)},Yr.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Zr(this._values[t].property)),this._values[t].transition=d(e)||void 0},Yr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r);var a=this.getTransition(i);void 0!==a&&(t[i+"-transition"]=a)}return t},Yr.prototype.transitioned=function(t,e){for(var n=new Jr(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var a=r[i];n._values[a]=this._values[a].transitioned(t,e._values[a])}return n},Yr.prototype.untransitioned=function(){for(var t=new Jr(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e];t._values[i]=this._values[i].untransitioned()}return t};var Kr=function(t,e,n,i,r){this.property=t,this.value=e,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)};Kr.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),i=this.prior;if(i){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return i.possiblyEvaluate(t);var r=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(t),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(r))}return n};var Jr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Jr.prototype.possiblyEvaluate=function(t){for(var e=new ea(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var r=i[n];e._values[r]=this._values[r].possiblyEvaluate(t)}return e},Jr.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var n=e[t];if(this._values[n].prior)return!0}return!1};var Qr=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Qr.prototype.getValue=function(t){return d(this._values[t].value)},Qr.prototype.setValue=function(t,e){this._values[t]=new Wr(this._values[t].property,null===e?void 0:d(e))},Qr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r)}return t},Qr.prototype.possiblyEvaluate=function(t){for(var e=new ea(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var r=i[n];e._values[r]=this._values[r].possiblyEvaluate(t)}return e};var ta=function(t,e,n){this.property=t,this.value=e,this.parameters=n};ta.prototype.isConstant=function(){return"constant"===this.value.kind},ta.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},ta.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var ea=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};ea.prototype.get=function(t){return this._values[t]};var na=function(t){this.specification=t};na.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},na.prototype.interpolate=function(t,e,n){var i=Ki[this.specification.type];return i?i(t,e,n):t};var ia=function(t){this.specification=t};ia.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new ta(this,{kind:"constant",value:t.expression.evaluate(e)},e):new ta(this,t.expression,e)},ia.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new ta(this,{kind:"constant",value:void 0},t.parameters);var i=Ki[this.specification.type];return i?new ta(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t},ia.prototype.evaluate=function(t,e,n,i){return"constant"===t.kind?t.value:t.evaluate(e,n,i)};var ra=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new ta(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e),i=this._calculate(n,n,n,e);return new ta(this,{kind:"constant",value:i},e)}if("camera"===t.expression.kind){var r=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new ta(this,{kind:"constant",value:r},e)}return new ta(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,i){if("source"===t.kind){var r=t.evaluate(e,n,i);return this._calculate(r,r,r,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value},e.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(ia),aa=function(t){this.specification=t};aa.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new Xr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Xr(Math.floor(e.zoom),e)),t.expression.evaluate(new Xr(Math.floor(e.zoom+1),e)),e)}},aa.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},aa.prototype.interpolate=function(t){return t};var oa=function(t){this.specification=t};oa.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},oa.prototype.interpolate=function(){return!1};var sa=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],i=this.defaultPropertyValues[e]=new Wr(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new Zr(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};jt("DataDrivenProperty",ia),jt("DataConstantProperty",na),jt("CrossFadedDataDrivenProperty",ra),jt("CrossFadedProperty",aa),jt("ColorRampProperty",oa);var la=function(t){function e(e,n){for(var i in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new Qr(n.layout)),this._transitionablePaint=new Yr(n.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){if(null!=e){var i="layers."+this.id+".layout."+t;if(this._validate(Lr,i,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return c(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(null!=e){var i="layers."+this.id+".paint."+t;if(this._validate(Pr,i,t,e,n))return!1}if(c(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],a="cross-faded-data-driven"===r.property.specification["property-type"]&&!r.value.value&&e,o=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var s=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),s||o||a},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),h(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,i,r){return(!r||!1!==r.validate)&&Nt(this,t.call(Mr,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:yi,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof ta&&Y(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(vi),ua={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ca=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},pa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};pa.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},pa.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},pa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},pa.prototype.clear=function(){this.length=0},pa.prototype.resize=function(t){this.reserve(t),this.length=t},pa.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},pa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ha=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.int16[i+0]=t,this.int16[i+1]=e,n},e.prototype.emplace=function(t,e,n){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t},e}(pa);ha.prototype.bytesPerElement=4,jt("StructArrayLayout2i4",ha);var da=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;this.resize(r+1);var a=4*r;return this.int16[a+0]=t,this.int16[a+1]=e,this.int16[a+2]=n,this.int16[a+3]=i,r},e.prototype.emplace=function(t,e,n,i,r){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,t},e}(pa);da.prototype.bytesPerElement=8,jt("StructArrayLayout4i8",da);var fa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=r,this.int16[s+5]=a,o},e.prototype.emplace=function(t,e,n,i,r,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(pa);fa.prototype.bytesPerElement=12,jt("StructArrayLayout2i4i12",fa);var ma=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,s){var l=this.length;this.resize(l+1);var u=6*l,c=12*l;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=n,this.int16[u+3]=i,this.uint8[c+8]=r,this.uint8[c+9]=a,this.uint8[c+10]=o,this.uint8[c+11]=s,l},e.prototype.emplace=function(t,e,n,i,r,a,o,s,l){var u=6*t,c=12*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=i,this.int16[u+3]=r,this.uint8[c+8]=a,this.uint8[c+9]=o,this.uint8[c+10]=s,this.uint8[c+11]=l,t},e}(pa);ma.prototype.bytesPerElement=12,jt("StructArrayLayout4i4ub12",ma);var ga=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,s){var l=this.length;this.resize(l+1);var u=8*l;return this.uint16[u+0]=t,this.uint16[u+1]=e,this.uint16[u+2]=n,this.uint16[u+3]=i,this.uint16[u+4]=r,this.uint16[u+5]=a,this.uint16[u+6]=o,this.uint16[u+7]=s,l},e.prototype.emplace=function(t,e,n,i,r,a,o,s,l){var u=8*t;return this.uint16[u+0]=e,this.uint16[u+1]=n,this.uint16[u+2]=i,this.uint16[u+3]=r,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,t},e}(pa);ga.prototype.bytesPerElement=16,jt("StructArrayLayout8ui16",ga);var va=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,s){var l=this.length;this.resize(l+1);var u=8*l;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=n,this.int16[u+3]=i,this.uint16[u+4]=r,this.uint16[u+5]=a,this.uint16[u+6]=o,this.uint16[u+7]=s,l},e.prototype.emplace=function(t,e,n,i,r,a,o,s,l){var u=8*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=i,this.int16[u+3]=r,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,t},e}(pa);va.prototype.bytesPerElement=16,jt("StructArrayLayout4i4ui16",va);var ya=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.float32[r+0]=t,this.float32[r+1]=e,this.float32[r+2]=n,i},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t},e}(pa);ya.prototype.bytesPerElement=12,jt("StructArrayLayout3f12",ya);var _a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.uint32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.uint32[n+0]=e,t},e}(pa);_a.prototype.bytesPerElement=4,jt("StructArrayLayout1ul4",_a);var xa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,s,l,u,c){var p=this.length;this.resize(p+1);var h=12*p,d=6*p;return this.int16[h+0]=t,this.int16[h+1]=e,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=r,this.int16[h+5]=a,this.uint32[d+3]=o,this.uint16[h+8]=s,this.uint16[h+9]=l,this.int16[h+10]=u,this.int16[h+11]=c,p},e.prototype.emplace=function(t,e,n,i,r,a,o,s,l,u,c,p){var h=12*t,d=6*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=i,this.int16[h+3]=r,this.int16[h+4]=a,this.int16[h+5]=o,this.uint32[d+3]=s,this.uint16[h+8]=l,this.uint16[h+9]=u,this.int16[h+10]=c,this.int16[h+11]=p,t},e}(pa);xa.prototype.bytesPerElement=24,jt("StructArrayLayout6i1ul2ui2i24",xa);var ba=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=r,this.int16[s+5]=a,o},e.prototype.emplace=function(t,e,n,i,r,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(pa);ba.prototype.bytesPerElement=12,jt("StructArrayLayout2i2i2i12",ba);var wa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=4*n;return this.uint8[i+0]=t,this.uint8[i+1]=e,n},e.prototype.emplace=function(t,e,n){var i=4*t;return this.uint8[i+0]=e,this.uint8[i+1]=n,t},e}(pa);wa.prototype.bytesPerElement=4,jt("StructArrayLayout2ub4",wa);var Ea=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,s,l,u,c,p,h,d){var f=this.length;this.resize(f+1);var m=20*f,g=10*f,v=40*f;return this.int16[m+0]=t,this.int16[m+1]=e,this.uint16[m+2]=n,this.uint16[m+3]=i,this.uint32[g+2]=r,this.uint32[g+3]=a,this.uint32[g+4]=o,this.uint16[m+10]=s,this.uint16[m+11]=l,this.uint16[m+12]=u,this.float32[g+7]=c,this.float32[g+8]=p,this.uint8[v+36]=h,this.uint8[v+37]=d,f},e.prototype.emplace=function(t,e,n,i,r,a,o,s,l,u,c,p,h,d,f){var m=20*t,g=10*t,v=40*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.uint16[m+2]=i,this.uint16[m+3]=r,this.uint32[g+2]=a,this.uint32[g+3]=o,this.uint32[g+4]=s,this.uint16[m+10]=l,this.uint16[m+11]=u,this.uint16[m+12]=c,this.float32[g+7]=p,this.float32[g+8]=h,this.uint8[v+36]=d,this.uint8[v+37]=f,t},e}(pa);Ea.prototype.bytesPerElement=40,jt("StructArrayLayout2i2ui3ul3ui2f2ub40",Ea);var Ta=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,s,l,u,c,p,h,d){var f=this.length;this.resize(f+1);var m=16*f,g=8*f;return this.int16[m+0]=t,this.int16[m+1]=e,this.int16[m+2]=n,this.int16[m+3]=i,this.uint16[m+4]=r,this.uint16[m+5]=a,this.uint16[m+6]=o,this.uint16[m+7]=s,this.uint16[m+8]=l,this.uint16[m+9]=u,this.uint16[m+10]=c,this.uint16[m+11]=p,this.uint16[m+12]=h,this.uint32[g+7]=d,f},e.prototype.emplace=function(t,e,n,i,r,a,o,s,l,u,c,p,h,d,f){var m=16*t,g=8*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.int16[m+2]=i,this.int16[m+3]=r,this.uint16[m+4]=a,this.uint16[m+5]=o,this.uint16[m+6]=s,this.uint16[m+7]=l,this.uint16[m+8]=u,this.uint16[m+9]=c,this.uint16[m+10]=p,this.uint16[m+11]=h,this.uint16[m+12]=d,this.uint32[g+7]=f,t},e}(pa);Ta.prototype.bytesPerElement=32,jt("StructArrayLayout4i9ui1ul32",Ta);var Sa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.float32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.float32[n+0]=e,t},e}(pa);Sa.prototype.bytesPerElement=4,jt("StructArrayLayout1f4",Sa);var Ca=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.int16[r+0]=t,this.int16[r+1]=e,this.int16[r+2]=n,i},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t},e}(pa);Ca.prototype.bytesPerElement=6,jt("StructArrayLayout3i6",Ca);var ka=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=2*i,a=4*i;return this.uint32[r+0]=t,this.uint16[a+2]=e,this.uint16[a+3]=n,i},e.prototype.emplace=function(t,e,n,i){var r=2*t,a=4*t;return this.uint32[r+0]=e,this.uint16[a+2]=n,this.uint16[a+3]=i,t},e}(pa);ka.prototype.bytesPerElement=8,jt("StructArrayLayout1ul2ui8",ka);var za=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.uint16[r+0]=t,this.uint16[r+1]=e,this.uint16[r+2]=n,i},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t},e}(pa);za.prototype.bytesPerElement=6,jt("StructArrayLayout3ui6",za);var Aa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.uint16[i+0]=t,this.uint16[i+1]=e,n},e.prototype.emplace=function(t,e,n){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t},e}(pa);Aa.prototype.bytesPerElement=4,jt("StructArrayLayout2ui4",Aa);var Ma=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.uint16[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.uint16[n+0]=e,t},e}(pa);Ma.prototype.bytesPerElement=2,jt("StructArrayLayout1ui2",Ma);var Ia=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.float32[i+0]=t,this.float32[i+1]=e,n},e.prototype.emplace=function(t,e,n){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t},e}(pa);Ia.prototype.bytesPerElement=8,jt("StructArrayLayout2f8",Ia);var Pa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;this.resize(r+1);var a=4*r;return this.float32[a+0]=t,this.float32[a+1]=e,this.float32[a+2]=n,this.float32[a+3]=i,r},e.prototype.emplace=function(t,e,n,i,r){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=i,this.float32[a+3]=r,t},e}(pa);Pa.prototype.bytesPerElement=16,jt("StructArrayLayout4f16",Pa);var La=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new ii(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(ca);La.prototype.size=24;var Da=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new La(this,t)},e}(xa);jt("CollisionBoxArray",Da);var Oa=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(ca);Oa.prototype.size=40;var Ba=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Oa(this,t)},e}(Ea);jt("PlacedSymbolArray",Ba);var Ra=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(t){this._structArray.uint16[this._pos2+4]=t},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+5]=t},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+6]=t},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+7]=t},Object.defineProperties(e.prototype,n),e}(ca);Ra.prototype.size=32;var Fa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Ra(this,t)},e}(Ta);jt("SymbolInstanceArray",Fa);var Na=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(ca);Na.prototype.size=4;var Va=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new Na(this,t)},e}(Sa);jt("GlyphOffsetArray",Va);var ja=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(ca);ja.prototype.size=6;var Ua=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new ja(this,t)},e}(Ca);jt("SymbolLineVertexArray",Ua);var qa=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(ca);qa.prototype.size=8;var $a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new qa(this,t)},e}(ka);jt("FeatureIndexArray",$a);var Ga=Zt([{name:"a_pos",components:2,type:"Int16"}],4),Ha=Ga.members,Xa=(Ga.size,Ga.alignment,function(t){void 0===t&&(t=[]),this.segments=t});Xa.prototype.prepareSegment=function(t,e,n){var i=this.segments[this.segments.length-1];return t>Xa.MAX_VERTEX_ARRAY_LENGTH&&f("Max vertices per segment is "+Xa.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Xa.MAX_VERTEX_ARRAY_LENGTH)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(i)),i},Xa.prototype.get=function(){return this.segments},Xa.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var i in n.vaos)n.vaos[i].destroy()}},Xa.simpleSegment=function(t,e,n,i){return new Xa([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{}}])},Xa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,jt("SegmentVector",Xa);var Wa=function(t,e){return 256*(t=o(Math.floor(t),0,255))+(e=o(Math.floor(e),0,255))},Za=function(){this.ids=[],this.positions=[],this.indexed=!1};Za.prototype.add=function(t,e,n,i){this.ids.push(t),this.positions.push(e,n,i)},Za.prototype.getPositions=function(t){for(var e=0,n=this.ids.length-1;e<n;){var i=e+n>>1;this.ids[i]>=t?n=i:e=i+1}for(var r=[];this.ids[e]===t;){var a=this.positions[3*e],o=this.positions[3*e+1],s=this.positions[3*e+2];r.push({index:a,start:o,end:s}),e++}return r},Za.serialize=function(t,e){var n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,n,i,r){if(!(i>=r)){for(var a=e[i+r>>1],o=i-1,s=r+1;;){do{o++}while(e[o]<a);do{s--}while(e[s]>a);if(o>=s)break;Kt(e,o,s),Kt(n,3*o,3*s),Kt(n,3*o+1,3*s+1),Kt(n,3*o+2,3*s+2)}t(e,n,i,s),t(e,n,s+1,r)}}(n,i,0,n.length-1),e.push(n.buffer,i.buffer),{ids:n,positions:i}},Za.deserialize=function(t){var e=new Za;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},jt("FeaturePositionMap",Za);var Ya=function(t,e){this.gl=t.gl,this.location=e},Ka=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Ya),Ja=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Ya),Qa=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Ya),to=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Ya),eo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Ya),no=function(t){function e(e,n){t.call(this,e,n),this.current=Li.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Ya),io=new Float32Array(16),ro=function(t){function e(e,n){t.call(this,e,n),this.current=io}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Ya),ao=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0};ao.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ao.prototype.setConstantPatternPositions=function(){},ao.prototype.populatePaintArray=function(){},ao.prototype.updatePaintArray=function(){},ao.prototype.upload=function(){},ao.prototype.destroy=function(){},ao.prototype.setUniforms=function(t,e,n,i){e.set(i.constantOr(this.value))},ao.prototype.getBinding=function(t,e){return"color"===this.type?new no(t,e):new Ja(t,e)},ao.serialize=function(t){var e=t.value,n=t.names,i=t.type;return{value:Ut(e),names:n,type:i}},ao.deserialize=function(t){var e=t.value,n=t.names,i=t.type;return new ao(qt(e),n,i)};var oo=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};oo.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},oo.prototype.populatePaintArray=function(){},oo.prototype.updatePaintArray=function(){},oo.prototype.upload=function(){},oo.prototype.destroy=function(){},oo.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},oo.prototype.setUniforms=function(t,e,n,i,r){var a=this.patternPositions;"u_pattern_to"===r&&a.patternTo&&e.set(a.patternTo),"u_pattern_from"===r&&a.patternFrom&&e.set(a.patternFrom)},oo.prototype.getBinding=function(t,e){return new eo(t,e)};var so=function(t,e,n,i){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new i};so.prototype.defines=function(){return[]},so.prototype.setConstantPatternPositions=function(){},so.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,i=n.length;n.reserve(t);var r=this.expression.evaluate(new Xr(0),e,{});if("color"===this.type)for(var a=Jt(r),o=i;o<t;o++)n.emplaceBack(a[0],a[1]);else{for(var s=i;s<t;s++)n.emplaceBack(r);this.maxValue=Math.max(this.maxValue,r)}},so.prototype.updatePaintArray=function(t,e,n,i){var r=this.paintVertexArray,a=this.expression.evaluate({zoom:0},n,i);if("color"===this.type)for(var o=Jt(a),s=t;s<e;s++)r.emplace(s,o[0],o[1]);else{for(var l=t;l<e;l++)r.emplace(l,a);this.maxValue=Math.max(this.maxValue,a)}},so.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},so.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},so.prototype.setUniforms=function(t,e){e.set(0)},so.prototype.getBinding=function(t,e){return new Ja(t,e)};var lo=function(t,e,n,i,r,a){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=-1/0;var o=a;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new o};lo.prototype.defines=function(){return[]},lo.prototype.setConstantPatternPositions=function(){},lo.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,i=n.length;n.reserve(t);var r=this.expression.evaluate(new Xr(this.zoom),e,{}),a=this.expression.evaluate(new Xr(this.zoom+1),e,{});if("color"===this.type)for(var o=Jt(r),s=Jt(a),l=i;l<t;l++)n.emplaceBack(o[0],o[1],s[0],s[1]);else{for(var u=i;u<t;u++)n.emplaceBack(r,a);this.maxValue=Math.max(this.maxValue,r,a)}},lo.prototype.updatePaintArray=function(t,e,n,i){var r=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);if("color"===this.type)for(var s=Jt(a),l=Jt(o),u=t;u<e;u++)r.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=t;c<e;c++)r.emplace(c,a,o);this.maxValue=Math.max(this.maxValue,a,o)}},lo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},lo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},lo.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},lo.prototype.setUniforms=function(t,e,n){e.set(this.interpolationFactor(n.zoom))},lo.prototype.getBinding=function(t,e){return new Ja(t,e)};var uo=function(t,e,n,i,r,a,o){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=i,this.zoom=r,this.maxValue=-1/0,this.layerId=o,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};uo.prototype.defines=function(){return[]},uo.prototype.setConstantPatternPositions=function(){},uo.prototype.populatePaintArray=function(t,e,n){var i=this.zoomInPaintVertexArray,r=this.zoomOutPaintVertexArray,a=this.layerId,o=i.length;if(i.reserve(t),r.reserve(t),n&&e.patterns&&e.patterns[a]){var s=e.patterns[a],l=s.min,u=s.mid,c=s.max,p=n[l],h=n[u],d=n[c];if(!p||!h||!d)return;for(var f=o;f<t;f++)i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),r.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},uo.prototype.updatePaintArray=function(t,e,n,i,r){var a=this.zoomInPaintVertexArray,o=this.zoomOutPaintVertexArray,s=this.layerId;if(r&&n.patterns&&n.patterns[s]){var l=n.patterns[s],u=l.min,c=l.mid,p=l.max,h=r[u],d=r[c],f=r[p];if(!h||!d||!f)return;for(var m=t;m<e;m++)a.emplace(m,d.tl[0],d.tl[1],d.br[0],d.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),o.emplace(m,d.tl[0],d.tl[1],d.br[0],d.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},uo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},uo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},uo.prototype.setUniforms=function(t,e){e.set(0)},uo.prototype.getBinding=function(t,e){return new Ja(t,e)};var co=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Za,this._bufferOffset=0};co.createDynamic=function(t,e,n){var i=new co,r=[];for(var a in t.paint._values)if(n(a)){var o=t.paint.get(a);if(o instanceof ta&&Y(o.property.specification)){var s=Qt(a,t.type),l=o.property.specification.type,u=o.property.useIntegerZoom;if("cross-faded"===o.property.specification["property-type"]||"cross-faded-data-driven"===o.property.specification["property-type"])if("constant"===o.value.kind)i.binders[a]=new oo(o.value.value,s,l),r.push("/u_"+a);else{var c=te(a,l,"source");i.binders[a]=new uo(o.value,s,l,u,e,c,t.id),r.push("/a_"+a)}else if("constant"===o.value.kind)i.binders[a]=new ao(o.value.value,s,l),r.push("/u_"+a);else if("source"===o.value.kind){var p=te(a,l,"source");i.binders[a]=new so(o.value,s,l,p),r.push("/a_"+a)}else{var h=te(a,l,"composite");i.binders[a]=new lo(o.value,s,l,u,e,h),r.push("/z_"+a)}}}return i.cacheKey=r.sort().join(""),i},co.prototype.populatePaintArrays=function(t,e,n,i){for(var r in this.binders)this.binders[r].populatePaintArray(t,e,i);void 0!==e.id&&this._featureMap.add(+e.id,n,this._bufferOffset,t),this._bufferOffset=t},co.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders)this.binders[n].setConstantPatternPositions(t,e)},co.prototype.updatePaintArrays=function(t,e,n,i){var r=!1;for(var a in t)for(var o=0,s=this._featureMap.getPositions(+a);o<s.length;o+=1){var l=s[o],u=e.feature(l.index);for(var c in this.binders){var p=this.binders[c];if(!(p instanceof ao||p instanceof oo)&&!0===p.expression.isStateDependent){var h=n.paint.get(c);p.expression=h.value,p.updatePaintArray(l.start,l.end,u,t[a],i),r=!0}}}return r},co.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},co.prototype.getPaintVertexBuffers=function(){return this._buffers},co.prototype.getUniforms=function(t,e){var n={};for(var i in this.binders)for(var r=this.binders[i],a=0,o=r.uniformNames;a<o.length;a+=1){var s=o[a];n[s]=r.getBinding(t,e[s])}return n},co.prototype.setUniforms=function(t,e,n,i){for(var r in this.binders)for(var a=this.binders[r],o=0,s=a.uniformNames;o<s.length;o+=1){var l=s[o];a.setUniforms(t,e[l],i,n.get(r),l)}},co.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var n in this.binders){var i=this.binders[n];if(i instanceof uo){var r=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;r&&e.push(r)}else(i instanceof so||i instanceof lo)&&i.paintVertexBuffer&&e.push(i.paintVertexBuffer)}this._buffers=e},co.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var i in this.binders){var r=this.binders[i];(r instanceof so||r instanceof lo)&&r.paintVertexBuffer&&n.push(r.paintVertexBuffer)}this._buffers=n},co.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var po=function(t,e,n,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,a=e;r<a.length;r+=1){var o=a[r];this.programConfigurations[o.id]=co.createDynamic(o,n,i),this.programConfigurations[o.id].layoutAttributes=t}this.needsUpload=!1};po.prototype.populatePaintArrays=function(t,e,n,i){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,n,i);this.needsUpload=!0},po.prototype.updatePaintArrays=function(t,e,n,i){for(var r=0,a=n;r<a.length;r+=1){var o=a[r];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o,i)||this.needsUpload}},po.prototype.get=function(t){return this.programConfigurations[t]},po.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},po.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},jt("ConstantBinder",ao),jt("CrossFadedConstantBinder",oo),jt("SourceExpressionBinder",so),jt("CrossFadedCompositeBinder",uo),jt("CompositeExpressionBinder",lo),jt("ProgramConfiguration",co,{omit:["_buffers"]}),jt("ProgramConfigurationSet",po);var ho,fo=8192,mo=(ho=16,{min:-1*Math.pow(2,ho-1),max:Math.pow(2,ho-1)-1}),go=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ha,this.indexArray=new za,this.segments=new Xa,this.programConfigurations=new po(Ha,t.layers,t.zoom)};go.prototype.populate=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=i[n],a=r.feature,o=r.index,s=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new Xr(this.zoom),a)){var l=ee(a);this.addFeature(a,l,o),e.featureIndex.insert(a,l,o,s,this.index)}}},go.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},go.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},go.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},go.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ha),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},go.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},go.prototype.addFeature=function(t,e,n){for(var i=0,r=e;i<r.length;i+=1)for(var a=0,o=r[i];a<o.length;a+=1){var s=o[a],l=s.x,u=s.y;if(!(l<0||l>=fo||u<0||u>=fo)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;ne(this.layoutVertexArray,l,u,-1,-1),ne(this.layoutVertexArray,l,u,1,-1),ne(this.layoutVertexArray,l,u,1,1),ne(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{})},jt("CircleBucket",go,{omit:["layers"]});var vo={paint:new sa({"circle-radius":new ia(yi.paint_circle["circle-radius"]),"circle-color":new ia(yi.paint_circle["circle-color"]),"circle-blur":new ia(yi.paint_circle["circle-blur"]),"circle-opacity":new ia(yi.paint_circle["circle-opacity"]),"circle-translate":new na(yi.paint_circle["circle-translate"]),"circle-translate-anchor":new na(yi.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new na(yi.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new na(yi.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ia(yi.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ia(yi.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ia(yi.paint_circle["circle-stroke-opacity"])})},yo="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;var _o,xo=ye,bo=(_o=ve(),function(t,e,n,i,r,a){var o,s;for(e||(e=3),n||(n=0),s=i?Math.min(i*e+n,t.length):t.length,o=n;o<s;o+=e)_o[0]=t[o],_o[1]=t[o+1],_o[2]=t[o+2],r(_o,_o,a),t[o]=_o[0],t[o+1]=_o[1],t[o+2]=_o[2];return t}),wo=function(){var t=Ee();return function(e,n,i,r,a,o){var s,l;for(n||(n=4),i||(i=0),l=r?Math.min(r*n+i,e.length):e.length,s=i;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();ve(),_e(1,0,0),_e(0,1,0),Ce(),Ce(),ge(),function(){var t;(t=new yo(2))[0]=0,t[1]=0}();var Eo=function(t){function e(e){t.call(this,e,vo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new go(t)},e.prototype.queryRadius=function(t){var e=t;return de("circle-radius",this,e)+de("circle-stroke-width",this,e)+fe(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,o,s){for(var l=me(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(t,e,n){return t.map(function(t){return t.map(function(t){return ke(t,e,n)})})}(l,s,a),h=c?u*o:u,d=0,f=i;d<f.length;d+=1)for(var m=0,g=f[d];m<g.length;m+=1){var v=g[m],y=c?v:ke(v,s,a),_=h,x=Se([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=x[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=a.cameraToCenterDistance/x[3]),ie(p,y,_))return!0}return!1},e}(la),To=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(go);jt("HeatmapBucket",To,{omit:["layers"]});var So=function(t,e){ze(this,t,1,e)};So.prototype.resize=function(t){Ae(this,t,1)},So.prototype.clone=function(){return new So({width:this.width,height:this.height},new Uint8Array(this.data))},So.copy=function(t,e,n,i,r){Me(t,e,n,i,r,1)};var Co=function(t,e){ze(this,t,4,e)};Co.prototype.resize=function(t){Ae(this,t,4)},Co.prototype.clone=function(){return new Co({width:this.width,height:this.height},new Uint8Array(this.data))},Co.copy=function(t,e,n,i,r){Me(t,e,n,i,r,4)},jt("AlphaImage",So),jt("RGBAImage",Co);var ko={paint:new sa({"heatmap-radius":new ia(yi.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ia(yi.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new na(yi.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oa(yi.paint_heatmap["heatmap-color"]),"heatmap-opacity":new na(yi.paint_heatmap["heatmap-opacity"])})},zo=function(t){function e(e){t.call(this,e,ko),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new To(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Ie(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(la),Ao={paint:new sa({"hillshade-illumination-direction":new na(yi.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new na(yi.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new na(yi.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new na(yi.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new na(yi.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new na(yi.paint_hillshade["hillshade-accent-color"])})},Mo=function(t){function e(e){t.call(this,e,Ao)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(la),Io=Zt([{name:"a_pos",components:2,type:"Int16"}],4),Po=Io.members,Lo=(Io.size,Io.alignment,Pe),Do=Pe;Pe.deviation=function(t,e,n,i){var r=e&&e.length,a=r?e[0]*n:t.length,o=Math.abs(tn(t,0,a,n));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;o-=Math.abs(tn(t,u,c,n))}var p=0;for(s=0;s<i.length;s+=3){var h=i[s]*n,d=i[s+1]*n,f=i[s+2]*n;p+=Math.abs((t[h]-t[f])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[f+1]-t[h+1]))}return 0===o&&0===p?0:Math.abs((p-o)/o)},Pe.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[r][a][o]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},Lo.default=Do;var Oo=en,Bo=en;Oo.default=Bo;var Ro=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ha,this.indexArray=new za,this.indexArray2=new Aa,this.programConfigurations=new po(Po,t.layers,t.zoom),this.segments=new Xa,this.segments2=new Xa};Ro.prototype.populate=function(t,e){this.features=[],this.hasPattern=sn("fill",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var r=i[n],a=r.feature,o=r.index,s=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new Xr(this.zoom),a)){var l=ee(a),u={sourceLayerIndex:s,index:o,geometry:l,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(ln("fill",this.layers,u,this.zoom,e)):this.addFeature(u,l,o,{}),e.featureIndex.insert(a,l,o,s,this.index)}}},Ro.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Ro.prototype.addFeatures=function(t,e){for(var n=0,i=this.features;n<i.length;n+=1){var r=i[n],a=r.geometry;this.addFeature(r,a,r.index,e)}},Ro.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ro.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ro.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Po),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Ro.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ro.prototype.addFeature=function(t,e,n,i){for(var r=0,a=an(e,500);r<a.length;r+=1){for(var o=a[r],s=0,l=0,u=o;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),p=c.vertexLength,h=[],d=[],f=0,m=o;f<m.length;f+=1){var g=m[f];if(0!==g.length){g!==o[0]&&d.push(h.length/2);var v=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),y=v.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(y+g.length-1,y),h.push(g[0].x),h.push(g[0].y);for(var _=1;_<g.length;_++)this.layoutVertexArray.emplaceBack(g[_].x,g[_].y),this.indexArray2.emplaceBack(y+_-1,y+_),h.push(g[_].x),h.push(g[_].y);v.vertexLength+=g.length,v.primitiveLength+=g.length}}for(var x=Lo(h,d),b=0;b<x.length;b+=3)this.indexArray.emplaceBack(p+x[b],p+x[b+1],p+x[b+2]);c.vertexLength+=s,c.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i)},jt("FillBucket",Ro,{omit:["layers","features"]});var Fo={paint:new sa({"fill-antialias":new na(yi.paint_fill["fill-antialias"]),"fill-opacity":new ia(yi.paint_fill["fill-opacity"]),"fill-color":new ia(yi.paint_fill["fill-color"]),"fill-outline-color":new ia(yi.paint_fill["fill-outline-color"]),"fill-translate":new na(yi.paint_fill["fill-translate"]),"fill-translate-anchor":new na(yi.paint_fill["fill-translate-anchor"]),"fill-pattern":new ra(yi.paint_fill["fill-pattern"])})},No=function(t){function e(e){t.call(this,e,Fo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Ro(t)},e.prototype.queryRadius=function(){return fe(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,o){return re(me(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),i)},e}(la),Vo=Zt([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),jo=Vo.members,Uo=(Vo.size,Vo.alignment,Math.pow(2,13)),qo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new fa,this.indexArray=new za,this.programConfigurations=new po(jo,t.layers,t.zoom),this.segments=new Xa};qo.prototype.populate=function(t,e){this.features=[],this.hasPattern=sn("fill-extrusion",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var r=i[n],a=r.feature,o=r.index,s=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new Xr(this.zoom),a)){var l=ee(a),u={sourceLayerIndex:s,index:o,geometry:l,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(ln("fill-extrusion",this.layers,u,this.zoom,e)):this.addFeature(u,l,o,{}),e.featureIndex.insert(a,l,o,s,this.index)}}},qo.prototype.addFeatures=function(t,e){for(var n=0,i=this.features;n<i.length;n+=1){var r=i[n],a=r.geometry;this.addFeature(r,a,r.index,e)}},qo.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},qo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,jo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},qo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qo.prototype.addFeature=function(t,e,n,i){for(var r=0,a=an(e,500);r<a.length;r+=1){for(var o=a[r],s=0,l=0,u=o;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=o;p<h.length;p+=1){var d=h[p];if(0!==d.length&&!pn(d))for(var f=0,m=0;m<d.length;m++){var g=d[m];if(m>=1){var v=d[m-1];if(!cn(g,v)){c.vertexLength+4>Xa.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var y=g.sub(v)._perp()._unit(),_=v.dist(g);f+_>32768&&(f=0),un(this.layoutVertexArray,g.x,g.y,y.x,y.y,0,0,f),un(this.layoutVertexArray,g.x,g.y,y.x,y.y,0,1,f),f+=_,un(this.layoutVertexArray,v.x,v.y,y.x,y.y,0,0,f),un(this.layoutVertexArray,v.x,v.y,y.x,y.y,0,1,f);var x=c.vertexLength;this.indexArray.emplaceBack(x,x+1,x+2),this.indexArray.emplaceBack(x+1,x+2,x+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>Xa.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var b=[],w=[],E=c.vertexLength,T=0,S=o;T<S.length;T+=1){var C=S[T];if(0!==C.length){C!==o[0]&&w.push(b.length/2);for(var k=0;k<C.length;k++){var z=C[k];un(this.layoutVertexArray,z.x,z.y,0,0,1,1,0),b.push(z.x),b.push(z.y)}}}for(var A=Lo(b,w),M=0;M<A.length;M+=3)this.indexArray.emplaceBack(E+A[M],E+A[M+1],E+A[M+2]);c.primitiveLength+=A.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i)},jt("FillExtrusionBucket",qo,{omit:["layers","features"]});var $o={paint:new sa({"fill-extrusion-opacity":new na(yi["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ia(yi["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new na(yi["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new na(yi["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ra(yi["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ia(yi["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ia(yi["paint_fill-extrusion"]["fill-extrusion-base"])})},Go=function(t){function e(e){t.call(this,e,$o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new qo(t)},e.prototype.queryRadius=function(){return fe(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,o){return re(me(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,o),i)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(la),Ho=Zt([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Xo=Ho.members,Wo=(Ho.size,Ho.alignment,hn);hn.types=["Unknown","Point","LineString","Polygon"],hn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,a=0,o=0,s=[];t.pos<n;){if(r<=0){var l=t.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)a+=t.readSVarint(),o+=t.readSVarint(),1===i&&(e&&s.push(e),e=[]),e.push(new ii(a,o));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&s.push(e),s},hn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<o&&(o=r),r>s&&(s=r),(a+=t.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,u]},hn.prototype.toGeoJSON=function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+l)/o;t[e]=[360*(n.x+s)/o-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}var r,a,o=this.extent*Math.pow(2,n),s=this.extent*t,l=this.extent*e,u=this.loadGeometry(),c=hn.types[this.type];switch(this.type){case 1:var p=[];for(r=0;r<u.length;r++)p[r]=u[r][0];i(u=p);break;case 2:for(r=0;r<u.length;r++)i(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],a=0;a<e;a++){var o=fn(t[a]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[t[a]]):n.push(t[a]))}return n&&r.push(n),r}(u),r=0;r<u.length;r++)for(a=0;a<u[r].length;a++)i(u[r][a])}1===u.length?u=u[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Zo=mn;mn.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Wo(this._pbf,e,this.extent,this._keys,this._values)};var Yo={VectorTile:function(t,e){this.layers=t.readFields(vn,{},e)},VectorTileFeature:Wo,VectorTileLayer:Zo},Ko=Yo.VectorTileFeature.types,Jo=63,Qo=Math.cos(Math.PI/180*37.5),ts=.5,es=Math.pow(2,14)/ts,ns=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new ma,this.indexArray=new za,this.programConfigurations=new po(Xo,t.layers,t.zoom),this.segments=new Xa};ns.prototype.populate=function(t,e){this.features=[],this.hasPattern=sn("line",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var r=i[n],a=r.feature,o=r.index,s=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new Xr(this.zoom),a)){var l=ee(a),u={sourceLayerIndex:s,index:o,geometry:l,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(ln("line",this.layers,u,this.zoom,e)):this.addFeature(u,l,o,{}),e.featureIndex.insert(a,l,o,s,this.index)}}},ns.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ns.prototype.addFeatures=function(t,e){for(var n=0,i=this.features;n<i.length;n+=1){var r=i[n],a=r.geometry;this.addFeature(r,a,r.index,e)}},ns.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ns.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ns.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ns.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ns.prototype.addFeature=function(t,e,n,i){for(var r=this.layers[0].layout,a=r.get("line-join").evaluate(t,{}),o=r.get("line-cap"),s=r.get("line-miter-limit"),l=r.get("line-round-limit"),u=0,c=e;u<c.length;u+=1){var p=c[u];this.addLine(p,t,a,o,s,l,n,i)}},ns.prototype.addLine=function(t,e,n,i,r,a,o,s){var l=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(l={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===Ko[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var p=0;p<c-1&&t[p].equals(t[p+1]);)p++;if(!(c<(u?3:2))){l&&(l.tileTotal=function(t,e,n){for(var i,r,a=0,o=e;o<n-1;o++)i=t[o],r=t[o+1],a+=i.dist(r);return a}(t,p,c)),"bevel"===n&&(r=1.05);var h=fo/(512*this.overscaling)*15,d=t[p],f=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var m,g,v,y=i,_=u?"butt":i,x=!0,b=void 0,w=void 0,E=void 0,T=void 0;this.e1=this.e2=this.e3=-1,u&&(m=t[c-2],T=d.sub(m)._unit()._perp());for(var S=p;S<c;S++)if(!(w=u&&S===c-1?t[p+1]:t[S+1])||!t[S].equals(w)){T&&(E=T),m&&(b=m),m=t[S],T=w?w.sub(m)._unit()._perp():E;var C=(E=E||T).add(T);0===C.x&&0===C.y||C._unit();var k=C.x*T.x+C.y*T.y,z=0!==k?1/k:1/0,A=k<Qo&&b&&w;if(A&&S>p){var M=m.dist(b);if(M>2*h){var I=m.sub(m.sub(b)._mult(h/M)._round());this.distance+=I.dist(b),this.addCurrentVertex(I,this.distance,E.mult(1),0,0,!1,f,l),b=I}}var P=b&&w,L=P?n:w?y:_;if(P&&"round"===L&&(z<a?L="miter":z<=2&&(L="fakeround")),"miter"===L&&z>r&&(L="bevel"),"bevel"===L&&(z>2&&(L="flipbevel"),z<r&&(L="miter")),b&&(this.distance+=m.dist(b)),"miter"===L)C._mult(z),this.addCurrentVertex(m,this.distance,C,0,0,!1,f,l);else if("flipbevel"===L){if(z>100)C=T.clone().mult(-1);else{var D=E.x*T.y-E.y*T.x>0?-1:1,O=z*E.add(T).mag()/E.sub(T).mag();C._perp()._mult(O*D)}this.addCurrentVertex(m,this.distance,C,0,0,!1,f,l),this.addCurrentVertex(m,this.distance,C.mult(-1),0,0,!1,f,l)}else if("bevel"===L||"fakeround"===L){var B=E.x*T.y-E.y*T.x>0,R=-Math.sqrt(z*z-1);if(B?(v=0,g=R):(g=0,v=R),x||this.addCurrentVertex(m,this.distance,E,g,v,!1,f,l),"fakeround"===L){for(var F=Math.floor(8*(.5-(k-.5))),N=void 0,V=0;V<F;V++)N=T.mult((V+1)/(F+1))._add(E)._unit(),this.addPieSliceVertex(m,this.distance,N,B,f,l);this.addPieSliceVertex(m,this.distance,C,B,f,l);for(var j=F-1;j>=0;j--)N=E.mult((j+1)/(F+1))._add(T)._unit(),this.addPieSliceVertex(m,this.distance,N,B,f,l)}w&&this.addCurrentVertex(m,this.distance,T,-g,-v,!1,f,l)}else"butt"===L?(x||this.addCurrentVertex(m,this.distance,E,0,0,!1,f,l),w&&this.addCurrentVertex(m,this.distance,T,0,0,!1,f,l)):"square"===L?(x||(this.addCurrentVertex(m,this.distance,E,1,1,!1,f,l),this.e1=this.e2=-1),w&&this.addCurrentVertex(m,this.distance,T,-1,-1,!1,f,l)):"round"===L&&(x||(this.addCurrentVertex(m,this.distance,E,0,0,!1,f,l),this.addCurrentVertex(m,this.distance,E,1,1,!0,f,l),this.e1=this.e2=-1),w&&(this.addCurrentVertex(m,this.distance,T,-1,-1,!0,f,l),this.addCurrentVertex(m,this.distance,T,0,0,!1,f,l)));if(A&&S<c-1){var U=m.dist(w);if(U>2*h){var q=m.add(w.sub(m)._mult(h/U)._round());this.distance+=q.dist(m),this.addCurrentVertex(q,this.distance,T.mult(1),0,0,!1,f,l),m=q}}x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,s)}},ns.prototype.addCurrentVertex=function(t,e,n,i,r,a,o,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(e=_n(e,s)),l=n.clone(),i&&l._sub(n.perp()._mult(i)),yn(u,t,l,a,!1,i,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=n.mult(-1),r&&l._sub(n.perp()._mult(r)),yn(u,t,l,a,!0,-r,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>es/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,i,r,a,o))},ns.prototype.addPieSliceVertex=function(t,e,n,i,r,a){n=n.mult(i?-1:1);var o=this.layoutVertexArray,s=this.indexArray;a&&(e=_n(e,a)),yn(o,t,n,!1,i,0,e),this.e3=r.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),r.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},jt("LineBucket",ns,{omit:["layers","features"]});var is=new sa({"line-cap":new na(yi.layout_line["line-cap"]),"line-join":new ia(yi.layout_line["line-join"]),"line-miter-limit":new na(yi.layout_line["line-miter-limit"]),"line-round-limit":new na(yi.layout_line["line-round-limit"])}),rs={paint:new sa({"line-opacity":new ia(yi.paint_line["line-opacity"]),"line-color":new ia(yi.paint_line["line-color"]),"line-translate":new na(yi.paint_line["line-translate"]),"line-translate-anchor":new na(yi.paint_line["line-translate-anchor"]),"line-width":new ia(yi.paint_line["line-width"]),"line-gap-width":new ia(yi.paint_line["line-gap-width"]),"line-offset":new ia(yi.paint_line["line-offset"]),"line-blur":new ia(yi.paint_line["line-blur"]),"line-dasharray":new aa(yi.paint_line["line-dasharray"]),"line-pattern":new ra(yi.paint_line["line-pattern"]),"line-gradient":new oa(yi.paint_line["line-gradient"])}),layout:is},as=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new Xr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,i,r){return n=s({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,i,r)},e}(ia))(rs.paint.properties["line-width"].specification);as.useIntegerZoom=!0;var os=function(t){function e(e){t.call(this,e,rs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Ie(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=as.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new ns(t)},e.prototype.queryRadius=function(t){var e=t,n=xn(de("line-width",this,e),de("line-gap-width",this,e)),i=de("line-offset",this,e);return n/2+Math.abs(i)+fe(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,o){var s=me(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,o),l=o/2*xn(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(i=function(t,e){for(var n=[],i=new ii(0,0),r=0;r<t.length;r++){for(var a=t[r],o=[],s=0;s<a.length;s++){var l=a[s-1],u=a[s],c=a[s+1],p=0===s?i:u.sub(l)._unit()._perp(),h=s===a.length-1?i:c.sub(u)._unit()._perp(),d=p._add(h)._unit(),f=d.x*h.x+d.y*h.y;d._mult(1/f),o.push(d._mult(e)._add(u))}n.push(o)}return n}(i,u*o)),ae(s,i,l)},e}(la),ss=Zt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),ls=Zt([{name:"a_projected_pos",components:3,type:"Float32"}],4),us=(Zt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Zt([{name:"a_placed",components:2,type:"Uint8"}],4)),cs=(Zt([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Zt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ps=Zt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);Zt([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Zt([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),Zt([{type:"Float32",name:"offsetX"}]),Zt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var hs={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},ds=function(t){function e(e,n,i,r){t.call(this,e,n),this.angle=i,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(ii);jt("Anchor",ds);var fs=256,ms=Yo.VectorTileFeature.types,gs=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],vs=function(t){this.layoutVertexArray=new va,this.indexArray=new za,this.programConfigurations=t,this.segments=new Xa,this.dynamicLayoutVertexArray=new ya,this.opacityVertexArray=new _a,this.placedSymbolArray=new Ba};vs.prototype.upload=function(t,e,n,i){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ss.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,ls.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,gs,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t)},vs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},jt("SymbolBuffers",vs);var ys=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Xa,this.collisionVertexArray=new wa};ys.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,us.members,!0)},ys.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},jt("CollisionBuffers",ys);var _s=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=En(this.zoom,e["text-size"]),this.iconSizeData=En(this.zoom,e["icon-size"]);var n=this.layers[0].layout,i="viewport-y"===n.get("symbol-z-order");this.sortFeaturesByY=i&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.sourceID=t.sourceID};_s.prototype.createArrays=function(){this.text=new vs(new po(ss.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new vs(new po(ss.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new ys(ba,cs.members,Aa),this.collisionCircle=new ys(ba,ps.members,za),this.glyphOffsetArray=new Va,this.lineVertexArray=new Ua,this.symbolInstances=new Fa},_s.prototype.calculateGlyphDependencies=function(t,e,n,i){for(var r=0;r<t.length;r++)if(e[t.charCodeAt(r)]=!0,n&&i){var a=hs[t.charAt(r)];a&&(e[a.charCodeAt(0)]=!0)}},_s.prototype.populate=function(t,e){var n=this.layers[0],i=n.layout,r=i.get("text-font"),a=i.get("text-field"),o=i.get("icon-image"),s=("constant"!==a.value.kind||a.value.value.toString().length>0)&&("constant"!==r.value.kind||r.value.value.length>0),l="constant"!==o.value.kind||o.value.value&&o.value.value.length>0;if(this.features=[],s||l){for(var u=e.iconDependencies,c=e.glyphDependencies,p=new Xr(this.zoom),h=0,d=t;h<d.length;h+=1){var f=d[h],m=f.feature,g=f.index,v=f.sourceLayerIndex;if(n._featureFilter(p,m)){var y=void 0;s&&(y=wn(y=n.getValueAndResolveTokens("text-field",m),n,m));var _=void 0;if(l&&(_=n.getValueAndResolveTokens("icon-image",m)),y||_){var x={text:y,icon:_,index:g,sourceLayerIndex:v,geometry:ee(m),properties:m.properties,type:ms[m.type]};if(void 0!==m.id&&(x.id=m.id),this.features.push(x),_&&(u[_]=!0),y){var b=r.evaluate(m,{}).join(","),w=c[b]=c[b]||{},E="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");if(y instanceof Ri)for(var T=0,S=y.sections;T<S.length;T+=1){var C=S[T],k=$t(y.toString()),z=C.fontStack||b,A=c[z]=c[z]||{};this.calculateGlyphDependencies(C.text,A,E,k)}else{var M=$t(y);this.calculateGlyphDependencies(y,w,E,M)}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){function e(e){s.push(t[e]),l++}function n(t,e,n){var i=o[t];return delete o[t],o[e]=i,s[i].geometry[0].pop(),s[i].geometry[0]=s[i].geometry[0].concat(n[0]),i}function i(t,e,n){var i=a[e];return delete a[e],a[t]=i,s[i].geometry[0].shift(),s[i].geometry[0]=n[0].concat(s[i].geometry[0]),i}function r(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var a={},o={},s=[],l=0,u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.text instanceof Ri?c.text.toString():c.text;if(h){var d=r(h,p),f=r(h,p,!0);if(d in o&&f in a&&o[d]!==a[f]){var m=i(d,f,p),g=n(d,f,s[m].geometry);delete a[d],delete o[f],o[r(h,s[g].geometry,!0)]=g,s[m].geometry=null}else d in o?n(d,f,p):f in a?i(d,f,p):(e(u),a[d]=l-1,o[f]=l-1)}else e(u)}return s.filter(function(t){return t.geometry})}(this.features))}},_s.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},_s.prototype.isEmpty=function(){return 0===this.symbolInstances.length},_s.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},_s.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},_s.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},_s.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:i},o<e.length-1&&(i+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=a[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},_s.prototype.addSymbols=function(t,e,n,i,r,a,o,s,l,u){for(var c=t.indexArray,p=t.layoutVertexArray,h=t.dynamicLayoutVertexArray,d=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),f=this.glyphOffsetArray.length,m=d.vertexLength,g=0,v=e;g<v.length;g+=1){var y=v[g],_=y.tl,x=y.tr,b=y.bl,w=y.br,E=y.tex,T=d.vertexLength,S=y.glyphOffset[1];Tn(p,s.x,s.y,_.x,S+_.y,E.x,E.y,n),Tn(p,s.x,s.y,x.x,S+x.y,E.x+E.w,E.y,n),Tn(p,s.x,s.y,b.x,S+b.y,E.x,E.y+E.h,n),Tn(p,s.x,s.y,w.x,S+w.y,E.x+E.w,E.y+E.h,n),Sn(h,s,0),c.emplaceBack(T,T+1,T+2),c.emplaceBack(T+1,T+2,T+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(y.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,f,this.glyphOffsetArray.length-f,m,l,u,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{})},_s.prototype._addCollisionDebugVertex=function(t,e,n,i,r,a){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i,r,Math.round(a.x),Math.round(a.y))},_s.prototype.addCollisionDebugVertices=function(t,e,n,i,r,a,o,s){var l=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),u=l.vertexLength,c=r.layoutVertexArray,p=r.collisionVertexArray,h=o.anchorX,d=o.anchorY;if(this._addCollisionDebugVertex(c,p,a,h,d,new ii(t,e)),this._addCollisionDebugVertex(c,p,a,h,d,new ii(n,e)),this._addCollisionDebugVertex(c,p,a,h,d,new ii(n,i)),this._addCollisionDebugVertex(c,p,a,h,d,new ii(t,i)),l.vertexLength+=4,s){var f=r.indexArray;f.emplaceBack(u,u+1,u+2),f.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var m=r.indexArray;m.emplaceBack(u,u+1),m.emplaceBack(u+1,u+2),m.emplaceBack(u+2,u+3),m.emplaceBack(u+3,u),l.primitiveLength+=4}},_s.prototype.addDebugCollisionBoxes=function(t,e,n){for(var i=t;i<e;i++){var r=this.collisionBoxArray.get(i),a=r.x1,o=r.y1,s=r.x2,l=r.y2,u=r.radius>0;this.addCollisionDebugVertices(a,o,s,l,u?this.collisionCircle:this.collisionBox,r.anchorPoint,n,u)}},_s.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},_s.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,i,r){for(var a={},o=e;o<n;o++){var s=t.get(o);if(0===s.radius){a.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},a.textFeatureIndex=s.featureIndex;break}a.textCircles||(a.textCircles=[],a.textFeatureIndex=s.featureIndex),a.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=i;l<r;l++){var u=t.get(l);if(0===u.radius){a.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},a.iconFeatureIndex=u.featureIndex;break}}return a},_s.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},_s.prototype.hasTextData=function(){return this.text.segments.get().length>0},_s.prototype.hasIconData=function(){return this.icon.segments.get().length>0},_s.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},_s.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},_s.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),n=e.vertexStartIndex+4*e.numGlyphs,i=e.vertexStartIndex;i<n;i+=4)this.text.indexArray.emplaceBack(i,i+1,i+2),this.text.indexArray.emplaceBack(i+1,i+2,i+3)},_s.prototype.sortFeatures=function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var e=[],n=0;n<this.symbolInstances.length;n++)e.push(n);for(var i=Math.sin(t),r=Math.cos(t),a=[],o=[],s=0;s<this.symbolInstances.length;s++){var l=this.symbolInstances.get(s);a.push(0|Math.round(i*l.anchorX+r*l.anchorY)),o.push(l.featureIndex)}e.sort(function(t,e){return a[t]-a[e]||o[e]-o[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var u=0,c=e;u<c.length;u+=1){var p=c[u],h=this.symbolInstances.get(p);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var d=this.icon.placedSymbolArray.get(p);if(d.numGlyphs){var f=d.vertexStartIndex;this.icon.indexArray.emplaceBack(f,f+1,f+2),this.icon.indexArray.emplaceBack(f+1,f+2,f+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},jt("SymbolBucket",_s,{omit:["layers","collisionBoxArray","features","compareText"]}),_s.MAX_GLYPHS=65535,_s.addDynamicAttributes=Sn;var xs=new sa({"symbol-placement":new na(yi.layout_symbol["symbol-placement"]),"symbol-spacing":new na(yi.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new na(yi.layout_symbol["symbol-avoid-edges"]),"symbol-z-order":new na(yi.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new na(yi.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new na(yi.layout_symbol["icon-ignore-placement"]),"icon-optional":new na(yi.layout_symbol["icon-optional"]),"icon-rotation-alignment":new na(yi.layout_symbol["icon-rotation-alignment"]),"icon-size":new ia(yi.layout_symbol["icon-size"]),"icon-text-fit":new na(yi.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new na(yi.layout_symbol["icon-text-fit-padding"]),"icon-image":new ia(yi.layout_symbol["icon-image"]),"icon-rotate":new ia(yi.layout_symbol["icon-rotate"]),"icon-padding":new na(yi.layout_symbol["icon-padding"]),"icon-keep-upright":new na(yi.layout_symbol["icon-keep-upright"]),"icon-offset":new ia(yi.layout_symbol["icon-offset"]),"icon-anchor":new ia(yi.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new na(yi.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new na(yi.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new na(yi.layout_symbol["text-rotation-alignment"]),"text-field":new ia(yi.layout_symbol["text-field"]),"text-font":new ia(yi.layout_symbol["text-font"]),"text-size":new ia(yi.layout_symbol["text-size"]),"text-max-width":new ia(yi.layout_symbol["text-max-width"]),"text-line-height":new na(yi.layout_symbol["text-line-height"]),"text-letter-spacing":new ia(yi.layout_symbol["text-letter-spacing"]),"text-justify":new ia(yi.layout_symbol["text-justify"]),"text-anchor":new ia(yi.layout_symbol["text-anchor"]),"text-max-angle":new na(yi.layout_symbol["text-max-angle"]),"text-rotate":new ia(yi.layout_symbol["text-rotate"]),"text-padding":new na(yi.layout_symbol["text-padding"]),"text-keep-upright":new na(yi.layout_symbol["text-keep-upright"]),"text-transform":new ia(yi.layout_symbol["text-transform"]),"text-offset":new ia(yi.layout_symbol["text-offset"]),"text-allow-overlap":new na(yi.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new na(yi.layout_symbol["text-ignore-placement"]),"text-optional":new na(yi.layout_symbol["text-optional"])}),bs={paint:new sa({"icon-opacity":new ia(yi.paint_symbol["icon-opacity"]),"icon-color":new ia(yi.paint_symbol["icon-color"]),"icon-halo-color":new ia(yi.paint_symbol["icon-halo-color"]),"icon-halo-width":new ia(yi.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ia(yi.paint_symbol["icon-halo-blur"]),"icon-translate":new na(yi.paint_symbol["icon-translate"]),"icon-translate-anchor":new na(yi.paint_symbol["icon-translate-anchor"]),"text-opacity":new ia(yi.paint_symbol["text-opacity"]),"text-color":new ia(yi.paint_symbol["text-color"]),"text-halo-color":new ia(yi.paint_symbol["text-halo-color"]),"text-halo-width":new ia(yi.paint_symbol["text-halo-width"]),"text-halo-blur":new ia(yi.paint_symbol["text-halo-blur"]),"text-translate":new na(yi.paint_symbol["text-translate"]),"text-translate-anchor":new na(yi.paint_symbol["text-translate-anchor"])}),layout:xs},ws=function(t){function e(e){t.call(this,e,bs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,i=this.layout.get(t).evaluate(e,{}),r=this._unevaluatedLayout._values[t];return r.isDataDriven()||lt(r.value)?i:(n=e.properties,i.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new _s(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(la),Es={paint:new sa({"background-color":new na(yi.paint_background["background-color"]),"background-pattern":new aa(yi.paint_background["background-pattern"]),"background-opacity":new na(yi.paint_background["background-opacity"])})},Ts=function(t){function e(e){t.call(this,e,Es)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(la),Ss={paint:new sa({"raster-opacity":new na(yi.paint_raster["raster-opacity"]),"raster-hue-rotate":new na(yi.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new na(yi.paint_raster["raster-brightness-min"]),"raster-brightness-max":new na(yi.paint_raster["raster-brightness-max"]),"raster-saturation":new na(yi.paint_raster["raster-saturation"]),"raster-contrast":new na(yi.paint_raster["raster-contrast"]),"raster-resampling":new na(yi.paint_raster["raster-resampling"]),"raster-fade-duration":new na(yi.paint_raster["raster-fade-duration"])})},Cs={circle:Eo,heatmap:zo,hillshade:Mo,fill:No,"fill-extrusion":Go,line:os,symbol:ws,background:Ts,raster:function(t){function e(e){t.call(this,e,Ss)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(la)},ks=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},zs={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};zs.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},zs.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},zs.tlbr.get=function(){return this.tl.concat(this.br)},zs.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ks.prototype,zs);var As=function(t,e){var n={},i={},r=[];for(var a in t){var o=t[a],s={x:0,y:0,w:o.data.width+2,h:o.data.height+2};r.push(s),n[a]=new ks(s,o)}for(var l in e){var u=e[l],c={x:0,y:0,w:u.data.width+2,h:u.data.height+2};r.push(c),i[l]=new ks(c,u)}var p=Cn(r),h=p.w,d=p.h,f=new Co({width:h||1,height:d||1});for(var m in t){var g=t[m],v=n[m].paddedRect;Co.copy(g.data,f,{x:0,y:0},{x:v.x+1,y:v.y+1},g.data)}for(var y in e){var _=e[y],x=i[y].paddedRect,b=x.x+1,w=x.y+1,E=_.data.width,T=_.data.height;Co.copy(_.data,f,{x:0,y:0},{x:b,y:w},_.data),Co.copy(_.data,f,{x:0,y:T-1},{x:b,y:w-1},{width:E,height:1}),Co.copy(_.data,f,{x:0,y:0},{x:b,y:w+T},{width:E,height:1}),Co.copy(_.data,f,{x:E-1,y:0},{x:b-1,y:w},{width:1,height:T}),Co.copy(_.data,f,{x:0,y:0},{x:b+E,y:w},{width:1,height:T})}this.image=f,this.iconPositions=n,this.patternPositions=i};jt("ImagePosition",ks),jt("ImageAtlas",As);var Ms=self.HTMLImageElement,Is=self.HTMLCanvasElement,Ps=self.HTMLVideoElement,Ls=self.ImageData,Ds=function(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)};Ds.prototype.update=function(t,e){var n=t.width,i=t.height,r=!this.size||this.size[0]!==n||this.size[1]!==i,a=this.context,o=a.gl;this.useMipmap=Boolean(e&&e.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),r?(this.size=[n,i],a.pixelStoreUnpack.set(1),this.format!==o.RGBA||e&&!1===e.premultiply||a.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof Ms||t instanceof Is||t instanceof Ps||t instanceof Ls?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,n,i,0,this.format,o.UNSIGNED_BYTE,t.data)):t instanceof Ms||t instanceof Is||t instanceof Ps||t instanceof Ls?o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,0,0,n,i,o.RGBA,o.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)},Ds.prototype.bind=function(t,e,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},Ds.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ds.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Os=function(t,e,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?r-1:0,h=n?-1:1,d=t[e+p];for(p+=h,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+p],p+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+t[e+p],p+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),a-=u}return(d?-1:1)*o*Math.pow(2,a-i)},Bs=function(t,e,n,i,r,a){var o,s,l,u=8*a-r-1,c=(1<<u)-1,p=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(o++,l/=2),o+p>=c?(s=0,o=c):o+p>=1?(s=(e*l-1)*Math.pow(2,r),o+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&s,d+=f,s/=256,r-=8);for(o=o<<r|s,u+=r;u>0;t[n+d]=255&o,d+=f,o/=256,u-=8);t[n+d-f]|=128*m},Rs=kn;kn.Varint=0,kn.Fixed64=1,kn.Bytes=2,kn.Fixed32=5,kn.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,a=this.pos;this.type=7&i,t(r,e,this),this.pos===a&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Vn(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Un(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Vn(this.buf,this.pos)+4294967296*Vn(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Vn(this.buf,this.pos)+4294967296*Un(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Os(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Os(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,a=n.buf;if(r=a[n.pos++],i=(112&r)>>4,r<128)return An(t,i,e);if(r=a[n.pos++],i|=(127&r)<<3,r<128)return An(t,i,e);if(r=a[n.pos++],i|=(127&r)<<10,r<128)return An(t,i,e);if(r=a[n.pos++],i|=(127&r)<<17,r<128)return An(t,i,e);if(r=a[n.pos++],i|=(127&r)<<24,r<128)return An(t,i,e);if(r=a[n.pos++],i|=(1&r)<<31,r<128)return An(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var i="",r=e;r<n;){var a,o,s,l=t[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(a=t[r+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(a=t[r+1],o=t[r+2],128==(192&a)&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[r+1],o=t[r+2],s=t[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),r+=c}return i}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=zn(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=zn(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=zn(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=zn(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=zn(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=zn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=zn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=zn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=zn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===kn.Varint)for(;this.buf[this.pos++]>127;);else if(e===kn.Bytes)this.pos=this.readVarint()+this.pos;else if(e===kn.Fixed32)this.pos+=4;else{if(e!==kn.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),jn(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),jn(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),jn(this.buf,-1&t,this.pos),jn(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),jn(this.buf,-1&t,this.pos),jn(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,a=0;a<e.length;a++){if((i=e.charCodeAt(a))>55295&&i<57344){if(!r){i>56319||a+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Mn(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Bs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Bs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Mn(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,kn.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,In,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Pn,e)},writePackedBoolean:function(t,e){this.writeMessage(t,On,e)},writePackedFloat:function(t,e){this.writeMessage(t,Ln,e)},writePackedDouble:function(t,e){this.writeMessage(t,Dn,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Bn,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Rn,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Fn,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,Nn,e)},writeBytesField:function(t,e){this.writeTag(t,kn.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,kn.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,kn.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,kn.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,kn.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,kn.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,kn.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,kn.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,kn.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,kn.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Fs=3,Ns=Fs,Vs=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,u(["receive"],this),this.target.addEventListener("message",this.receive,!1)};Vs.prototype.send=function(t,e,n,i){var r=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[r]=n);var a=[];this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(r),data:Ut(e,a)},a)},Vs.prototype.receive=function(t){var e,n=this,i=t.data,r=i.id;if(!i.targetMapId||this.mapId===i.targetMapId){var a=function(t,e){var i=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(r),error:t?Ut(t):null,data:Ut(e,i)},i)};if("<response>"===i.type)e=this.callbacks[i.id],delete this.callbacks[i.id],e&&i.error?e(qt(i.error)):e&&e(null,qt(i.data));else if(void 0!==i.id&&this.parent[i.type])this.parent[i.type](i.sourceMapId,qt(i.data),a);else if(void 0!==i.id&&this.parent.getWorkerSource){var o=i.type.split("."),s=qt(i.data);this.parent.getWorkerSource(i.sourceMapId,o[0],s.source)[o[1]](s,a)}else this.parent[i.type](qt(i.data))}},Vs.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var js=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Xn(0,t,e,n)};js.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},js.prototype.url=function(t,e){var n,i,r,a,o,s=(n=this.x,i=this.y,r=this.z,a=Hn(256*n,256*(i=Math.pow(2,r)-i-1),r),o=Hn(256*(n+1),256*(i+1),r),a[0]+","+a[1]+","+o[0]+","+o[1]),l=function(t,e,n){for(var i,r="",a=t;a>0;a--)r+=(e&(i=1<<a-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)};var Us=function(t,e){this.wrap=t,this.canonical=e,this.key=Xn(t,e.z,e.x,e.y)},qs=function(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new js(n,+i,+r),this.key=Xn(e,t,i,r)};qs.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},qs.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new qs(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qs(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},qs.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},qs.prototype.children=function(t){if(this.overscaledZ>=t)return[new qs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new qs(e,this.wrap,e,n,i),new qs(e,this.wrap,e,n+1,i),new qs(e,this.wrap,e,n,i+1),new qs(e,this.wrap,e,n+1,i+1)]},qs.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},qs.prototype.wrapped=function(){return new qs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},qs.prototype.unwrapTo=function(t){return new qs(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},qs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},qs.prototype.toUnwrapped=function(){return new Us(this.wrap,this.canonical)},qs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},qs.prototype.toCoordinate=function(){return new ni(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},jt("CanonicalTileID",js),jt("OverscaledTileID",qs,{omit:["posMatrix"]});var $s=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return f('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var i=this.dim=e.height;this.border=Math.max(Math.ceil(e.height/2),1),this.stride=this.dim+2*this.border,this.data=new Int32Array(this.stride*this.stride);for(var r=e.data,a="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,o=0;o<i;o++)for(var s=0;s<i;s++){var l=4*(o*i+s);this.set(s,o,a(r[l],r[l+1],r[l+2]))}for(var u=0;u<i;u++)this.set(-1,u,this.get(0,u)),this.set(i,u,this.get(i-1,u)),this.set(u,-1,this.get(u,0)),this.set(u,i,this.get(u,i-1));this.set(-1,-1,this.get(0,0)),this.set(i,-1,this.get(i-1,0)),this.set(-1,i,this.get(0,i-1)),this.set(i,i,this.get(i-1,i-1))};$s.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},$s.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},$s.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},$s.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},$s.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},$s.prototype.getPixels=function(){return new Co({width:this.dim+2*this.border,height:this.dim+2*this.border},new Uint8Array(this.data.buffer))},$s.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,r=e*this.dim+this.dim,a=n*this.dim,s=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:a=s-1;break;case 1:s=a+1}for(var l=o(i,-this.border,this.dim+this.border),u=o(r,-this.border,this.dim+this.border),c=o(a,-this.border,this.dim+this.border),p=o(s,-this.border,this.dim+this.border),h=-e*this.dim,d=-n*this.dim,f=c;f<p;f++)for(var m=l;m<u;m++)this.set(m,f,t.get(m+h,f+d))},jt("DEMData",$s);var Gs=Zt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Hs=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Hs.prototype.encode=function(t){return this._stringToNumber[t]},Hs.prototype.decode=function(t){return this._numberToString[t]};var Xs=function(t,e,n,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Ws={geometry:{configurable:!0}};Ws.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ws.geometry.set=function(t){this._geometry=t},Xs.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Xs.prototype,Ws);var Zs=function(){this.state={},this.stateChanges={}};Zs.prototype.updateState=function(t,e,n){var i=String(e);this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},s(this.stateChanges[t][i],n)},Zs.prototype.getState=function(t,e){var n=String(e),i=this.state[t]||{},r=this.stateChanges[t]||{};return s({},i[n],r[n])},Zs.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Zs.prototype.coalesceChanges=function(t,e){var n={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var r={};for(var a in this.stateChanges[i])this.state[i][a]||(this.state[i][a]={}),s(this.state[i][a],this.stateChanges[i][a]),r[a]=this.state[i][a];n[i]=r}if(this.stateChanges={},0!==Object.keys(n).length)for(var o in t)t[o].setFeatureState(n,e)};var Ys=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new Dr(fo,16,0),this.featureIndexArray=n||new $a};Ys.prototype.insert=function(t,e,n,i,r){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);for(var o=0;o<e.length;o++){for(var s=e[o],l=[1/0,1/0,-1/0,-1/0],u=0;u<s.length;u++){var c=s[u];l[0]=Math.min(l[0],c.x),l[1]=Math.min(l[1],c.y),l[2]=Math.max(l[2],c.x),l[3]=Math.max(l[3],c.y)}l[0]<fo&&l[1]<fo&&l[2]>=0&&l[3]>=0&&this.grid.insert(a,l[0],l[1],l[2],l[3])}},Ys.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Yo.VectorTile(new Rs(this.rawTileData)).layers,this.sourceLayerCoder=new Hs(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ys.prototype.query=function(t,e,n){var i=this;this.loadVTLayers();for(var r=t.params||{},a=fo/t.tileSize/t.scale,o=_t(r.filter),s=t.queryGeometry,l=t.queryPadding*a,u=1/0,c=1/0,p=-1/0,h=-1/0,d=0;d<s.length;d++)for(var f=s[d],m=0;m<f.length;m++){var g=f[m];u=Math.min(u,g.x),c=Math.min(c,g.y),p=Math.max(p,g.x),h=Math.max(h,g.y)}var v=this.grid.query(u-l,c-l,p+l,h+l);v.sort(Wn);for(var y,_={},x=function(l){var u=v[l];if(u!==y){y=u;var c=i.featureIndexArray.get(u),p=null;i.loadMatchingFeature(_,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,o,r.layers,e,function(e,r){p||(p=ee(e));var o={};return e.id&&(o=n.getState(r.sourceLayer||"_geojsonTileLayer",e.id)),r.queryIntersectsFeature(s,e,o,p,i.z,t.transform,a,t.posMatrix)})}},b=0;b<v.length;b++)x(b);return _},Ys.prototype.loadMatchingFeature=function(t,e,n,i,r,a,o,s){var l=this.bucketLayerIDs[e];if(!a||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(a,l)){var u=this.sourceLayerCoder.decode(n),c=this.vtLayers[u].feature(i);if(r(new Xr(this.tileID.overscaledZ),c))for(var p=0;p<l.length;p++){var h=l[p];if(!(a&&a.indexOf(h)<0)){var d=o[h];if(d&&(!s||s(c,d))){var f=new Xs(c,this.z,this.x,this.y);f.layer=d.serialize();var m=t[h];void 0===m&&(m=t[h]=[]),m.push({featureIndex:i,feature:f})}}}}},Ys.prototype.lookupSymbolFeatures=function(t,e,n,i,r,a){var o={};this.loadVTLayers();for(var s=_t(i),l=0,u=t;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(o,e,n,c,s,r,a)}return o},Ys.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var i=0,r=n[e];i<r.length;i+=1)if(t===r[i])return!0;return!1},jt("FeatureIndex",Ys,{omit:["rawTileData","sourceLayerCoder"]});var Ks=function(t,e){this.tileID=t,this.uid=l(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};Ks.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<ci.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Ks.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ks.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var i=0,r=t;i<r.length;i+=1){var a=r[i],o=a.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==o.length){a.layers=o,a.stateDependentLayers=o.filter(function(t){return t.isStateDependent()});for(var s=0,l=o;s<l.length;s+=1)n[l[s].id]=a}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[i];if(r instanceof _s){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(o))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Da},Ks.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ks.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Ks.prototype.getBucket=function(t){return this.buckets[t.id]},Ks.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ds(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ds(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},Ks.prototype.queryRenderedFeatures=function(t,e,n,i,r,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,scale:i,tileSize:this.tileSize,posMatrix:s,transform:a,params:r,queryPadding:this.queryPadding*o},t,e):{}},Ks.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),i=e?e.sourceLayer:"",r=n._geojsonTileLayer||n[i];if(r)for(var a=_t(e&&e.filter),o=this.tileID.canonical,s=o.z,l=o.x,u=o.y,c={z:s,x:l,y:u},p=0;p<r.length;p++){var h=r.feature(p);if(a(new Xr(this.tileID.overscaledZ),h)){var d=new Xs(h,s,l,u);d.tile=c,t.push(d)}}}},Ks.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Ks.prototype.setMask=function(t,e){if(!r(this.mask,t)&&(this.mask=t,this.clearMask(),!r(t,{0:!0}))){var n=new da,i=new za;this.segments=new Xa,this.segments.prepareSegment(0,n,i);for(var a=Object.keys(t),o=0;o<a.length;o++){var s=t[a[o]],l=fo>>s.z,u=new ii(s.x*l,s.y*l),c=new ii(u.x+l,u.y+l),p=this.segments.prepareSegment(4,n,i);n.emplaceBack(u.x,u.y,u.x,u.y),n.emplaceBack(c.x,u.y,c.x,u.y),n.emplaceBack(u.x,c.y,u.x,c.y),n.emplaceBack(c.x,c.y,c.x,c.y);var h=p.vertexLength;i.emplaceBack(h,h+1,h+2),i.emplaceBack(h+1,h+2,h+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,Gs.members),this.maskedIndexBuffer=e.createIndexBuffer(i)}},Ks.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ks.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ks.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,i,r){var a=i||r;return e[n]=!a||a.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),r=!1;if(this.expirationTime>i)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{var a=this.expirationTime-e;a?this.expirationTime=i+Math.max(a,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ks.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ks.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets){var r=this.buckets[i],a=r.layers[0].sourceLayer||"_geojsonTileLayer",o=n[a],s=t[a];o&&s&&0!==Object.keys(s).length&&(r.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i).queryRadius(r))))}}},Ks.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ks.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ci.now()},Ks.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ks.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=ci.now()+t};var Js={horizontal:1,vertical:2,horizontalOnly:3},Qs=function(){this.text="",this.sectionIndex=[],this.sections=[]};Qs.fromFeature=function(t,e){var n=new Qs;if(t instanceof Ri)for(var i=0;i<t.sections.length;i++){var r=t.sections[i];n.sections.push({scale:r.scale||1,fontStack:r.fontStack||e}),n.text+=r.text;for(var a=0;a<r.text.length;a++)n.sectionIndex.push(i)}else{n.text=t,n.sections.push({scale:1,fontStack:e});for(var o=0;o<t.length;o++)n.sectionIndex.push(0)}return n},Qs.prototype.length=function(){return this.text.length},Qs.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Qs.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Qs.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n+1)||null,r=t.charCodeAt(n-1)||null;i&&Xt(i)&&!hs[t[n+1]]||r&&Xt(r)&&!hs[t[n-1]]||!hs[t[n]]?e+=t[n]:e+=hs[t[n]]}return e}(this.text)},Qs.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&tl[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,i=this.text.length-1;i>=0&&i>=t&&tl[this.text.charCodeAt(i)];i--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},Qs.prototype.substring=function(t,e){var n=new Qs;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},Qs.prototype.toString=function(){return this.text},Qs.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)};var tl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},el={};el[10]=!0,el[32]=!0,el[38]=!0,el[40]=!0,el[41]=!0,el[43]=!0,el[45]=!0,el[47]=!0,el[173]=!0,el[183]=!0,el[8203]=!0,el[8208]=!0,el[8211]=!0,el[8231]=!0,t.createCommonjsModule=e,t.Point=ii,t.window=self,t.browser=ci,t.uuid=function(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()},t.validateUuid=function(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},t.storageAvailable=function(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}},t.warnOnce=f,t.postData=function(t,e,n){var i=v(s(t,{method:"POST"}));return i.onerror=function(){n(new Error(i.statusText))},i.onload=function(){i.status>=200&&i.status<300?n(null,i.response):n(new di(i.statusText,i.status,t.url))},i.send(e),{cancel:function(){return i.abort()}}},t.getJSON=function(t,e){var n=v(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&n.response){var i;try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i)}else e(401===n.status&&t.url.match(/mapbox.com/)?new di(n.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",n.status,t.url):new di(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},t.getImage=function(t,e){return fi(t,function(t,n){if(t)e(t);else if(n){var i=new self.Image,r=self.URL||self.webkitURL;i.onload=function(){e(null,i),r.revokeObjectURL(i.src)};var a=new self.Blob([new Uint8Array(n.data)],{type:"image/png"});i.cacheControl=n.cacheControl,i.expires=n.expires,i.src=n.data.byteLength?r.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},t.ResourceType=hi,t.RGBAImage=Co,t.potpack=Cn,t.ImagePosition=ks,t.Texture=Ds,t.getArrayBuffer=fi,t.parseGlyphPBF=function(t){return new Rs(t).readFields(qn,[])},t.isChar=jr,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),a=null;t.forEach(function(t,o){e(t,function(t,e){t&&(a=t),r[o]=e,0==--i&&n(a,r)})})},t.AlphaImage=So,t.styleSpec=yi,t.endsWith=c,t.extend=s,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(i),y:e*Math.sin(n)*Math.sin(i),z:e*Math.cos(i)}},t.Evented=vi,t.validateStyle=Mr,t.validateLight=Ir,t.emitValidationErrors=Nt,t.Color=Li,t.number=L,t.Properties=sa,t.Transitionable=Yr,t.Transitioning=Jr,t.PossiblyEvaluated=ea,t.DataConstantProperty=na,t.uniqueId=l,t.Actor=Vs,t.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n},t.wrap=function(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r},t.clamp=o,t.Event=mi,t.ErrorEvent=gi,t.OverscaledTileID=qs,t.EXTENT=fo,t.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,a=0;a<t.length;a++)e=Math.min(e,t[a].column),n=Math.min(n,t[a].row),i=Math.max(i,t[a].column),r=Math.max(r,t[a].row);var o=i-e,s=r-n,l=Math.max(o,s),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new ni((e+i)/2,(n+r)/2,0).zoomTo(u)},t.CanonicalTileID=js,t.StructArrayLayout4i8=da,t.rasterBoundsAttributes=Gs,t.SegmentVector=Xa,t.getVideo=function(t,e){var n,i,r=self.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var a=0;a<t.length;a++){var o=self.document.createElement("source");n=t[a],i=void 0,(i=self.document.createElement("a")).href=n,(i.protocol!==self.document.location.protocol||i.host!==self.document.location.host)&&(r.crossOrigin="Anonymous"),o.src=t[a],r.appendChild(o)}return{cancel:function(){}}},t.ValidationError=_i,t.bindAll=u,t.deepEqual=r,t.Tile=Ks,t.Coordinate=ni,t.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},t.SourceFeatureState=Zs,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.create=function(){var t=new yo(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],p=e[9],h=e[10],d=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=n*s-i*o,_=n*l-r*o,x=n*u-a*o,b=i*l-r*s,w=i*u-a*s,E=r*u-a*l,T=c*m-p*f,S=c*g-h*f,C=c*v-d*f,k=p*g-h*m,z=p*v-d*m,A=h*v-d*g,M=y*A-_*z+x*k+b*C-w*S+E*T;return M?(M=1/M,t[0]=(s*A-l*z+u*k)*M,t[1]=(r*z-i*A-a*k)*M,t[2]=(m*E-g*w+v*b)*M,t[3]=(h*w-p*E-d*b)*M,t[4]=(l*C-o*A-u*S)*M,t[5]=(n*A-r*C+a*S)*M,t[6]=(g*x-f*E-v*_)*M,t[7]=(c*E-h*x+d*_)*M,t[8]=(o*z-s*C+u*T)*M,t[9]=(i*C-n*z-a*T)*M,t[10]=(f*w-m*x+v*y)*M,t[11]=(p*x-c*w-d*y)*M,t[12]=(s*S-o*k-l*T)*M,t[13]=(n*k-i*S+r*T)*M,t[14]=(m*_-f*b-g*y)*M,t[15]=(c*b-p*_+h*y)*M,t):null},t.multiply=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],m=e[12],g=e[13],v=e[14],y=e[15],_=n[0],x=n[1],b=n[2],w=n[3];return t[0]=_*i+x*s+b*p+w*m,t[1]=_*r+x*l+b*h+w*g,t[2]=_*a+x*u+b*d+w*v,t[3]=_*o+x*c+b*f+w*y,_=n[4],x=n[5],b=n[6],w=n[7],t[4]=_*i+x*s+b*p+w*m,t[5]=_*r+x*l+b*h+w*g,t[6]=_*a+x*u+b*d+w*v,t[7]=_*o+x*c+b*f+w*y,_=n[8],x=n[9],b=n[10],w=n[11],t[8]=_*i+x*s+b*p+w*m,t[9]=_*r+x*l+b*h+w*g,t[10]=_*a+x*u+b*d+w*v,t[11]=_*o+x*c+b*f+w*y,_=n[12],x=n[13],b=n[14],w=n[15],t[12]=_*i+x*s+b*p+w*m,t[13]=_*r+x*l+b*h+w*g,t[14]=_*a+x*u+b*d+w*v,t[15]=_*o+x*c+b*f+w*y,t},t.translate=function(t,e,n){var i,r,a,o,s,l,u,c,p,h,d,f,m=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=p,t[9]=h,t[10]=d,t[11]=f,t[12]=i*m+s*g+p*v+e[12],t[13]=r*m+l*g+h*v+e[13],t[14]=a*m+u*g+d*v+e[14],t[15]=o*m+c*g+f*v+e[15]),t},t.scale=function(t,e,n){var i=n[0],r=n[1],a=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+u*i,t[5]=o*r+c*i,t[6]=s*r+p*i,t[7]=l*r+h*i,t[8]=u*r-a*i,t[9]=c*r-o*i,t[10]=p*r-s*i,t[11]=h*r-l*i,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+u*i,t[1]=o*r+c*i,t[2]=s*r+p*i,t[3]=l*r+h*i,t[4]=u*r-a*i,t[5]=c*r-o*i,t[6]=p*r-s*i,t[7]=h*r-l*i,t},t.perspective=function(t,e,n,i,r){var a=1/Math.tan(e/2),o=1/(i-r);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*o,t[15]=0,t},t.ortho=function(t,e,n,i,r,a,o){var s=1/(e-n),l=1/(i-r),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(o+a)*u,t[15]=1,t},t.create$1=Ee,t.normalize=Te,t.transformMat4=Se,t.forEach=wo,t.getSizeData=En,t.evaluateSizeForFeature=function(t,e,n){var i=e;return"source"===t.functionType?n.lowerSize/fs:"composite"===t.functionType?L(n.lowerSize/fs,n.upperSize/fs,i.uSizeT):i.uSize},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var i=t.propertyValue,r=t.zoomRange,a=t.sizeRange,s=o(pt(i,n.specification).interpolationFactor(e,r.min,r.max),0,1);return{uSizeT:0,uSize:a.min+s*(a.max-a.min)}}var l=t.propertyValue,u=t.zoomRange;return{uSizeT:o(pt(l,n.specification).interpolationFactor(e,u.min,u.max),0,1),uSize:0}},t.SIZE_PACK_FACTOR=fs,t.addDynamicAttributes=Sn,t.properties=bs,t.WritingMode=Js,t.multiPolygonIntersectsBufferedPoint=ie,t.multiPolygonIntersectsMultiPolygon=re,t.multiPolygonIntersectsBufferedMultiLine=ae,t.polygonIntersectsPolygon=function(t,e){for(var n=0;n<t.length;n++)if(he(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(he(t,e[i]))return!0;return!!se(t,e)},t.distToSegmentSquared=ce,t.SymbolInstanceArray=Fa,t.StyleLayer=la,t.createStyleLayer=function(t){return new Cs[t.type](t)},t.clone=d,t.filterObject=h,t.mapObject=p,t.registerForPluginAvailability=function(t){return qr?t({pluginURL:qr,completionCallback:Vr}):Gr.once("pluginAvailable",t),t},t.evented=Gr,t.ZoomHistory=Nr,t.createLayout=Zt,t.ProgramConfiguration=co,t.Uniform1i=Ka,t.Uniform1f=Ja,t.Uniform2f=Qa,t.Uniform4f=eo,t.Uniform3f=to,t.UniformMatrix4f=ro,t.create$2=ge,t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.create$3=ve,t.length=ye,t.fromValues=_e,t.normalize$1=xe,t.dot=be,t.cross=we,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],a=e[2];return t[0]=i*n[0]+r*n[3]+a*n[6],t[1]=i*n[1]+r*n[4]+a*n[7],t[2]=i*n[2]+r*n[5]+a*n[8],t},t.len=xo,t.forEach$1=bo,t.UniformColor=no,t.StructArrayLayout2i4=ha,t.StructArrayLayout2ui4=Aa,t.StructArrayLayout3ui6=za,t.StructArrayLayout1ui2=Ma,t.UnwrappedTileID=Us,t.create$4=function(){var t=new yo(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},t.rotate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+a*s,t[1]=r*l+o*s,t[2]=i*-s+a*l,t[3]=r*-s+o*l,t},t.ease=ri,t.bezier=a,t.EvaluationParameters=Xr,t.setRTLTextPlugin=function(t,e){if(Ur)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ur=!0,qr=ci.resolveURL(t),Vr=function(t){t?(Ur=!1,qr=null,e&&e(t)):$r=!0},Gr.fire(new mi("pluginAvailable",{pluginURL:qr,completionCallback:Vr}))},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.featureFilter=_t,t.Anchor=ds,t.GLYPH_PBF_BORDER=Ns,t.shapeText=function(t,e,n,i,r,a,o,s,l,u,c){var p=Qs.fromFeature(t,n);c===Js.vertical&&p.verticalizePunctuation();var h,d=[],f={positionedGlyphs:d,text:p,top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:c},m=Hr.processBidirectionalText,g=Hr.processStyledBidirectionalText;if(m&&1===p.sections.length){h=[];for(var v=0,y=m(p.toString(),Jn(p,s,i,e));v<y.length;v+=1){var _=y[v],x=new Qs;x.text=_,x.sections=p.sections;for(var b=0;b<_.length;b++)x.sectionIndex.push(0);h.push(x)}}else if(g){h=[];for(var w=0,E=g(p.text,p.sectionIndex,Jn(p,s,i,e));w<E.length;w+=1){var T=E[w],S=new Qs;S.text=T[0],S.sectionIndex=T[1],S.sections=p.sections,h.push(S)}}else h=function(t,e){for(var n=[],i=t.text,r=0,a=0,o=e;a<o.length;a+=1){var s=o[a];n.push(t.substring(r,s)),r=s}return r<i.length&&n.push(t.substring(r,i.length)),n}(p,Jn(p,s,i,e));return function(t,e,n,i,r,a,o,s,l){for(var u=0,c=-17,p=0,h=t.positionedGlyphs,d="right"===a?1:"left"===a?0:.5,f=0,m=n;f<m.length;f+=1){var g=m[f];g.trim();var v=g.getMaxScale();if(g.length()){for(var y=h.length,_=0;_<g.length();_++){var x=g.getSection(_),b=g.getCharCode(_),w=24*(v-x.scale),E=e[x.fontStack],T=E&&E[b];T&&(Ht(b)&&o!==Js.horizontal?(h.push({glyph:b,x:u,y:w,vertical:!0,scale:x.scale,fontStack:x.fontStack}),u+=l*x.scale+s):(h.push({glyph:b,x:u,y:c+w,vertical:!1,scale:x.scale,fontStack:x.fontStack}),u+=T.metrics.advance*x.scale+s))}if(h.length!==y){var S=u-s;p=Math.max(S,p),ti(h,e,y,h.length-1,d)}u=0,c+=i*v}else c+=i}var C=Qn(r),k=C.horizontalAlign,z=C.verticalAlign;!function(t,e,n,i,r,a,o){for(var s=(e-n)*r,l=(-i*o+.5)*a,u=0;u<t.length;u++)t[u].x+=s,t[u].y+=l}(h,d,k,z,p,i,n.length);var A=c- -17;t.top+=-z*A,t.bottom=t.top+A,t.left+=-k*p,t.right=t.left+p}(f,e,h,r,a,o,c,s,u),!!d.length&&(f.text=f.text.toString(),f)},t.shapeIcon=function(t,e,n){var i=Qn(n),r=i.horizontalAlign,a=i.verticalAlign,o=e[0],s=e[1],l=o-t.displaySize[0]*r,u=l+t.displaySize[0],c=s-t.displaySize[1]*a;return{image:t,top:c,bottom:c+t.displaySize[1],left:l,right:u}},t.allowsVerticalWritingMode=$t,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!Gt(n[e].charCodeAt(0)))return!1;return!0},t.classifyRings=an,t.SymbolBucket=_s,t.Formatted=Ri,t.register=jt,t.FeatureIndex=Ys,t.CollisionBoxArray=Da,t.DictionaryCoder=Hs,t.LineBucket=ns,t.FillBucket=Ro,t.FillExtrusionBucket=qo,t.ImageAtlas=As,t.mvt=Yo,t.Protobuf=Rs,t.DEMData=$s,t.vectorTile=Yo,t.Point$1=ii,t.pbf=Rs,t.plugin=Hr}),t(["./shared.js"],function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",r=0,a=t;r<a.length;r+=1)i+=e(a[r])+",";return i+"]"}for(var o=Object.keys(t).sort(),s="{",l=0;l<o.length;l++)s+=JSON.stringify(o[l])+":"+e(t[o[l]])+",";return s+"}"}function n(n){for(var i="",r=0,a=t.refProperties;r<a.length;r+=1)i+="/"+e(n[a[r]]);return i}function i(t,e,n,i,r){if(void 0===e.segment)return!0;for(var a=e,o=e.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=t[o].dist(a),a=t[o]}s+=t[o].dist(t[o+1]),o++;for(var l=[],u=0;s<n/2;){var c=t[o-1],p=t[o],h=t[o+1];if(!h)return!1;var d=c.angleTo(p)-p.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),u+=d;s-l[0].distance>i;)u-=l.shift().angleDelta;if(u>r)return!1;o++,s+=p.dist(h)}return!0}function r(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function a(t,e,n){return t?.6*e*n:0}function o(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function s(e,n,s,l,u,c){for(var p=a(s,u,c),h=o(s,l)*c,d=0,f=r(e)/2,m=0;m<e.length-1;m++){var g=e[m],v=e[m+1],y=g.dist(v);if(d+y>f){var _=(f-d)/y,x=t.number(g.x,v.x,_),b=t.number(g.y,v.y,_),w=new t.Anchor(x,b,v.angleTo(g),m);return w._round(),!p||i(e,w,h,p,n)?w:void 0}d+=y}}function l(e,n,s,l,u,c,p,h,d){var f=a(l,c,p),m=o(l,u),g=m*p,v=0===e[0].x||e[0].x===d||0===e[0].y||e[0].y===d;return n-g<n/4&&(n=g+n/4),function e(n,a,o,s,l,u,c,p,h){for(var d=u/2,f=r(n),m=0,g=a-o,v=[],y=0;y<n.length-1;y++){for(var _=n[y],x=n[y+1],b=_.dist(x),w=x.angleTo(_);g+o<m+b;){var E=((g+=o)-m)/b,T=t.number(_.x,x.x,E),S=t.number(_.y,x.y,E);if(T>=0&&T<h&&S>=0&&S<h&&g-d>=0&&g+d<=f){var C=new t.Anchor(T,S,w,y);C._round(),s&&!i(n,C,u,s,l)||v.push(C)}}m+=b}return p||v.length||c||(v=e(n,m/2,o,s,l,u,c,!0,h)),v}(e,v?n/2*h%n:(m/2+2*c)*p*h%n,n,f,s,g,v,!1,d)}function u(t,e){if(!(this instanceof u))return new u(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||c,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function c(t,e){return t<e?-1:t>e?1:0}function p(e,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);for(var r=1/0,a=1/0,o=-1/0,s=-1/0,l=e[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<a)&&(a=c.y),(!u||c.x>o)&&(o=c.x),(!u||c.y>s)&&(s=c.y)}var p=o-r,f=s-a,m=Math.min(p,f),g=m/2,v=new zt(null,h);if(0===m)return new t.Point(r,a);for(var y=r;y<o;y+=m)for(var _=a;_<s;_+=m)v.push(new d(y+g,_+g,g,e));for(var x=function(t){for(var e=0,n=0,i=0,r=t[0],a=0,o=r.length,s=o-1;a<o;s=a++){var l=r[a],u=r[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,i+=(l.y+u.y)*c,e+=3*c}return new d(n/e,i/e,0,t)}(e),b=v.length;v.length;){var w=v.pop();(w.d>x.d||!x.d)&&(x=w,i&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,b)),w.max-x.d<=n||(g=w.h/2,v.push(new d(w.p.x-g,w.p.y-g,g,e)),v.push(new d(w.p.x+g,w.p.y-g,g,e)),v.push(new d(w.p.x-g,w.p.y+g,g,e)),v.push(new d(w.p.x+g,w.p.y+g,g,e)),b+=4)}return i&&(console.log("num probes: "+b),console.log("best distance: "+x.d)),x.p}function h(t,e){return e.max-t.max}function d(e,n,i,r){this.p=new t.Point(e,n),this.h=i,this.d=function(e,n){for(var i=!1,r=1/0,a=0;a<n.length;a++)for(var o=n[a],s=0,l=o.length,u=l-1;s<l;u=s++){var c=o[s],p=o[u];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(i=!i),r=Math.min(r,t.distToSegmentSquared(e,c,p))}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}function f(e,n,i,r,a,o){e.createArrays();var s=512*e.overscaling;e.tilePixelRatio=t.EXTENT/s,e.compareText={},e.iconsNeedLinear=!1;var l=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var p=e.textSizeData.zoomRange,h=p.min,d=p.max;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new t.EvaluationParameters(h)),u["text-size"].possiblyEvaluate(new t.EvaluationParameters(d))]}if("composite"===e.iconSizeData.functionType){var f=e.iconSizeData.zoomRange,g=f.min,v=f.max;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(g)),u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(v))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new t.EvaluationParameters(18));for(var y=24*l.get("text-line-height"),_="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),x=l.get("text-keep-upright"),b=0,w=e.features;b<w.length;b+=1){var E=w[b],T=l.get("text-font").evaluate(E,{}).join(","),S=i,C={},k=E.text;if(k){var z=k instanceof t.Formatted?k.toString():k,A=l.get("text-offset").evaluate(E,{}).map(function(t){return 24*t}),M=24*l.get("text-letter-spacing").evaluate(E,{}),I=t.allowsLetterSpacing(z)?M:0,P=l.get("text-anchor").evaluate(E,{}),L=l.get("text-justify").evaluate(E,{}),D="point"===l.get("symbol-placement")?24*l.get("text-max-width").evaluate(E,{}):0;C.horizontal=t.shapeText(k,n,T,D,y,P,L,I,A,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(z)&&_&&x&&(C.vertical=t.shapeText(k,n,T,D,y,P,L,I,A,24,t.WritingMode.vertical))}var O=void 0;if(E.icon){var B=r[E.icon];B&&(O=t.shapeIcon(a[E.icon],l.get("icon-offset").evaluate(E,{}),l.get("icon-anchor").evaluate(E,{})),void 0===e.sdfIcons?e.sdfIcons=B.sdf:e.sdfIcons!==B.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),B.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(C.horizontal||O)&&m(e,E,C,O,S,c)}o&&e.generateCollisionDebugBuffers()}function m(e,n,i,r,a,o){var u=o.layoutTextSize.evaluate(n,{}),c=o.layoutIconSize.evaluate(n,{}),h=o.textMaxSize.evaluate(n,{});void 0===h&&(h=u);var d=e.layers[0].layout,f=d.get("text-offset").evaluate(n,{}),m=d.get("icon-offset").evaluate(n,{}),y=u/24,_=e.tilePixelRatio*y,x=e.tilePixelRatio*h/24,b=e.tilePixelRatio*c,w=e.tilePixelRatio*d.get("symbol-spacing"),E=d.get("text-padding")*e.tilePixelRatio,T=d.get("icon-padding")*e.tilePixelRatio,S=d.get("text-max-angle")/180*Math.PI,C="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),k="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),z=d.get("symbol-placement"),A=w/2,M=function(s,l){l.x<0||l.x>=t.EXTENT||l.y<0||l.y>=t.EXTENT||function(e,n,i,r,a,o,s,l,u,c,p,h,d,f,m,v,y,_,x,b,w){var E,T,S=e.addToLineVertexArray(n,i),C=0,k=0,z=0,A=Pt(r.horizontal?r.horizontal.text:""),M=[];if(r.horizontal){var I=o.layout.get("text-rotate").evaluate(x,{});E=new kt(s,i,n,l,u,c,r.horizontal,p,h,d,e.overscaling,I),k+=g(e,n,r.horizontal,o,d,x,f,S,r.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,M,b,w),r.vertical&&(z+=g(e,n,r.vertical,o,d,x,f,S,t.WritingMode.vertical,M,b,w))}var P=E?E.boxStartIndex:e.collisionBoxArray.length,L=E?E.boxEndIndex:e.collisionBoxArray.length;if(a){var D=function(e,n,i,r,a,o){var s,l,u,c,p=n.image,h=i.layout,d=n.top-1/p.pixelRatio,f=n.left-1/p.pixelRatio,m=n.bottom+1/p.pixelRatio,g=n.right+1/p.pixelRatio;if("none"!==h.get("icon-text-fit")&&a){var v=g-f,y=m-d,_=h.get("text-size").evaluate(o,{})/24,x=a.left*_,b=a.right*_,w=a.top*_,E=b-x,T=a.bottom*_-w,S=h.get("icon-text-fit-padding")[0],C=h.get("icon-text-fit-padding")[1],k=h.get("icon-text-fit-padding")[2],z=h.get("icon-text-fit-padding")[3],A="width"===h.get("icon-text-fit")?.5*(T-y):0,M="height"===h.get("icon-text-fit")?.5*(E-v):0,I="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?E:v,P="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?T:y;s=new t.Point(x+M-z,w+A-S),l=new t.Point(x+M+C+I,w+A-S),u=new t.Point(x+M+C+I,w+A+k+P),c=new t.Point(x+M-z,w+A+k+P)}else s=new t.Point(f,d),l=new t.Point(g,d),u=new t.Point(g,m),c=new t.Point(f,m);var L=i.layout.get("icon-rotate").evaluate(o,{})*Math.PI/180;if(L){var D=Math.sin(L),O=Math.cos(L),B=[O,-D,D,O];s._matMult(B),l._matMult(B),c._matMult(B),u._matMult(B)}return[{tl:s,tr:l,bl:c,br:u,tex:p.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,a,o,0,r.horizontal,x),O=o.layout.get("icon-rotate").evaluate(x,{});T=new kt(s,i,n,l,u,c,a,m,v,!1,e.overscaling,O),C=4*D.length;var B=e.iconSizeData,R=null;"source"===B.functionType?(R=[t.SIZE_PACK_FACTOR*o.layout.get("icon-size").evaluate(x,{})])[0]>Ot&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===B.functionType&&((R=[t.SIZE_PACK_FACTOR*w.compositeIconSizes[0].evaluate(x,{}),t.SIZE_PACK_FACTOR*w.compositeIconSizes[1].evaluate(x,{})])[0]>Ot||R[1]>Ot)&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,D,R,_,y,x,!1,n,S.lineStartIndex,S.lineLength)}var F=T?T.boxStartIndex:e.collisionBoxArray.length,N=T?T.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=t.SymbolBucket.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(n.x,n.y,M.length>0?M[0]:-1,M.length>1?M[1]:-1,A,P,L,F,N,l,k,z,C,0)}(e,l,s,i,r,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,_,E,C,f,b,T,k,m,n,a,o)};if("line"===z)for(var I=0,P=function(e,n,i,r,a){for(var o=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<n&&h.x<n||(p.x<n?p=new t.Point(n,p.y+(h.y-p.y)*((n-p.x)/(h.x-p.x)))._round():h.x<n&&(h=new t.Point(n,p.y+(h.y-p.y)*((n-p.x)/(h.x-p.x)))._round()),p.y<i&&h.y<i||(p.y<i?p=new t.Point(p.x+(h.x-p.x)*((i-p.y)/(h.y-p.y)),i)._round():h.y<i&&(h=new t.Point(p.x+(h.x-p.x)*((i-p.y)/(h.y-p.y)),i)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new t.Point(r,p.y+(h.y-p.y)*((r-p.x)/(h.x-p.x)))._round():h.x>=r&&(h=new t.Point(r,p.y+(h.y-p.y)*((r-p.x)/(h.x-p.x)))._round()),p.y>=a&&h.y>=a||(p.y>=a?p=new t.Point(p.x+(h.x-p.x)*((a-p.y)/(h.y-p.y)),a)._round():h.y>=a&&(h=new t.Point(p.x+(h.x-p.x)*((a-p.y)/(h.y-p.y)),a)._round()),u&&p.equals(u[u.length-1])||(u=[p],o.push(u)),u.push(h)))))}return o}(n.geometry,0,0,t.EXTENT,t.EXTENT);I<P.length;I+=1)for(var L=P[I],D=0,O=l(L,w,S,i.vertical||i.horizontal,r,24,x,e.overscaling,t.EXTENT);D<O.length;D+=1){var B=O[D],R=i.horizontal;R&&v(e,R.text,A,B)||M(L,B)}else if("line-center"===z)for(var F=0,N=n.geometry;F<N.length;F+=1){var V=N[F];if(V.length>1){var j=s(V,S,i.vertical||i.horizontal,r,24,x);j&&M(V,j)}}else if("Polygon"===n.type)for(var U=0,q=t.classifyRings(n.geometry,0);U<q.length;U+=1){var $=q[U],G=p($,16);M($[0],new t.Anchor(G.x,G.y,0))}else if("LineString"===n.type)for(var H=0,X=n.geometry;H<X.length;H+=1){var W=X[H];M(W,new t.Anchor(W[0].x,W[0].y,0))}else if("Point"===n.type)for(var Z=0,Y=n.geometry;Z<Y.length;Z+=1)for(var K=0,J=Y[Z];K<J.length;K+=1){var Q=J[K];M([Q],new t.Anchor(Q.x,Q.y,0))}}function g(e,n,i,r,a,o,s,l,u,c,p,h){var d=function(e,n,i,r,a,o){for(var s=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,l=i.layout.get("text-offset").evaluate(a,{}).map(function(t){return 24*t}),u=n.positionedGlyphs,c=[],p=0;p<u.length;p++){var h=u[p],d=o[h.fontStack],f=d&&d[h.glyph];if(f){var m=f.rect;if(m){var g=t.GLYPH_PBF_BORDER+1,v=f.metrics.advance*h.scale/2,y=r?[h.x+v,h.y]:[0,0],_=r?[0,0]:[h.x+v+l[0],h.y+l[1]],x=(f.metrics.left-g)*h.scale-v+_[0],b=(-f.metrics.top-g)*h.scale+_[1],w=x+m.w*h.scale,E=b+m.h*h.scale,T=new t.Point(x,b),S=new t.Point(w,b),C=new t.Point(x,E),k=new t.Point(w,E);if(r&&h.vertical){var z=new t.Point(-v,v),A=-Math.PI/2,M=new t.Point(5,0);T._rotateAround(A,z)._add(M),S._rotateAround(A,z)._add(M),C._rotateAround(A,z)._add(M),k._rotateAround(A,z)._add(M)}if(s){var I=Math.sin(s),P=Math.cos(s),L=[P,-I,I,P];T._matMult(L),S._matMult(L),C._matMult(L),k._matMult(L)}c.push({tl:T,tr:S,bl:C,br:k,tex:m,writingMode:n.writingMode,glyphOffset:y})}}}return c}(0,i,r,a,o,p),f=e.textSizeData,m=null;return"source"===f.functionType?(m=[t.SIZE_PACK_FACTOR*r.layout.get("text-size").evaluate(o,{})])[0]>Ot&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===f.functionType&&((m=[t.SIZE_PACK_FACTOR*h.compositeTextSizes[0].evaluate(o,{}),t.SIZE_PACK_FACTOR*h.compositeTextSizes[1].evaluate(o,{})])[0]>Ot||m[1]>Ot)&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,d,m,s,a,o,u,n,l.lineStartIndex,l.lineLength),c.push(e.text.placedSymbolArray.length-1),4*d.length}function v(t,e,n,i){var r=t.compareText;if(e in r){for(var a=r[e],o=a.length-1;o>=0;o--)if(i.dist(a[o])<n)return!0}else r[e]=[];return r[e].push(i),!1}function y(e,n){for(var i=new t.EvaluationParameters(n),r=0,a=e;r<a.length;r+=1)a[r].recalculate(i)}function _(e,n){var i=t.getArrayBuffer(e.request,function(e,i){e?n(e):i&&n(null,{vectorTile:new t.mvt.VectorTile(new t.Protobuf(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires})});return function(){i.cancel(),n()}}function x(t){var e=0;if(t&&t.length>0){e+=Math.abs(b(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(b(t[n]))}return e}function b(t){var e,n,i,r,a,o,s=0,l=t.length;if(l>2){for(o=0;o<l;o++)o===l-2?(i=l-2,r=l-1,a=0):o===l-1?(i=l-1,r=0,a=1):(i=o,r=o+1,a=o+2),e=t[i],n=t[r],s+=(w(t[a][0])-w(e[0]))*Math.sin(w(n[1]));s=s*qt.RADIUS*qt.RADIUS/2}return s}function w(t){return t*Math.PI/180}function E(t,e){return function(n){return t(n,e)}}function T(t,e){e=!!e,t[0]=S(t[0],e);for(var n=1;n<t.length;n++)t[n]=S(t[n],!e);return t}function S(t,e){return function(t){return $t.ring(t)>=0}(t)===e?t:t.reverse()}function C(t,e){this.options=e||{},this.features=t,this.length=t.length}function k(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}function z(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,A,t.layers[n])}(e,n),n.finish()}function A(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,M,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var a=i.values;for(n=0;n<a.length;n++)e.writeMessage(4,O,a[n])}function M(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,I,t),e.writeVarintField(3,n.type),e.writeMessage(4,D,n)}function I(t,e){var n=t.feature,i=t.keys,r=t.values,a=t.keycache,o=t.valuecache;for(var s in n.properties){var l=a[s];void 0===l&&(i.push(s),l=i.length-1,a[s]=l),e.writeVarint(l);var u=n.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,h=o[p];void 0===h&&(r.push(u),h=r.length-1,o[p]=h),e.writeVarint(h)}}function P(t,e){return(e<<3)+(7&t)}function L(t){return t<<1^t>>31}function D(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,a=0,o=n.length,s=0;s<o;s++){var l=n[s],u=1;1===i&&(u=l.length),e.writeVarint(P(1,u));for(var c=3===i?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==i&&e.writeVarint(P(2,c-1));var h=l[p].x-r,d=l[p].y-a;e.writeVarint(L(h)),e.writeVarint(L(d)),r+=h,a+=d}3===i&&e.writeVarint(P(7,0))}}function O(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function B(t,e,n,i,r,a){if(!(r-i<=n)){var o=Math.floor((i+r)/2);!function t(e,n,i,r,a,o){for(;a>r;){if(a-r>600){var s=a-r+1,l=i-r+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(e,n,i,Math.max(r,Math.floor(i-l*c/s+p)),Math.min(a,Math.floor(i+(s-l)*c/s+p)),o)}var h=n[2*i+o],d=r,f=a;for(R(e,n,r,i),n[2*a+o]>h&&R(e,n,r,a);d<f;){for(R(e,n,d,f),d++,f--;n[2*d+o]<h;)d++;for(;n[2*f+o]>h;)f--}n[2*r+o]===h?R(e,n,r,f):R(e,n,++f,a),f<=i&&(r=f+1),i<=f&&(a=f-1)}}(t,e,o,i,r,a%2),B(t,e,n,i,o-1,a+1),B(t,e,n,o+1,r,a+1)}}function R(t,e,n,i){F(t,n,i),F(e,2*n,2*i),F(e,2*n+1,2*i+1)}function F(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function N(t,e,n,i){var r=t-n,a=e-i;return r*r+a*a}function V(t,e,n,i,r){return new j(t,e,n,i,r)}function j(t,e,n,i,r){e=e||U,n=n||q,r=r||Array,this.nodeSize=i||64,this.points=t,this.ids=new r(t.length),this.coords=new r(2*t.length);for(var a=0;a<t.length;a++)this.ids[a]=a,this.coords[2*a]=e(t[a]),this.coords[2*a+1]=n(t[a]);B(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function U(t){return t[0]}function q(t){return t[1]}function $(t){this.options=Y(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function G(t,e,n,i,r){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function H(t){return{type:"Feature",id:t.id,properties:X(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function X(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return Y(Y({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function W(t){return t/360+.5}function Z(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Y(t,e){for(var n in e)t[n]=e[n];return t}function K(t){return t.x}function J(t){return t.y}function Q(t,e,n,i,r,a){var o=r-n,s=a-i;if(0!==o||0!==s){var l=((t-n)*o+(e-i)*s)/(o*o+s*s);l>1?(n=r,i=a):l>0&&(n+=o*l,i+=s*l)}return(o=t-n)*o+(s=e-i)*s}function tt(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)et(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)et(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)et(t,e[i][r])}(r),r}function et(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function nt(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,a=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===a)it(r,s);else if("MultiPoint"===a)for(var u=0;u<r.length;u++)it(r[u],s);else if("LineString"===a)rt(r,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(u=0;u<r.length;u++)s=[],rt(r[u],s,o,!1),t.push(tt(l,"LineString",s,e.properties));return}at(r,s,o,!1)}else if("Polygon"===a)at(r,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<e.geometry.geometries.length;u++)nt(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<r.length;u++){var c=[];at(r[u],c,o,!0),s.push(c)}}t.push(tt(l,a,s,e.properties))}}function it(t,e){e.push(ot(t[0])),e.push(st(t[1])),e.push(0)}function rt(t,e,n,i){for(var r,a,o=0,s=0;s<t.length;s++){var l=ot(t[s][0]),u=st(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(o+=i?(r*u-l*a)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(u-a,2))),r=l,a=u}var c=e.length-3;e[2]=1,function t(e,n,i,r){for(var a,o=r,s=i-n>>1,l=i-n,u=e[n],c=e[n+1],p=e[i],h=e[i+1],d=n+3;d<i;d+=3){var f=Q(e[d],e[d+1],u,c,p,h);if(f>o)a=d,o=f;else if(f===o){var m=Math.abs(d-s);m<l&&(a=d,l=m)}}o>r&&(a-n>3&&t(e,n,a,r),e[a+2]=o,i-a>3&&t(e,a,i,r))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function at(t,e,n,i){for(var r=0;r<t.length;r++){var a=[];rt(t[r],a,n,i),e.push(a)}}function ot(t){return t/360+.5}function st(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function lt(t,e,n,i,r,a,o,s){if(i/=e,a>=(n/=e)&&o<i)return t;if(o<n||a>=i)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.type,d=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(d>=n&&f<i)l.push(c);else if(!(f<n||d>=i)){var m=[];if("Point"===h||"MultiPoint"===h)ut(p,m,n,i,r);else if("LineString"===h)ct(p,m,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===h)ht(p,m,n,i,r,!1);else if("Polygon"===h)ht(p,m,n,i,r,!0);else if("MultiPolygon"===h)for(var g=0;g<p.length;g++){var v=[];ht(p[g],v,n,i,r,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(g=0;g<m.length;g++)l.push(tt(c.id,h,m[g],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(tt(c.id,h,m,c.tags))}}}return l.length?l:null}function ut(t,e,n,i,r){for(var a=0;a<t.length;a+=3){var o=t[a+r];o>=n&&o<=i&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}function ct(t,e,n,i,r,a,o){for(var s,l,u=pt(t),c=0===r?ft:mt,p=t.start,h=0;h<t.length-3;h+=3){var d=t[h],f=t[h+1],m=t[h+2],g=t[h+3],v=t[h+4],y=0===r?d:f,_=0===r?g:v,x=!1;o&&(s=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-v,2))),y<n?_>=n&&(l=c(u,d,f,g,v,n),o&&(u.start=p+s*l)):y>=i?_<i&&(l=c(u,d,f,g,v,i),o&&(u.start=p+s*l)):dt(u,d,f,m),_<n&&y>=n&&(l=c(u,d,f,g,v,n),x=!0),_>i&&y<=i&&(l=c(u,d,f,g,v,i),x=!0),!a&&x&&(o&&(u.end=p+s*l),e.push(u),u=pt(t)),o&&(p+=s)}var b=t.length-3;d=t[b],f=t[b+1],m=t[b+2],(y=0===r?d:f)>=n&&y<=i&&dt(u,d,f,m),b=u.length-3,a&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&dt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function pt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ht(t,e,n,i,r,a){for(var o=0;o<t.length;o++)ct(t[o],e,n,i,r,a,!1)}function dt(t,e,n,i){t.push(e),t.push(n),t.push(i)}function ft(t,e,n,i,r,a){var o=(a-e)/(i-e);return t.push(a),t.push(n+(r-n)*o),t.push(1),o}function mt(t,e,n,i,r,a){var o=(a-n)/(r-n);return t.push(e+(i-e)*o),t.push(a),t.push(1),o}function gt(t,e){for(var n=[],i=0;i<t.length;i++){var r,a=t[i],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)r=vt(a.geometry,e);else if("MultiLineString"===o||"Polygon"===o){r=[];for(var s=0;s<a.geometry.length;s++)r.push(vt(a.geometry[s],e))}else if("MultiPolygon"===o)for(r=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(vt(a.geometry[s][u],e));r.push(l)}n.push(tt(a.id,o,r,a.tags))}return n}function vt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function yt(t,e){if(t.transformed)return t;var n,i,r,a=1<<t.z,o=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(i=0;i<u.length;i+=2)l.geometry.push(_t(u[i],u[i+1],e,a,o,s));else for(i=0;i<u.length;i++){var p=[];for(r=0;r<u[i].length;r+=2)p.push(_t(u[i][r],u[i][r+1],e,a,o,s));l.geometry.push(p)}}return t.transformed=!0,t}function _t(t,e,n,i,r,a){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-a))]}function xt(t,e,n,i,r){for(var a=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){o.numFeatures++,bt(o,t[s],a,r);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,p=t[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),p>o.maxY&&(o.maxY=p)}return o}function bt(t,e,n,i){var r=e.geometry,a=e.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<r.length;s+=3)o.push(r[s]),o.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)wt(o,r,t,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<r.length;s++)wt(o,r[s],t,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<r.length;l++){var u=r[l];for(s=0;s<u.length;s++)wt(o,u[s],t,n,!0,0===s)}if(o.length){var c=e.tags||null;if("LineString"===a&&i.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var h={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function wt(t,e,n,i,r,a){var o=i*i;if(i>0&&e.size<(r?o:i))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>o)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,a=r-2;i<r;a=i,i+=2)n+=(t[i]-t[a])*(t[i+1]+t[a+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var o=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=o,t[r-1-i]=s}}(s,a),t.push(s)}}function Et(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)nt(n,t.features[i],e,i);else"Feature"===t.type?nt(n,t,e):nt(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,r=lt(t,1,-1-n,n,0,-1,2,e),a=lt(t,1,1-n,2+n,0,-1,2,e);return(r||a)&&(i=lt(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=gt(r,1).concat(i)),a&&(i=i.concat(gt(a,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tt(t,e,n){return 32*((1<<t)*n+e)+t}function St(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);var r=new Wt(i.features),a=Kt(r);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:r,rawData:a.buffer})}var Ct=function(t){t&&this.replace(t)};Ct.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},Ct.prototype.update=function(e,i){for(var r=this,a=0,o=e;a<o.length;a+=1){var s=o[a];r._layerConfigs[s.id]=s;var l=r._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter)}for(var u=0,c=i;u<c.length;u+=1){var p=c[u];delete r._layerConfigs[p],delete r._layers[p]}this.familiesBySource={};for(var h=0,d=function(t){for(var e={},i=0;i<t.length;i++){var r=n(t[i]),a=e[r];a||(a=e[r]=[]),a.push(t[i])}var o=[];for(var s in e)o.push(e[s]);return o}(t.values(this._layerConfigs));h<d.length;h+=1){var f=d[h].map(function(t){return r._layers[t.id]}),m=f[0];if("none"!==m.visibility){var g=m.source||"",v=r.familiesBySource[g];v||(v=r.familiesBySource[g]={});var y=m.sourceLayer||"_geojsonTileLayer",_=v[y];_||(_=v[y]=[]),_.push(f)}}};var kt=function(e,n,i,r,a,o,s,l,u,c,p,h){var d=s.top*l-u,f=s.bottom*l+u,m=s.left*l-u,g=s.right*l+u;if(this.boxStartIndex=e.length,c){var v=f-d,y=g-m;v>0&&(v=Math.max(10*l,v),this._addLineCollisionCircles(e,n,i,i.segment,y,v,r,a,o,p))}else{if(h){var _=new t.Point(m,d),x=new t.Point(g,d),b=new t.Point(m,f),w=new t.Point(g,f),E=h*Math.PI/180;_._rotate(E),x._rotate(E),b._rotate(E),w._rotate(E),m=Math.min(_.x,x.x,b.x,w.x),g=Math.max(_.x,x.x,b.x,w.x),d=Math.min(_.y,x.y,b.y,w.y),f=Math.max(_.y,x.y,b.y,w.y)}e.emplaceBack(i.x,i.y,m,d,g,f,r,a,o,0,0)}this.boxEndIndex=e.length};kt.prototype._addLineCollisionCircles=function(t,e,n,i,r,a,o,s,l,u){var c=a/2,p=Math.floor(r/c)||1,h=1+.4*Math.log(u)/Math.LN2,d=Math.floor(p*h/2),f=-a/2,m=n,g=i+1,v=f,y=-r/2,_=y-r/4;do{if(--g<0){if(v>y)return;g=0;break}v-=e[g].dist(m),m=e[g]}while(v>_);for(var x=e[g].dist(e[g+1]),b=-d;b<p+d;b++){var w=b*c,E=y+w;if(w<0&&(E+=w),w>r&&(E+=w-r),!(E<v)){for(;v+x<E;){if(v+=x,++g+1>=e.length)return;x=e[g].dist(e[g+1])}var T=E-v,S=e[g],C=e[g+1].sub(S)._unit()._mult(T)._add(S)._round(),k=Math.abs(E-f)<c?0:.8*(E-f);t.emplaceBack(C.x,C.y,-a/2,-a/2,a/2,a/2,o,s,l,a/2,k)}}};var zt=u,At=u;u.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,a=e[r];if(n(i,a)>=0)break;e[t]=a,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var a=1+(t<<1),o=a+1,s=e[a];if(o<this.length&&n(e[o],s)<0&&(a=o,s=e[o]),n(s,r)>=0)break;e[t]=s,t=a}e[t]=r}},zt.default=At;var Mt=t.createCommonjsModule(function(t){t.exports=function(t,e){var n,i,r,a,o,s,l,u;for(n=3&t.length,i=t.length-n,r=e,o=3432918353,s=461845907,u=0;u<i;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,r=27492+(65535&(a=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}}),It=t.createCommonjsModule(function(t){t.exports=function(t,e){for(var n,i=t.length,r=e^i,a=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++a;switch(i){case 3:r^=(255&t.charCodeAt(a+2))<<16;case 2:r^=(255&t.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}}),Pt=Mt,Lt=Mt,Dt=It;Pt.murmur3=Lt,Pt.murmur2=Dt;var Ot=65535,Bt=function(e){var n={},i=[];for(var r in e){var a=e[r],o=n[r]={};for(var s in a){var l=a[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};i.push(u),o[s]={rect:u,metrics:l.metrics}}}}var c=t.potpack(i),p=c.w,h=c.h,d=new t.AlphaImage({width:p||1,height:h||1});for(var f in e){var m=e[f];for(var g in m){var v=m[+g];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var y=n[f][g].rect;t.AlphaImage.copy(v.bitmap,d,{x:0,y:0},{x:y.x+1,y:y.y+1},v.bitmap)}}}this.image=d,this.positions=n};t.register("GlyphAtlas",Bt);var Rt=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};Rt.prototype.parse=function(e,n,i,r){function a(){if(u)return r(u);if(c&&p&&h){var e=new Bt(c),n=new t.ImageAtlas(p,h);for(var i in d){var a=d[i];a instanceof t.SymbolBucket?(y(a.layers,this.zoom),f(a,c,e.positions,p,n.iconPositions,this.showCollisionBoxes)):a.hasPattern&&(a instanceof t.LineBucket||a instanceof t.FillBucket||a instanceof t.FillExtrusionBucket)&&(y(a.layers,this.zoom),a.addFeatures(m,n.patternPositions))}this.status="done",r(null,{buckets:t.values(d).filter(function(t){return!t.isEmpty()}),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n})}}var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var s=new t.DictionaryCoder(Object.keys(e.layers).sort()),l=new t.FeatureIndex(this.tileID);l.bucketLayerIDs=[];var u,c,p,h,d={},m={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},g=n.familiesBySource[this.source];for(var v in g){var _=e.layers[v];if(_){1===_.version&&t.warnOnce('Vector tile source "'+o.source+'" layer "'+v+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=s.encode(v),b=[],w=0;w<_.length;w++){var E=_.feature(w);b.push({feature:E,index:w,sourceLayerIndex:x})}for(var T=0,S=g[v];T<S.length;T+=1){var C=S[T],k=C[0];k.minzoom&&o.zoom<Math.floor(k.minzoom)||k.maxzoom&&o.zoom>=k.maxzoom||"none"!==k.visibility&&(y(C,o.zoom),(d[k.id]=k.createBucket({index:l.bucketLayerIDs.length,layers:C,zoom:o.zoom,pixelRatio:o.pixelRatio,overscaling:o.overscaling,collisionBoxArray:o.collisionBoxArray,sourceLayerIndex:x,sourceID:o.source})).populate(b,m),l.bucketLayerIDs.push(C.map(function(t){return t.id})))}}}var z=t.mapObject(m.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(z).length?i.send("getGlyphs",{uid:this.uid,stacks:z},function(t,e){u||(u=t,c=e,a.call(o))}):c={};var A=Object.keys(m.iconDependencies);A.length?i.send("getImages",{icons:A},function(t,e){u||(u=t,p=e,a.call(o))}):p={};var M=Object.keys(m.patternDependencies);M.length?i.send("getImages",{icons:M},function(t,e){u||(u=t,h=e,a.call(o))}):h={},a.call(this)};var Ft="undefined"!=typeof performance,Nt={getEntriesByName:function(t){return!!(Ft&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(Ft&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(Ft&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(Ft&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(Ft&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},Vt=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Nt.mark(this._marks.start)};Vt.prototype.finish=function(){Nt.mark(this._marks.end);var t=Nt.getEntriesByName(this._marks.measure);return 0===t.length&&(Nt.measure(this._marks.measure,this._marks.start,this._marks.end),t=Nt.getEntriesByName(this._marks.measure),Nt.clearMarks(this._marks.start),Nt.clearMarks(this._marks.end),Nt.clearMeasures(this._marks.measure)),t},Nt.Performance=Vt;var jt=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||_,this.loading={},this.loaded={}};jt.prototype.loadTile=function(e,n){var i=this,r=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new Nt.Performance(e.request),o=this.loading[r]=new Rt(e);o.abort=this.loadVectorData(e,function(e,s){if(delete i.loading[r],e||!s)return n(e);var l=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl);var c={};if(a){var p=a.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}o.vectorTile=s.vectorTile,o.parse(s.vectorTile,i.layerIndex,i.actor,function(e,i){if(e||!i)return n(e);n(null,t.extend({rawTileData:l.slice(0)},i,u,c))}),i.loaded=i.loaded||{},i.loaded[r]=o})},jt.prototype.reloadTile=function(t,e){var n=this.loaded,i=t.uid,r=this;if(n&&n[i]){var a=n[i];a.showCollisionBoxes=t.showCollisionBoxes;var o=function(t,n){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,r.layerIndex,r.actor,i)),e(t,n)};"parsing"===a.status?a.reloadCallback=o:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,o)}},jt.prototype.abortTile=function(t,e){var n=this.loading,i=t.uid;n&&n[i]&&n[i].abort&&(n[i].abort(),delete n[i]),e()},jt.prototype.removeTile=function(t,e){var n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()};var Ut=function(){this.loaded={}};Ut.prototype.loadTile=function(e,n){var i=e.uid,r=e.encoding,a=e.rawImageData,o=new t.DEMData(i,a,r);this.loaded=this.loaded||{},this.loaded[i]=o,n(null,o)},Ut.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var qt={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},$t={geometry:function t(e){var n,i=0;switch(e.type){case"Polygon":return x(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=x(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},ring:b},Gt=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(E(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=T(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(E(T,e))),t}(e,n);default:return e}},Ht=t.mvt.VectorTileFeature.prototype.toGeoJSON,Xt=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};Xt.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,i=this._feature.geometry;n<i.length;n+=1){var r=i[n];e.push([new t.Point(r[0],r[1])])}return e}for(var a=[],o=0,s=this._feature.geometry;o<s.length;o+=1){for(var l=[],u=0,c=s[o];u<c.length;u+=1){var p=c[u];l.push(new t.Point(p[0],p[1]))}a.push(l)}return a},Xt.prototype.toGeoJSON=function(t,e,n){return Ht.call(this,t,e,n)};var Wt=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};Wt.prototype.feature=function(t){return new Xt(this._features[t])};var Zt=t.vectorTile.VectorTileFeature,Yt=C;C.prototype.feature=function(t){return new k(this.features[t],this.options.extent)},k.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],r=[],a=0;a<i.length;a++)r.push(new t.Point$1(i[a][0],i[a][1]));this.geometry.push(r)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.length;s++){var l=o[s];e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[e,i,n,r]},k.prototype.toGeoJSON=Zt.prototype.toGeoJSON;var Kt=z,Jt=z,Qt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new Yt(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return z({layers:n})},te=Yt;Kt.fromVectorTileJs=Jt,Kt.fromGeojsonVt=Qt,Kt.GeoJSONWrapper=te,j.prototype={range:function(t,e,n,i){return function(t,e,n,i,r,a,o){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),d=u.pop();if(h-d<=o)for(var f=d;f<=h;f++)s=e[2*f],l=e[2*f+1],s>=n&&s<=r&&l>=i&&l<=a&&c.push(t[f]);else{var m=Math.floor((d+h)/2);s=e[2*m],l=e[2*m+1],s>=n&&s<=r&&l>=i&&l<=a&&c.push(t[m]);var g=(p+1)%2;(0===p?n<=s:i<=l)&&(u.push(d),u.push(m-1),u.push(g)),(0===p?r>=s:a>=l)&&(u.push(m+1),u.push(h),u.push(g))}}return c}(this.ids,this.coords,t,e,n,i,this.nodeSize)},within:function(t,e,n){return function(t,e,n,i,r,a){for(var o=[0,t.length-1,0],s=[],l=r*r;o.length;){var u=o.pop(),c=o.pop(),p=o.pop();if(c-p<=a)for(var h=p;h<=c;h++)N(e[2*h],e[2*h+1],n,i)<=l&&s.push(t[h]);else{var d=Math.floor((p+c)/2),f=e[2*d],m=e[2*d+1];N(f,m,n,i)<=l&&s.push(t[d]);var g=(u+1)%2;(0===u?n-r<=f:i-r<=m)&&(o.push(p),o.push(d-1),o.push(g)),(0===u?n+r>=f:i+r>=m)&&(o.push(d+1),o.push(c),o.push(g))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}},$.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;for(var i,r,a,o=[],s=0;s<t.length;s++)t[s].geometry&&o.push((i=t[s],r=s,{x:W((a=i.geometry.coordinates)[0]),y:Z(a[1]),zoom:1/0,index:r,parentId:-1}));this.trees[this.options.maxZoom+1]=V(o,K,J,this.options.nodeSize,Float32Array),e&&console.timeEnd(n);for(var l=this.options.maxZoom;l>=this.options.minZoom;l--){var u=+Date.now();o=this._cluster(o,l),this.trees[l]=V(o,K,J,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",l,o.length,+Date.now()-u)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){var n=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){var o=this.getClusters([n,i,180,a],e),s=this.getClusters([-180,i,r,a],e);return o.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=l.range(W(n),Z(a),W(r),Z(i)),c=[],p=0;p<u.length;p++){var h=l.points[u[p]];c.push(h.numPoints?H(h):this.points[h.index])}return c},getChildren:function(t){var e=t>>5,n=t%32,i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);var a=r.points[e];if(!a)throw new Error(i);for(var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=r.within(a.x,a.y,o),l=[],u=0;u<s.length;u++){var c=r.points[s[u]];c.parentId===t&&l.push(c.numPoints?H(c):this.points[c.index])}if(0===l.length)throw new Error(i);return l},getLeaves:function(t,e,n){e=e||10,n=n||0;var i=[];return this._appendLeaves(i,t,e,n,0),i},getTile:function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),a=this.options.extent,o=this.options.radius/a,s=(n-o)/r,l=(n+1+o)/r,u={features:[]};return this._addTileFeatures(i.range((e-o)/r,s,(e+1+o)/r,l),i.points,e,n,r,u),0===e&&this._addTileFeatures(i.range(1-o/r,s,1,l),i.points,r,n,r,u),e===r-1&&this._addTileFeatures(i.range(0,s,o/r,l),i.points,-1,n,r,u),u.features.length?u:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,i,r){for(var a=this.getChildren(e),o=0;o<a.length;o++){var s=a[o].properties;if(s&&s.cluster?r+s.point_count<=i?r+=s.point_count:r=this._appendLeaves(t,s.cluster_id,n,i,r):r<i?r++:t.push(a[o]),t.length===n)break}return r},_addTileFeatures:function(t,e,n,i,r,a){for(var o=0;o<t.length;o++){var s=e[t[o]],l={type:1,geometry:[[Math.round(this.options.extent*(s.x*r-n)),Math.round(this.options.extent*(s.y*r-i))]],tags:s.numPoints?X(s):this.points[s.index].properties},u=s.numPoints?s.id:this.points[s.index].id;void 0!==u&&(l.id=u),a.features.push(l)}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),r=0;r<t.length;r++){var a=t[r];if(!(a.zoom<=e)){a.zoom=e;var o=this.trees[e+1],s=o.within(a.x,a.y,i),l=a.numPoints||1,u=a.x*l,c=a.y*l,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,a));for(var h=(r<<5)+(e+1),d=0;d<s.length;d++){var f=o.points[s[d]];if(!(f.zoom<=e)){f.zoom=e;var m=f.numPoints||1;u+=f.x*m,c+=f.y*m,l+=m,f.parentId=h,this.options.reduce&&this._accumulate(p,f)}}1===l?n.push(a):(a.parentId=h,n.push(G(u/l,c/l,h,l,p)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.index].properties);this.options.reduce(t,n)}},Et.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Et.prototype.splitTile=function(t,e,n,i,r,a,o){for(var s=[t,e,n,i],l=this.options,u=l.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,p=Tt(e,n,i),h=this.tiles[p];if(!h&&(u>1&&console.time("creation"),h=this.tiles[p]=xt(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(h.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(n!==Math.floor(a/f)||i!==Math.floor(o/f))continue}else if(e===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==t.length){u>1&&console.time("clipping");var m,g,v,y,_,x,b=.5*l.buffer/l.extent,w=.5-b,E=.5+b,T=1+b;m=g=v=y=null,_=lt(t,c,n-b,n+E,0,h.minX,h.maxX,l),x=lt(t,c,n+w,n+T,0,h.minX,h.maxX,l),t=null,_&&(m=lt(_,c,i-b,i+E,1,h.minY,h.maxY,l),g=lt(_,c,i+w,i+T,1,h.minY,h.maxY,l),_=null),x&&(v=lt(x,c,i-b,i+E,1,h.minY,h.maxY,l),y=lt(x,c,i+w,i+T,1,h.minY,h.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*i),s.push(g||[],e+1,2*n,2*i+1),s.push(v||[],e+1,2*n+1,2*i),s.push(y||[],e+1,2*n+1,2*i+1)}}},Et.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,a=i.debug;if(t<0||t>24)return null;var o=1<<t,s=Tt(t,e=(e%o+o)%o,n);if(this.tiles[s])return yt(this.tiles[s],r);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,p=n;!l&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[Tt(u,c,p)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,p),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,p,t,e,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?yt(this.tiles[s],r):null):null};var ee=function(e){function n(t,n,i){e.call(this,t,n,St),i&&(this.loadGeoJSON=i)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var e=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(n&&n.request&&n.request.collectResourceTiming)&&new Nt.Performance(n.request);this.loadGeoJSON(n,function(r,a){if(r||!a)return e(r);if("object"!=typeof a)return e(new Error("Input data is not a valid GeoJSON object."));Gt(a,!0);try{t._geoJSONIndex=n.cluster?(o=n.superclusterOptions,new $(o)).load(a.features):function(t,e){return new Et(t,e)}(a,n.geojsonVtOptions)}catch(r){return e(r)}t.loaded={};var o,s={};if(i){var l=i.finish();l&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(l)))}e(null,s)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var i=this.loaded,r=t.uid;return i&&i[r]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},n.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},n.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},n}(jt),ne=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:jt,geojson:ee},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return ne.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},ne.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},ne.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},ne.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},ne.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},ne.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},ne.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},ne.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},ne.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}},ne.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},ne.prototype.loadRTLTextPlugin=function(e,n,i){try{t.plugin.isLoaded()||(this.self.importScripts(n),i(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){i(t.toString())}},ne.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new Ct),e},ne.prototype.getWorkerSource=function(t,e,n){var i=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var r={send:function(e,n,r){i.actor.send(e,n,r,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](r,this.getLayerIndex(t))}return this.workerSources[t][e][n]},ne.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new Ut),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new ne(self),ne}),t(["./shared.js"],function(t){function e(t){if(!dt)return null;for(var e=0;e<t.length;e++)if(t[e]in dt)return t[e];return t[0]}function n(t,e){var n=r(_t.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!_t.REQUIRE_ACCESS_TOKEN)return a(t);if(!(e=e||_t.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+xt);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+xt);return t.params.push("access_token="+e),a(t)}function i(t){return 0===t.indexOf("mapbox:")}function r(t){var e=t.match(Ct);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function a(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function o(t,e,n,i,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function s(t,e,n,i,r,a,o){for(var s=0;s<e;s++){for(var u=0;u<n;u++)i[u]=t[u*e+s];for(l(i,r,a,o,n),u=0;u<n;u++)t[u*e+s]=r[u]}for(u=0;u<n;u++){for(s=0;s<e;s++)i[s]=t[u*e+s];for(l(i,r,a,o,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(r[s])}}function l(t,e,n,i,r){n[0]=0,i[0]=-Pt,i[1]=+Pt;for(var a=1,o=0;a<r;a++){for(var s=(t[a]+a*a-(t[n[o]]+n[o]*n[o]))/(2*a-2*n[o]);s<=i[o];)o--,s=(t[a]+a*a-(t[n[o]]+n[o]*n[o]))/(2*a-2*n[o]);n[++o]=a,i[o]=s,i[o+1]=+Pt}for(a=0,o=0;a<r;a++){for(;i[o+1]<a;)o++;e[a]=(a-n[o])*(a-n[o])+t[n[o]]}}function u(e,n,i){var r=function(e,n){if(e)return i(e);if(n){var r=t.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(r.vectorLayers=n.vector_layers,r.vectorLayerIds=r.vectorLayers.map(function(t){return t.id})),i(null,r)}};return e.url?t.getJSON(n(wt(e.url),t.ResourceType.Source),r):t.browser.frame(function(){return r(null,e)})}function c(t,e,n,i,r){var a=r.maxPitchScaleFactor(),o=t.tilesIn(n,a);o.sort(p);for(var s=[],l=0,u=o;l<u.length;l+=1){var c=u[l];s.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(e,t._state,c.queryGeometry,c.scale,i,r,a,t.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}var h=function(t){for(var e={},n={},i=0,r=t;i<r.length;i+=1){var a=r[i],o=a.queryResults,s=a.wrappedTileID,l=n[s]=n[s]||{};for(var u in o)for(var c=o[u],p=l[u]=l[u]||{},h=e[u]=e[u]||[],d=0,f=c;d<f.length;d+=1){var m=f[d];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m.feature))}}return e}(s);for(var d in h)h[d].forEach(function(e){var n=t.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=n});return h}function p(t,e){var n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function h(e,n){var i=n.zoomTo(e.canonical.z);return new t.Point((i.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*t.EXTENT,(i.row-e.canonical.y)*t.EXTENT)}function d(t,e){return t%32-e%32||e-t}function f(t){return"raster"===t||"image"===t||"video"===t}function m(){return new t.window.Worker(Oi.workerUrl)}function g(e,n){var i={};for(var r in e)"ref"!==r&&(i[r]=e[r]);return t.refProperties.forEach(function(t){t in n&&(i[t]=n[t])}),i}function v(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=g(t[i],e[t[i].ref]));return t}function y(t,e,n){n.push({command:Fe.addSource,args:[t,e[t]]})}function _(t,e,n){e.push({command:Fe.removeSource,args:[t]}),n[t]=!0}function x(t,e,n,i){_(t,n,i),y(t,e,n)}function b(e,n,i){var r;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;return!0}function w(e,n,i,r,a,o){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:o,args:[r,s,n[s],a]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:o,args:[r,s,n[s],a]}))}function E(t){return t.id}function T(t,e){return t[e.id]=e,t}function S(e,n){if(!e)return[{command:Fe.setStyle,args:[n]}];var i=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Fe.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||i.push({command:Fe.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||i.push({command:Fe.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||i.push({command:Fe.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||i.push({command:Fe.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||i.push({command:Fe.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||i.push({command:Fe.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||i.push({command:Fe.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||i.push({command:Fe.setLight,args:[n.light]});var r={},a=[];!function(e,n,i,r){var a;for(a in n=n||{},e=e||{})e.hasOwnProperty(a)&&(n.hasOwnProperty(a)||_(a,i,r));for(a in n)n.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.deepEqual(e[a],n[a])||("geojson"===e[a].type&&"geojson"===n[a].type&&b(e,n,a)?i.push({command:Fe.setGeoJSONSourceData,args:[a,n[a].data]}):x(a,n,i,r)):y(a,n,i))}(e.sources,n.sources,a,r);var o=[];e.layers&&e.layers.forEach(function(t){r[t.source]?i.push({command:Fe.removeLayer,args:[t.id]}):o.push(t)}),i=i.concat(a),function(e,n,i){n=n||[];var r,a,o,s,l,u,c,p=(e=e||[]).map(E),h=n.map(E),d=e.reduce(T,{}),f=n.reduce(T,{}),m=p.slice(),g=Object.create(null);for(r=0,a=0;r<p.length;r++)o=p[r],f.hasOwnProperty(o)?a++:(i.push({command:Fe.removeLayer,args:[o]}),m.splice(m.indexOf(o,a),1));for(r=0,a=0;r<h.length;r++)o=h[h.length-1-r],m[m.length-1-r]!==o&&(d.hasOwnProperty(o)?(i.push({command:Fe.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-a),1)):a++,u=m[m.length-r],i.push({command:Fe.addLayer,args:[f[o],u]}),m.splice(m.length-r,0,o),g[o]=!0);for(r=0;r<h.length;r++)if(s=d[o=h[r]],l=f[o],!g[o]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(c in w(s.layout,l.layout,i,o,null,Fe.setLayoutProperty),w(s.paint,l.paint,i,o,null,Fe.setPaintProperty),t.deepEqual(s.filter,l.filter)||i.push({command:Fe.setFilter,args:[o,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||i.push({command:Fe.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?w(s[c],l[c],i,o,c.slice(6),Fe.setPaintProperty):t.deepEqual(s[c],l[c])||i.push({command:Fe.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?w(s[c],l[c],i,o,c.slice(6),Fe.setPaintProperty):t.deepEqual(s[c],l[c])||i.push({command:Fe.setLayerProperty,args:[o,c,l[c]]}))}else i.push({command:Fe.removeLayer,args:[o]}),u=m[m.lastIndexOf(o)+1],i.push({command:Fe.addLayer,args:[l,u]})}(o,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Fe.setStyle,args:[n]}]}return i}function C(e,n,i,r,a){var o=t.identity(new Float32Array(16));return n?(t.identity(o),t.scale(o,o,[1/a,1/a,1]),i||t.rotateZ(o,o,r.angle)):(t.scale(o,o,[r.width/2,-r.height/2,1]),t.translate(o,o,[1,-1,0]),t.multiply(o,o,e)),o}function k(e,n,i,r,a){var o=t.identity(new Float32Array(16));return n?(t.multiply(o,o,e),t.scale(o,o,[a,a,1]),i||t.rotateZ(o,o,-r.angle)):(t.scale(o,o,[1,-1,1]),t.translate(o,o,[-1,-1,0]),t.scale(o,o,[2/r.width,2/r.height,1])),o}function z(e,n){var i=[e.x,e.y,0,1];R(i,i,n);var r=i[3];return{point:new t.Point(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function A(t,e){var n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function M(e,n,i,r,a,o,s,l){var u=r?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,i.transform.zoom,Ve.properties[r?"text-size":"icon-size"]),p=[256/i.width*2+1,256/i.height*2+1],h=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var d=e.lineVertexArray,f=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=i.transform.width/i.transform.height,g=!1,v=0;v<f.length;v++){var y=f.get(v);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!g)B(y.numGlyphs,h);else{g=!1;var _=[y.anchorX,y.anchorY,0,1];if(t.transformMat4(_,_,n),A(_,p)){var x=.5+_[3]/i.transform.cameraToCenterDistance*.5,b=t.evaluateSizeForFeature(u,c,y),w=s?b*x:b/x,E=new t.Point(y.anchorX,y.anchorY),T=z(E,a).point,S={},C=L(y,w,!1,l,n,a,o,e.glyphOffsetArray,d,h,T,E,S,m);g=C.useVertical,(C.notEnoughRoom||g||C.needsFlipping&&L(y,w,!0,l,n,a,o,e.glyphOffsetArray,d,h,T,E,S,m).notEnoughRoom)&&B(y.numGlyphs,h)}else B(y.numGlyphs,h)}}r?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function I(t,e,n,i,r,a,o,s,l,u,c,p){var h=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(h-1),v=O(t*m,n,i,r,a,o,s.segment,d,f,l,u,c,p);if(!v)return null;var y=O(t*g,n,i,r,a,o,s.segment,d,f,l,u,c,p);return y?{first:v,last:y}:null}function P(e,n,i,r){return e===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function L(e,n,i,r,a,o,s,l,u,c,p,h,d,f){var m,g=n/24,v=e.lineOffsetX*n,y=e.lineOffsetY*n;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=I(g,l,v,y,i,p,h,e,u,o,d,!1);if(!w)return{notEnoughRoom:!0};var E=z(w.first.point,s).point,T=z(w.last.point,s).point;if(r&&!i){var S=P(e.writingMode,E,T,f);if(S)return S}m=[w.first];for(var C=e.glyphStartIndex+1;C<_-1;C++)m.push(O(g*l.getoffsetX(C),v,y,i,p,h,e.segment,x,b,u,o,d,!1));m.push(w.last)}else{if(r&&!i){var k=z(h,a).point,A=e.lineStartIndex+e.segment+1,M=new t.Point(u.getx(A),u.gety(A)),L=z(M,a),B=L.signedDistanceFromCamera>0?L.point:D(h,M,k,1,a),R=P(e.writingMode,k,B,f);if(R)return R}var F=O(g*l.getoffsetX(e.glyphStartIndex),v,y,i,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,o,d,!1);if(!F)return{notEnoughRoom:!0};m=[F]}for(var N=0,V=m;N<V.length;N+=1){var j=V[N];t.addDynamicAttributes(c,j.point,j.angle)}return{}}function D(t,e,n,i,r){var a=z(t.add(t.sub(e)._unit()),r).point,o=n.sub(a);return n.add(o._mult(i/o.mag()))}function O(e,n,i,r,a,o,s,l,u,c,p,h,d){var f=r?e-n:e+n,m=f>0?1:-1,g=0;r&&(m*=-1,g=Math.PI),m<0&&(g+=Math.PI);for(var v=m>0?l+s:l+s+1,y=v,_=a,x=a,b=0,w=0,E=Math.abs(f);b+w<=E;){if((v+=m)<l||v>=u)return null;if(x=_,void 0===(_=h[v])){var T=new t.Point(c.getx(v),c.gety(v)),S=z(T,p);if(S.signedDistanceFromCamera>0)_=h[v]=S.point;else{var C=v-m;_=D(0===b?o:new t.Point(c.getx(C),c.gety(C)),T,x,E-b+1,p)}}b+=w,w=x.dist(_)}var k=(E-b)/w,A=_.sub(x),M=A.mult(k)._add(x);return M._add(A._unit()._perp()._mult(i*m)),{point:M,angle:g+Math.atan2(_.y-x.y,_.x-x.x),tileDistance:d?{prevTileDistance:v-m===y?0:c.gettileUnitDistanceFromAnchor(v-m),lastSegmentViewportDistance:E-b}:null}}function B(t,e){for(var n=0;n<t;n++){var i=e.length;e.resize(i+4),e.float32.set(je,3*i)}}function R(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}function F(t,e,n){t[e+4]=n?1:0}function N(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}function V(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}function j(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*We+e*Ze+n*Ye+e*Ke+n*Je+e*Qe+n*tn+e}function U(e,n,i){var r=1/N(i,1,n.transform.tileZoom),a=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,n.transform.tileZoom)/a,s=o*(i.tileID.canonical.x+i.tileID.wrap*a),l=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}function q(t,e){return 1/N(t,1,e.tileZoom)}function $(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function G(e,n){for(var i=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),r=0;r<i.length;r++){var a={},o=i[r],s=i.slice(r+1);H(o.tileID.wrapped(),o.tileID,s,new t.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),a),o.setMask(a,n)}}function H(e,n,i,r,a){for(var o=0;o<i.length;o++){var s=i[o];if(r.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var l=n.children(1/0),u=0;u<l.length;u++)H(e,l[u],i.slice(o),r,a);return}}var c=n.overscaledZ-e.overscaledZ,p=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));a[p.key]=a[p.key]||p}function X(t,e,n,i,r){for(var a=t.context,o=a.gl,s=r?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),l=0;l<i.length;l++){var u=i[l],c=e.getTile(u),p=c.getBucket(n);if(p){var h=r?p.collisionCircle:p.collisionBox;h&&s.draw(a,r?o.TRIANGLES:o.LINES,Ie.disabled,Pe.disabled,t.colorModeForRenderPass(),Mn(u.posMatrix,t.transform,c),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,t.transform.zoom,null,null,h.collisionVertexBuffer)}}}function W(e,n,i,r,a,o,s,l,u,c,p,h){for(var d,f,m=e.context,g=m.gl,v=e.transform,y="map"===l,_="map"===u,x=y&&"point"!==i.layout.get("symbol-placement"),b=y&&!_&&!x,w=_?e.depthModeForSublayer(0,Ie.ReadOnly):Ie.disabled,E=0,T=r;E<T.length;E+=1){var S=T[E],z=n.getTile(S),A=z.getBucket(i);if(A){var I=a?A.text:A.icon;if(I&&I.segments.get().length){var P=I.programConfigurations.get(i.id),L=a||A.sdfIcons,D=a?A.textSizeData:A.iconSizeData;d||(d=e.useProgram(L?"symbolSDF":"symbolIcon",P),f=t.evaluateSizeForZoom(D,v.zoom,Wn.properties[a?"text-size":"icon-size"])),m.activeTexture.set(g.TEXTURE0);var O=void 0;if(a)z.glyphAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),O=z.glyphAtlasTexture.size;else{var B=1!==i.layout.get("icon-size").constantOr(0)||A.iconsNeedLinear,R=_||0!==v.pitch;z.imageAtlasTexture.bind(L||e.options.rotating||e.options.zooming||B||R?g.LINEAR:g.NEAREST,g.CLAMP_TO_EDGE),O=z.imageAtlasTexture.size}var F=N(z,1,e.transform.zoom),V=C(S.posMatrix,_,y,e.transform,F),j=k(S.posMatrix,_,y,e.transform,F);x&&M(A,S.posMatrix,e,a,V,j,_,c);var U=e.translatePosMatrix(S.posMatrix,z,o,s),q=x?Xn:V,$=e.translatePosMatrix(j,z,o,s,!0),G=void 0;if(L){var H=0!==i.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);G=qn(D.functionType,f,b,_,e,U,q,$,a,O,!0),H&&Z(I,i,e,d,w,p,h,G),G.u_is_halo=0}else G=Un(D.functionType,f,b,_,e,U,q,$,a,O);Z(I,i,e,d,w,p,h,G)}}}}function Z(t,e,n,i,r,a,o,s){var l=n.context,u=l.gl;i.draw(l,u.TRIANGLES,r,a,o,s,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,e.paint,n.transform.zoom,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Y(t,e,n,i,r,a,o){var s,l,u,c,p,h=t.context.gl,d=n.paint.get("fill-pattern"),f=d&&d.constantOr(1),m=n.getCrossfadeParameters();o?(l=f&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(l=f?"fillPattern":"fill",s=h.TRIANGLES);for(var g=0,v=i;g<v.length;g+=1){var y=v[g],_=e.getTile(y);if(!f||_.patternsLoaded()){var x=_.getBucket(n);if(x){var b=x.programConfigurations.get(n.id),w=t.useProgram(l,b);f&&(t.context.activeTexture.set(h.TEXTURE0),_.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePatternPaintBuffers(m));var E=d.constantOr(null);if(E&&_.imageAtlas){var T=_.imageAtlas.patternPositions[E.to],S=_.imageAtlas.patternPositions[E.from];T&&S&&b.setConstantPatternPositions(T,S)}var C=t.translatePosMatrix(y.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){c=x.indexBuffer2,p=x.segments2;var k=[h.drawingBufferWidth,h.drawingBufferHeight];u="fillOutlinePattern"===l&&f?kn(C,t,m,_,k):Cn(C,k)}else c=x.indexBuffer,p=x.segments,u=f?Sn(C,t,m,_):Tn(C);w.draw(t.context,s,r,t.stencilModeForClipping(y),a,u,n.id,x.layoutVertexBuffer,c,p,n.paint,t.transform.zoom,b)}}}}function K(t,e,n,i,r,a){var o=t.context,s=o.gl,l=e.fbo;if(l){var u=t.useProgram("hillshade");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=On(t,e,n);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?u.draw(o,s.TRIANGLES,i,r,a,c,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):u.draw(o,s.TRIANGLES,i,r,a,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function J(e,n,i,r,a,o,s){var l=e.context,u=l.gl;if(n.dem&&n.dem.data){var c=n.dem.dim,p=n.dem.getPixels();if(l.activeTexture.set(u.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(n.tileSize),n.demTexture){var h=n.demTexture;h.update(p,{premultiply:!1}),h.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(l,p,u.RGBA,{premultiply:!1}),n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);l.activeTexture.set(u.TEXTURE0);var d=n.fbo;if(!d){var f=new t.Texture(l,{width:c,height:c,data:null},u.RGBA);f.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=n.fbo=l.createFramebuffer(c,c)).colorAttachment.set(f.texture)}l.bindFramebuffer.set(d.framebuffer),l.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,a,o,s,Bn(n,r),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Q(e,n,i,r,a){var o=r.paint.get("raster-fade-duration");if(o>0){var s=t.browser.now(),l=(s-e.timeAdded)/o,u=n?(s-n.timeAdded)/o:-1,c=i.getSource(),p=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),d=h&&e.refreshedUponExpiration?1:t.clamp(h?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}function tt(e,n,i){var r=e.context,a=r.gl,o=i.posMatrix,s=e.useProgram("debug"),l=Ie.disabled,u=Pe.disabled,c=e.colorModeForRenderPass(),p="$debug";s.draw(r,a.LINE_STRIP,l,u,c,In(o,t.Color.red),p,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var h=function(t,e,n,i){i=i||1;var r,a,o,s,l,u,c,p,h=[];for(r=0,a=t.length;r<a;r++)if(l=Zn[t[r]]){for(p=null,o=0,s=l[1].length;o<s;o+=2)-1===l[1][o]&&-1===l[1][o+1]?p=null:(u=e+l[1][o]*i,c=n-l[1][o+1]*i,p&&h.push(p.x,p.y,u,c),p={x:u,y:c});e+=l[0]*i}return h}(i.toString(),50,200,5),d=new t.StructArrayLayout2i4,f=new t.StructArrayLayout2ui4,m=0;m<h.length;m+=2)d.emplaceBack(h[m],h[m+1]),f.emplaceBack(m,m+1);for(var g=r.createVertexBuffer(d,dn.members),v=r.createIndexBuffer(f),y=t.SegmentVector.simpleSegment(0,0,d.length/2,d.length/2),_=n.getTile(i).tileSize,x=t.EXTENT/(Math.pow(2,e.transform.zoom-i.overscaledZ)*_),b=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<b.length;w++){var E=b[w];s.draw(r,a.LINES,l,u,c,In(t.translate([],o,[x*E[0],x*E[1],0]),t.Color.white),p,g,v,y)}s.draw(r,a.LINES,l,u,c,In(o,t.Color.black),p,g,v,y)}function et(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function nt(t,e,n,i,r){var a=Math.max(n,Math.floor(e.y0)),o=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=a;h<o;h++){var d=l*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,f=u*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;r(Math.floor(f),Math.ceil(d),h)}}function it(t,e,n,i,r,a){var o,s=et(t,e),l=et(e,n),u=et(n,t);s.dy>l.dy&&(o=s,s=l,l=o),s.dy>u.dy&&(o=s,s=u,u=o),l.dy>u.dy&&(o=l,l=u,u=o),s.dy&&nt(u,s,i,r,a),l.dy&&nt(u,l,i,r,a)}function rt(t){return t*(2-t)}function at(t){t.parentNode&&t.parentNode.removeChild(t)}function ot(t,e,n){if(t=new Nt(t.lng,t.lat),e){var i=new Nt(t.lng-360,t.lat),r=new Nt(t.lng+360,t.lat),a=n.locationPoint(t).distSqr(e);n.locationPoint(i).distSqr(e)<a?t=i:n.locationPoint(r).distSqr(e)<a&&(t=r)}for(;Math.abs(t.lng-n.center.lng)>180;){var o=n.locationPoint(t);if(o.x>=0&&o.y>=0&&o.x<=n.width&&o.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}function st(t,e,n){var i=t.classList;for(var r in Ci)i.remove("mapboxgl-"+n+"-anchor-"+r);i.add("mapboxgl-"+n+"-anchor-"+e)}function lt(t,e,n){var i,r,a,o,s,l,u=n&&n.maxWidth||100,c=t._container.clientHeight/2,p=(i=t.unproject([0,c]),r=t.unproject([u,c]),a=Math.PI/180,o=i.lat*a,s=r.lat*a,l=Math.sin(o)*Math.sin(s)+Math.cos(o)*Math.cos(s)*Math.cos((r.lng-i.lng)*a),6371e3*Math.acos(Math.min(l,1)));if(n&&"imperial"===n.unit){var h=3.2808*p;h>5280?ut(e,u,h/5280,"mi"):ut(e,u,h,"ft")}else n&&"nautical"===n.unit?ut(e,u,p/1852,"nm"):ut(e,u,p,"m")}function ut(t,e,n,i){var r,a,o,s=(r=n,(a=Math.pow(10,(""+Math.floor(r)).length-1))*(o=(o=r/a)>=10?10:o>=5?5:o>=3?3:o>=2?2:1)),l=s/n;"m"===i&&s>=1e3&&(s/=1e3,i="km"),t.style.width=e*l+"px",t.innerHTML=s+i}var ct,pt=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",i)||n.probablySupportsContext("experimental-webgl",i):n.supportsContext?n.supportsContext("webgl",i)||n.supportsContext("experimental-webgl",i):n.getContext("webgl",i)||n.getContext("experimental-webgl",i)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),ht={create:function(e,n,i){var r=t.window.document.createElement(e);return n&&(r.className=n),i&&i.appendChild(r),r},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},dt=t.window.document?t.window.document.documentElement.style:null,ft=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);ht.disableDrag=function(){dt&&ft&&(ct=dt[ft],dt[ft]="none")},ht.enableDrag=function(){dt&&ft&&(dt[ft]=ct)};var mt=e(["transform","WebkitTransform"]);ht.setTransform=function(t,e){t.style[mt]=e};var gt=!1;try{var vt=Object.defineProperty({},"passive",{get:function(){gt=!0}});t.window.addEventListener("test",vt,vt),t.window.removeEventListener("test",vt,vt)}catch(t){gt=!1}ht.addEventListener=function(t,e,n,i){void 0===i&&(i={}),"passive"in i&&gt?t.addEventListener(e,n,i):t.addEventListener(e,n,i.capture)},ht.removeEventListener=function(t,e,n,i){void 0===i&&(i={}),"passive"in i&&gt?t.removeEventListener(e,n,i):t.removeEventListener(e,n,i.capture)};var yt=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",yt,!0)};ht.suppressClick=function(){t.window.addEventListener("click",yt,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",yt,!0)},0)},ht.mousePos=function(e,n){var i=e.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new t.Point(n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop)},ht.touchPos=function(e,n){for(var i=e.getBoundingClientRect(),r=[],a="touchend"===n.type?n.changedTouches:n.touches,o=0;o<a.length;o++)r.push(new t.Point(a[o].clientX-i.left-e.clientLeft,a[o].clientY-i.top-e.clientTop));return r},ht.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},ht.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var _t={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return 0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":"https://events.mapbox.com/events/v2"},REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},xt="See https://www.mapbox.com/api-documentation/#access-tokens",bt=function(t,e){if(!i(t))return t;var a=r(t);return a.path="/fonts/v1"+a.path,n(a,e)},wt=function(t,e){if(!i(t))return t;var a=r(t);return a.path="/v4/"+a.authority+".json",a.params.push("secure"),n(a,e)},Et=function(t,e,o,s){var l=r(t);return i(t)?(l.path="/styles/v1"+l.path+"/sprite"+e+o,n(l,s)):(l.path+=""+e+o,a(l))},Tt=/(\.(png|jpg)\d*)(?=$)/,St=function(e,n,o){if(!n||!i(n))return e;var s=r(e),l=t.browser.devicePixelRatio>=2||512===o?"@2x":"",u=t.browser.supportsWebp?".webp":"$1";return s.path=s.path.replace(Tt,""+l+u),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(_t.ACCESS_TOKEN||""))}(s.params),a(s)},Ct=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/,kt=function(){this.eventData={anonId:null,lastSuccess:null,accessToken:_t.ACCESS_TOKEN},this.queue=[],this.pending=!1,this.pendingRequest=null};kt.prototype.postTurnstileEvent=function(e){_t.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(t){return/(mapbox\.c)(n|om)/i.test(t)})&&this.queueRequest(t.browser.now())},kt.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()},kt.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n="mapbox.turnstileEventData:"+(_t.ACCESS_TOKEN||""),i=t.storageAvailable("localStorage"),o=!!this.eventData.accessToken&&this.eventData.accessToken!==_t.ACCESS_TOKEN;if(o&&(this.eventData.anonId=this.eventData.lastSuccess=null),(!this.eventData.anonId||!this.eventData.lastSuccess)&&i)try{var s=t.window.localStorage.getItem(n);s&&(this.eventData=JSON.parse(s))}catch(e){t.warnOnce("Unable to read from LocalStorage")}t.validateUuid(this.eventData.anonId)||(this.eventData.anonId=t.uuid(),o=!0);var l=this.queue.shift();if(this.eventData.lastSuccess){var u=new Date(this.eventData.lastSuccess),c=new Date(l),p=(l-this.eventData.lastSuccess)/864e5;o=o||p>=1||p<-1||u.getDate()!==c.getDate()}if(!o)return this.processRequests();var h=r(_t.EVENTS_URL);h.params.push("access_token="+(_t.ACCESS_TOKEN||""));var d={url:a(h),headers:{"Content-Type":"text/plain"}},f=JSON.stringify([{event:"appUserTurnstile",created:new Date(l).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.49.0","enabled.telemetry":!1,userId:this.eventData.anonId}]);this.pendingRequest=t.postData(d,f,function(r){if(e.pendingRequest=null,!r){if(e.eventData.lastSuccess=l,e.eventData.accessToken=_t.ACCESS_TOKEN,i)try{t.window.localStorage.setItem(n,JSON.stringify(e.eventData))}catch(e){t.warnOnce("Unable to write to LocalStorage")}e.processRequests()}})}};var zt=new kt,At=zt.postTurnstileEvent.bind(zt),Mt=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};Mt.prototype.isLoaded=function(){return this.loaded},Mt.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var i=n[e],r=i.ids,a=i.callback;this._notify(r,a)}this.requestors=[]}},Mt.prototype.getImage=function(t){return this.images[t]},Mt.prototype.addImage=function(t,e){this.images[t]=e},Mt.prototype.removeImage=function(t){delete this.images[t],delete this.patterns[t]},Mt.prototype.listImages=function(){return Object.keys(this.images)},Mt.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var i=0,r=t;i<r.length;i+=1){var a=r[i];this.images[a]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},Mt.prototype._notify=function(t,e){for(var n={},i=0,r=t;i<r.length;i+=1){var a=r[i],o=this.images[a];o&&(n[a]={data:o.data.clone(),pixelRatio:o.pixelRatio,sdf:o.sdf})}e(null,n)},Mt.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},Mt.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var i=this.getImage(e);if(!i)return null;var r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},a=new t.ImagePosition(r,i);return this.patterns[e]={bin:r,position:a},this._updatePatternAtlas(),a},Mt.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},Mt.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var i=t.potpack(e),r=i.w,a=i.h,o=this.atlasImage;for(var s in o.resize({width:r||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,p=this.images[s].data,h=p.width,d=p.height;t.RGBAImage.copy(p,o,{x:0,y:0},{x:u,y:c},{width:h,height:d}),t.RGBAImage.copy(p,o,{x:0,y:d-1},{x:u,y:c-1},{width:h,height:1}),t.RGBAImage.copy(p,o,{x:0,y:0},{x:u,y:c+d},{width:h,height:1}),t.RGBAImage.copy(p,o,{x:h-1,y:0},{x:u-1,y:c},{width:1,height:d}),t.RGBAImage.copy(p,o,{x:0,y:0},{x:u+h,y:c},{width:1,height:d})}this.dirty=!0};var It=o,Pt=1e20;o.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var r=e.data[4*i+3]/255;this.gridOuter[i]=1===r?0:0===r?Pt:Math.pow(Math.max(0,.5-r),2),this.gridInner[i]=1===r?Pt:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(s(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),s(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var a=this.gridOuter[i]-this.gridInner[i];n[i]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return n};var Lt=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};Lt.prototype.setURL=function(t){this.url=t},Lt.prototype.getGlyphs=function(e,n){var i=this,r=[];for(var a in e)for(var o=0,s=e[a];o<s.length;o+=1){var l=s[o];r.push({stack:a,id:l})}t.asyncAll(r,function(t,e){var n=t.stack,r=t.id,a=i.entries[n];a||(a=i.entries[n]={glyphs:{},requests:{}});var o=a.glyphs[r];if(void 0===o)if(o=i._tinySDF(a,n,r))e(null,{stack:n,id:r,glyph:o});else{var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var l=a.requests[s];l||(l=a.requests[s]=[],Lt.loadGlyphRange(n,s,i.url,i.requestTransform,function(t,e){if(e)for(var n in e)a.glyphs[+n]=e[+n];for(var i=0,r=l;i<r.length;i+=1)(0,r[i])(t,e);delete a.requests[s]})),l.push(function(t,i){t?e(t):i&&e(null,{stack:n,id:r,glyph:i[r]||null})})}}else e(null,{stack:n,id:r,glyph:o})},function(t,e){if(t)n(t);else if(e){for(var i={},r=0,a=e;r<a.length;r+=1){var o=a[r],s=o.stack,l=o.id,u=o.glyph;(i[s]||(i[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}n(null,i)}})},Lt.prototype._tinySDF=function(e,n,i){var r=this.localIdeographFontFamily;if(r&&(t.isChar["CJK Unified Ideographs"](i)||t.isChar["Hangul Syllables"](i))){var a=e.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),a=e.tinySDF=new Lt.TinySDF(24,3,8,.25,r,o)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Lt.loadGlyphRange=function(e,n,i,r,a){var o=256*n,s=o+255,l=r(bt(i).replace("{fontstack}",e).replace("{range}",o+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,n){if(e)a(e);else if(n){for(var i={},r=0,o=t.parseGlyphPBF(n.data);r<o.length;r+=1){var s=o[r];i[s.id]=s}a(null,i)}})},Lt.TinySDF=It;var Dt=function(){this.specification=t.styleSpec.light.position};Dt.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},Dt.prototype.interpolate=function(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i)}};var Ot=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new Dt,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),Bt=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(Ot),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e){if(!this._validate(t.validateLight,e))for(var n in e){var i=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),i):this._transitionable.setValue(n,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n){return t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),Rt=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};Rt.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},Rt.prototype.addDash=function(e,n){var i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,o=0;o<e.length;o++)a+=e[o];for(var s=this.width/a,l=s/2,u=e.length%2==1,c=-i;c<=i;c++)for(var p=this.nextRow+i+c,h=this.width*p,d=u?-e[e.length-1]:0,f=e[0],m=1,g=0;g<this.width;g++){for(;f<g/s;)d=f,f+=e[m],u&&m===e.length-1&&(f+=e[0]),m++;var v=Math.abs(g-d*s),y=Math.abs(g-f*s),_=Math.min(v,y),x=m%2==1,b=void 0;if(n){var w=i?c/i*(l+1):0;if(x){var E=l-Math.abs(w);b=Math.sqrt(_*_+E*E)}else b=l-Math.sqrt(_*_+w*w)}else b=(x?1:-1)*_;this.data[3+4*(h+g)]=Math.max(0,Math.min(255,b+128))}var T={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=r,this.dirty=!0,T},Rt.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var Ft=function e(n,i){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),a=0;a<r.length;a++){var o=r[a],s=new e.Actor(o,i,this.id);s.name="Worker "+a,this.actors.push(s)}};Ft.prototype.broadcast=function(e,n,i){i=i||function(){},t.asyncAll(this.actors,function(t,i){t.send(e,n,i)},i)},Ft.prototype.send=function(t,e,n,i){return("number"!=typeof i||isNaN(i))&&(i=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[i].send(t,e,n),i},Ft.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},Ft.Actor=t.Actor;var Nt=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Nt.prototype.wrap=function(){return new Nt(t.wrap(this.lng,-180,180),this.lat)},Nt.prototype.toArray=function(){return[this.lng,this.lat]},Nt.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Nt.prototype.toBounds=function(t){var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Vt(new Nt(this.lng-n,this.lat-e),new Nt(this.lng+n,this.lat+e))},Nt.convert=function(t){if(t instanceof Nt)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Nt(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Nt(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Vt=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Vt.prototype.setNorthEast=function(t){return this._ne=t instanceof Nt?new Nt(t.lng,t.lat):Nt.convert(t),this},Vt.prototype.setSouthWest=function(t){return this._sw=t instanceof Nt?new Nt(t.lng,t.lat):Nt.convert(t),this},Vt.prototype.extend=function(t){var e,n,i=this._sw,r=this._ne;if(t instanceof Nt)e=t,n=t;else{if(!(t instanceof Vt))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Vt.convert(t)):this.extend(Nt.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return i||r?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),r.lng=Math.max(n.lng,r.lng),r.lat=Math.max(n.lat,r.lat)):(this._sw=new Nt(e.lng,e.lat),this._ne=new Nt(n.lng,n.lat)),this},Vt.prototype.getCenter=function(){return new Nt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Vt.prototype.getSouthWest=function(){return this._sw},Vt.prototype.getNorthEast=function(){return this._ne},Vt.prototype.getNorthWest=function(){return new Nt(this.getWest(),this.getNorth())},Vt.prototype.getSouthEast=function(){return new Nt(this.getEast(),this.getSouth())},Vt.prototype.getWest=function(){return this._sw.lng},Vt.prototype.getSouth=function(){return this._sw.lat},Vt.prototype.getEast=function(){return this._ne.lng},Vt.prototype.getNorth=function(){return this._ne.lat},Vt.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Vt.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Vt.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Vt.convert=function(t){return!t||t instanceof Vt?t:new Vt(t)};var jt=function(t,e,n){this.bounds=Vt.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};jt.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},jt.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),i=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),r=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<i&&t.y>=n&&t.y<r},jt.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},jt.prototype.latY=function(e,n){var i=t.clamp(Math.sin(Math.PI/180*e),-.9999,.9999),r=Math.pow(2,n)/(2*Math.PI);return Math.pow(2,n-1)+.5*Math.log((1+i)/(1-i))*-r};var Ut=function(e){function n(n,i,r,a){if(e.call(this),this.id=n,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(i,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=u(this._options,this.map._transformRequest,function(n,i){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new jt(i.bounds,e.minzoom,e.maxzoom)),At(i.tiles),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){function i(t,i){return e.aborted?n(null):t&&404!==t.status?n(t):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var r=St(e.tileID.canonical.url(this.tiles,this.scheme),this.url),a={request:this.map._transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};a.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",a,i.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",a,i.bind(this),e.workerID)},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),qt=function(e){function n(n,i,r,a){e.call(this),this.id=n,this.dispatcher=r,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=u(this._options,this.map._transformRequest,function(n,i){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new jt(i.bounds,e.minzoom,e.maxzoom)),At(i.tiles),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var i=this,r=St(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(r,a){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(a){i.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var o=i.map.painter.context,s=o.gl;e.texture=i.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t.Texture(o,a,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),$t=function(e){function n(n,i,r,a){e.call(this,n,i,r,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},i),this.encoding=i.encoding||"mapbox"}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var i=St(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,r){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=t.browser.getImageData(r),o={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",o,function(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,a=0===n.x?e.wrap-1:e.wrap,o=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,n.z,r,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,n.z,r,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,a,n.z,r,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),l},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(qt),Gt=function(e){function n(n,i,r,a){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=r,this.setEventedParent(a),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution);var o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(i.clusterRadius||50)*o,log:!1}},i.workerOptions)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(i.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",i))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterLeaves=function(t,e,n,i){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i,this.workerID),this},n.prototype._updateWorkerData=function(e){var n=this,i=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",i,function(t,r){n._removed||r&&r.abandoned||(n._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[n.id]&&(n._resourceTiming=r.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:i.source},null,n.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(e,n){var i=this,r=void 0===e.workerID?"loadTile":"reloadTile",a={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,a,function(t,a){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(a,i.map.painter,"reloadTile"===r),n(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Ht=function(e){function n(t,n,i,r){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(n,i){n?e.fire(new t.ErrorEvent(n)):i&&(e.image=t.browser.getImageData(i),e._finishLoading())})},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){this.coordinates=e;var n=this.map,i=e.map(function(t){return n.transform.locationCoordinate(Nt.convert(t)).zoomTo(0)}),r=this.centerCoord=t.getCoordinatesCenter(i);r.column=Math.floor(r.column),r.row=Math.floor(r.row),this.tileID=new t.CanonicalTileID(r.zoom,r.column,r.row),this.minzoom=this.maxzoom=r.zoom;var a=i.map(function(e){var n=e.zoomTo(r.zoom);return new t.Point(Math.round((n.column-r.column)*t.EXTENT),Math.round((n.row-r.row)*t.EXTENT))});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(a[3].x,a[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(a[2].x,a[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Xt=function(e){function n(t,n,i,r){e.call(this,t,n,i,r),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var i=0,r=n.urls;i<r.length;i+=1){var a=r[i];e.urls.push(e.map._transformRequest(a,t.ResourceType.Source).url)}t.getVideo(this.urls,function(n,i){n?e.fire(new t.ErrorEvent(n)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(Ht),Wt=function(e){function n(n,i,r,a){e.call(this,n,i,r,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,i=n.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.canvas)):(this.texture=new t.Texture(n,this.canvas,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(Ht),Zt={vector:Ut,raster:qt,"raster-dem":$t,geojson:Gt,video:Xt,image:Ht,canvas:Wt},Yt=function(e,n,i,r){var a=new Zt[n.type](e,n,i,r);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a},Kt=function(t,e){this.max=t,this.onRemove=e,this.reset()};Kt.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var i=n[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},Kt.prototype.add=function(t,e,n){var i=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:e,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout(function(){i.remove(t,a)},n)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},Kt.prototype.has=function(t){return t.wrapped().key in this.data},Kt.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Kt.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Kt.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Kt.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this},Kt.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var Jt=function(t,e,n){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Jt.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},Jt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Jt.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Jt.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var Qt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},te=function(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},te.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},te.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],r=e.attributes[i.name];void 0!==r&&t.enableVertexAttribArray(r)}},te.prototype.setVertexAttribPointers=function(t,e,n){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[Qt[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}},te.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var ee=function(e){this.context=e,this.current=t.Color.transparent};ee.prototype.get=function(){return this.current},ee.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var ne=function(t){this.context=t,this.current=1};ne.prototype.get=function(){return this.current},ne.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var ie=function(t){this.context=t,this.current=0};ie.prototype.get=function(){return this.current},ie.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var re=function(t){this.context=t,this.current=[!0,!0,!0,!0]};re.prototype.get=function(){return this.current},re.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var ae=function(t){this.context=t,this.current=!0};ae.prototype.get=function(){return this.current},ae.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var oe=function(t){this.context=t,this.current=255};oe.prototype.get=function(){return this.current},oe.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var se=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};se.prototype.get=function(){return this.current},se.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var le=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};le.prototype.get=function(){return this.current},le.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var ue=function(t){this.context=t,this.current=!1};ue.prototype.get=function(){return this.current},ue.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var ce=function(t){this.context=t,this.current=[0,1]};ce.prototype.get=function(){return this.current},ce.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var pe=function(t){this.context=t,this.current=!1};pe.prototype.get=function(){return this.current},pe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var he=function(t){this.context=t,this.current=t.gl.LESS};he.prototype.get=function(){return this.current},he.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var de=function(t){this.context=t,this.current=!1};de.prototype.get=function(){return this.current},de.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var fe=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};fe.prototype.get=function(){return this.current},fe.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var me=function(e){this.context=e,this.current=t.Color.transparent};me.prototype.get=function(){return this.current},me.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var ge=function(t){this.context=t,this.current=null};ge.prototype.get=function(){return this.current},ge.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var ve=function(t){this.context=t,this.current=t.gl.TEXTURE0};ve.prototype.get=function(){return this.current},ve.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var ye=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};ye.prototype.get=function(){return this.current},ye.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var _e=function(t){this.context=t,this.current=null};_e.prototype.get=function(){return this.current},_e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var xe=function(t){this.context=t,this.current=null};xe.prototype.get=function(){return this.current},xe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var be=function(t){this.context=t,this.current=null};be.prototype.get=function(){return this.current},be.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var we=function(t){this.context=t,this.current=null};we.prototype.get=function(){return this.current},we.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var Ee=function(t){this.context=t,this.current=null};Ee.prototype.get=function(){return this.current},Ee.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var Te=function(t){this.context=t,this.current=null};Te.prototype.get=function(){return this.current},Te.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var Se=function(t){this.context=t,this.current=4};Se.prototype.get=function(){return this.current},Se.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var Ce=function(t){this.context=t,this.current=!1};Ce.prototype.get=function(){return this.current},Ce.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var ke=function(t,e){this.context=t,this.current=null,this.parent=e};ke.prototype.get=function(){return this.current};var ze=function(t){function e(e,n){t.call(this,e,n),this.dirty=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(ke),Ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(ke),Me=function(t,e,n){this.context=t,this.width=e,this.height=n;var i=t.gl,r=this.framebuffer=i.createFramebuffer();this.colorAttachment=new ze(t,r),this.depthAttachment=new Ae(t,r)};Me.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var Ie=function(t,e,n){this.func=t,this.mask=e,this.range=n};Ie.ReadOnly=!1,Ie.ReadWrite=!0,Ie.disabled=new Ie(519,Ie.ReadOnly,[0,1]);var Pe=function(t,e,n,i,r,a){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=a};Pe.disabled=new Pe({func:519,mask:0},0,0,7680,7680,7680);var Le=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Le.Replace=[1,0],Le.disabled=new Le(Le.Replace,t.Color.transparent,[!1,!1,!1,!1]),Le.unblended=new Le(Le.Replace,t.Color.transparent,[!0,!0,!0,!0]),Le.alphaBlended=new Le([1,771],t.Color.transparent,[!0,!0,!0,!0]);var De=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ee(this),this.clearDepth=new ne(this),this.clearStencil=new ie(this),this.colorMask=new re(this),this.depthMask=new ae(this),this.stencilMask=new oe(this),this.stencilFunc=new se(this),this.stencilOp=new le(this),this.stencilTest=new ue(this),this.depthRange=new ce(this),this.depthTest=new pe(this),this.depthFunc=new he(this),this.blend=new de(this),this.blendFunc=new fe(this),this.blendColor=new me(this),this.program=new ge(this),this.activeTexture=new ve(this),this.viewport=new ye(this),this.bindFramebuffer=new _e(this),this.bindRenderbuffer=new xe(this),this.bindTexture=new be(this),this.bindVertexBuffer=new we(this),this.bindElementBuffer=new Ee(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Te(this),this.pixelStoreUnpack=new Se(this),this.pixelStoreUnpackPremultiplyAlpha=new Ce(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};De.prototype.createIndexBuffer=function(t,e){return new Jt(this,t,e)},De.prototype.createVertexBuffer=function(t,e,n){return new te(this,t,e,n)},De.prototype.createRenderbuffer=function(t,e,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r},De.prototype.createFramebuffer=function(t,e){return new Me(this,t,e)},De.prototype.clear=function(t){var e=t.color,n=t.depth,i=this.gl,r=0;e&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(r|=i.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),i.clear(r)},De.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},De.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},De.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Le.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)};var Oe=function(e){function n(n,i,r){var a=this;e.call(this),this.id=n,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))}),this.on("error",function(){a._sourceErrored=!0}),this._source=Yt(n,i,r,this),this._tiles={},this._cache=new Kt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(d)},n.prototype.getRenderableIds=function(e){var n=this,i=[];for(var r in n._tiles)n._isIdRenderable(+r,e)&&i.push(+r);return e?i.sort(function(e,i){var r=n._tiles[e].tileID,a=n._tiles[i].tileID,o=new t.Point(r.canonical.x,r.canonical.y)._rotate(n.transform.angle),s=new t.Point(a.canonical.x,a.canonical.y)._rotate(n.transform.angle);return r.overscaledZ-a.overscaledZ||s.y-o.y||s.x-o.x}):i.sort(d)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,i,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}for(var n=this.getRenderableIds(),i=0;i<n.length;i++){var r=n[i];if(t.neighboringTiles&&t.neighboringTiles[r]){var a=this.getTileByID(r);e(t,a),e(a,t)}}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._retainLoadedChildren=function(t,e,n,i){for(var r in this._tiles){var a=this._tiles[r];if(!(i[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){i[o.key]=o;break}}}},n.prototype.findLoadedParent=function(t,e){for(var n=t.overscaledZ-1;n>=e;n--){var i=t.scaledTo(n);if(!i)return;var r=String(i.key),a=this._tiles[r];if(a&&a.hasData())return a;if(this._cache.has(i))return this._cache.get(i)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){var i={};for(var r in this._tiles){var a=this._tiles[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+n),i[a.tileID.key]=a}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},n.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return i._source.hasTile(t)}))):r=[];var a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),o=Math.max(a-n.maxOverzooming,this._source.minzoom),s=Math.max(a+n.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,a);if(f(this._source.type)){for(var u={},c={},p=0,h=Object.keys(l);p<h.length;p+=1){var d=h[p],m=l[d],g=i._tiles[d];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var v=i.findLoadedParent(m,o);v&&(i._addTile(v.tileID),u[v.tileID.key]=v.tileID),c[d]=m}}for(var y in this._retainLoadedChildren(c,a,s,l),u)l[y]||(i._coveredTiles[y]=!0,l[y]=u[y])}for(var _ in l)i._tiles[_].clearFadeHold();for(var x=0,b=t.keysDifference(this._tiles,l);x<b.length;x+=1){var w=b[x],E=i._tiles[w];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(i.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||i._removeTile(w)}}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var i={},r={},a=Math.max(e-n.maxOverzooming,this._source.minzoom),o=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},l=0,u=t;l<u.length;l+=1){var c=u[l],p=this._addTile(c);i[c.key]=c,p.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,o,i);for(var h=0,d=t;h<d.length;h+=1){var f=d[h],m=this._tiles[f.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var g=f.children(this._source.maxzoom)[0],v=this.getTile(g);if(v&&v.hasData()){i[g.key]=g;continue}}else{var y=f.children(this._source.maxzoom);if(i[y[0].key]&&i[y[1].key]&&i[y[2].key]&&i[y[3].key])continue}for(var _=m.wasRequested(),x=f.overscaledZ-1;x>=a;--x){var b=f.scaledTo(x);if(r[b.key])break;if(r[b.key]=!0,!(m=this.getTile(b))&&_&&(m=this._addTile(b)),m&&(i[b.key]=b,_=m.wasRequested(),m.hasData()))break}}}return i},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var i=Boolean(n);return i||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,i||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},i))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n){for(var i=[],r=this.getIds(),a=1/0,o=1/0,s=-1/0,l=-1/0,u=e[0].zoom,c=0;c<e.length;c++){var p=e[c];a=Math.min(a,p.column),o=Math.min(o,p.row),s=Math.max(s,p.column),l=Math.max(l,p.row)}for(var d=0;d<r.length;d++){var f=this._tiles[r[d]];if(!f.holdingForFade()){var m=f.tileID,g=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),v=n*f.queryPadding*t.EXTENT/f.tileSize/g,y=[h(m,new t.Coordinate(a,o,u)),h(m,new t.Coordinate(s,l,u))];if(y[0].x-v<t.EXTENT&&y[0].y-v<t.EXTENT&&y[1].x+v>=0&&y[1].y+v>=0){for(var _=[],x=0;x<e.length;x++)_.push(h(m,e[x]));i.push({tile:f,tileID:m,queryGeometry:[_],scale:g})}}}return i},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),i=0,r=n;i<r.length;i+=1){var a=r[i];a.posMatrix=e.transform.calculatePosMatrix(a.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(f(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)},n.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},n}(t.Evented);Oe.maxOverzooming=10,Oe.maxUnderzooming=3;var Be,Re=function(){this.active={}};Re.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Re.workerCount;)this.workers.push(new m);return this.active[t]=!0,this.workers.slice()},Re.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},Re.workerCount=Math.max(Math.floor(t.browser.hardwareConcurrency/2),1);var Fe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Ne=function(t,e,n){var i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Ne.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ne.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Ne.prototype.insertCircle=function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)},Ne.prototype._insertBoxCell=function(t,e,n,i,r,a){this.boxCells[r].push(a)},Ne.prototype._insertCircleCell=function(t,e,n,i,r,a){this.circleCells[r].push(a)},Ne.prototype._query=function(t,e,n,i,r,a){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];var o=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return a?o.filter(a):o}var h={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,i,this._queryCell,o,h,a),r?o.length>0:o},Ne.prototype._queryCircle=function(t,e,n,i,r){var a=t-n,o=t+n,s=e-n,l=e+n;if(o<0||a>this.width||l<0||s>this.height)return!i&&[];var u=[],c={hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(a,s,o,l,this._queryCellCircle,u,c,r),i?u.length>0:u},Ne.prototype.query=function(t,e,n,i,r){return this._query(t,e,n,i,!1,r)},Ne.prototype.hitTest=function(t,e,n,i,r){return this._query(t,e,n,i,!0,r)},Ne.prototype.hitTestCircle=function(t,e,n,i){return this._queryCircle(t,e,n,!0,i)},Ne.prototype._queryCell=function(t,e,n,i,r,a,o,s){var l=o.seenUids,u=this.boxCells[r];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var d=h[p];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(t<=c[f+2]&&e<=c[f+3]&&n>=c[f+0]&&i>=c[f+1]&&(!s||s(this.boxKeys[d]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,v=0,y=m;v<y.length;v+=1){var _=y[v];if(!l.circle[_]){l.circle[_]=!0;var x=3*_;if(this._circleAndRectCollide(g[x],g[x+1],g[x+2],t,e,n,i)&&(!s||s(this.circleKeys[_]))){if(o.hitTest)return a.push(!0),!0;var b=g[x],w=g[x+1],E=g[x+2];a.push({key:this.circleKeys[_],x1:b-E,y1:w-E,x2:b+E,y2:w+E})}}}},Ne.prototype._queryCellCircle=function(t,e,n,i,r,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[r];if(null!==c)for(var p=this.bboxes,h=0,d=c;h<d.length;h+=1){var f=d[h];if(!u.box[f]){u.box[f]=!0;var m=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[f])))return a.push(!0),!0}}var g=this.circleCells[r];if(null!==g)for(var v=this.circles,y=0,_=g;y<_.length;y+=1){var x=_[y];if(!u.circle[x]){u.circle[x]=!0;var b=3*x;if(this._circlesCollide(v[b],v[b+1],v[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return a.push(!0),!0}}},Ne.prototype._forEachCell=function(t,e,n,i,r,a,o,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),p=this._convertToYCellCoord(i),h=l;h<=c;h++)for(var d=u;d<=p;d++){var f=this.xCellCount*d+h;if(r.call(this,t,e,n,i,f,a,o,s))return}},Ne.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Ne.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Ne.prototype._circlesCollide=function(t,e,n,i,r,a){var o=i-t,s=r-e,l=n+a;return l*l>o*o+s*s},Ne.prototype._circleAndRectCollide=function(t,e,n,i,r,a,o){var s=(a-i)/2,l=Math.abs(t-(i+s));if(l>s+n)return!1;var u=(o-r)/2,c=Math.abs(e-(r+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=n*n};var Ve=t.properties.layout,je=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Ue=function(t,e,n){void 0===e&&(e=new Ne(t.width+200,t.height+200,25)),void 0===n&&(n=new Ne(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};Ue.prototype.placeCollisionBox=function(t,e,n,i,r){var a=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),o=n*a.perspectiveRatio,s=t.x1*o+a.point.x,l=t.y1*o+a.point.y,u=t.x2*o+a.point.x,c=t.y2*o+a.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,r)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},Ue.prototype.approximateTileDistance=function(t,e,n,i,r){var a=r?1:i/this.pitchfactor,o=t.lastSegmentViewportDistance*n;return t.prevTileDistance+o+(a-1)*o*Math.abs(Math.sin(e))},Ue.prototype.placeCollisionCircles=function(e,n,i,r,a,o,s,l,u,c,p,h,d){var f=[],m=this.projectAnchor(u,a.anchorX,a.anchorY),g=l/24,v=a.lineOffsetX*l,y=a.lineOffsetY*l,_=new t.Point(a.anchorX,a.anchorY),x=I(g,s,v,y,!1,z(_,c).point,_,a,o,c,{},!0),b=!1,w=!1,E=!0,T=m.perspectiveRatio*r,S=1/(r*i),C=0,k=0;x&&(C=this.approximateTileDistance(x.first.tileDistance,x.first.angle,S,m.cameraDistance,h),k=this.approximateTileDistance(x.last.tileDistance,x.last.angle,S,m.cameraDistance,h));for(var A=0;A<e.length;A+=5){var M=e[A],P=e[A+1],L=e[A+2],D=e[A+3];if(!x||D<-C||D>k)F(e,A,!1);else{var O=this.projectPoint(u,M,P),B=L*T;if(f.length>0){var R=O.x-f[f.length-4],N=O.y-f[f.length-3];if(B*B*2>R*R+N*N&&A+8<e.length){var V=e[A+8];if(V>-C&&V<k){F(e,A,!1);continue}}}var j=A/5;f.push(O.x,O.y,B,j),F(e,A,!0);var U=O.x-B,q=O.y-B,$=O.x+B,G=O.y+B;if(E=E&&this.isOffscreen(U,q,$,G),w=w||this.isInsideGrid(U,q,$,G),!n&&this.grid.hitTestCircle(O.x,O.y,B,d)){if(!p)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!w?[]:f,offscreen:E}},Ue.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],i=1/0,r=1/0,a=-1/0,o=-1/0,s=0,l=e;s<l.length;s+=1){var u=l[s],c=new t.Point(u.x+100,u.y+100);i=Math.min(i,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y),n.push(c)}for(var p={},h={},d=0,f=this.grid.query(i,r,a,o).concat(this.ignoredGrid.query(i,r,a,o));d<f.length;d+=1){var m=f[d],g=m.key;if(void 0===p[g.bucketInstanceId]&&(p[g.bucketInstanceId]={}),!p[g.bucketInstanceId][g.featureIndex]){var v=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(n,v)&&(p[g.bucketInstanceId][g.featureIndex]=!0,void 0===h[g.bucketInstanceId]&&(h[g.bucketInstanceId]=[]),h[g.bucketInstanceId].push(g.featureIndex))}}return h},Ue.prototype.insertCollisionBox=function(t,e,n,i,r){var a={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};(e?this.ignoredGrid:this.grid).insert(a,t[0],t[1],t[2],t[3])},Ue.prototype.insertCollisionCircles=function(t,e,n,i,r){for(var a=e?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r},s=0;s<t.length;s+=4)a.insertCircle(o,t[s],t[s+1],t[s+2])},Ue.prototype.projectAnchor=function(t,e,n){var i=[e,n,0,1];return R(i,i,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5,cameraDistance:i[3]}},Ue.prototype.projectPoint=function(e,n,i){var r=[n,i,0,1];return R(r,r,e),new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},Ue.prototype.projectAndGetPerspectiveRatio=function(e,n,i){var r=[n,i,0,1];return R(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},Ue.prototype.isOffscreen=function(t,e,n,i){return n<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},Ue.prototype.isInsideGrid=function(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary};var qe=function(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n};qe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var $e=function(t,e,n,i,r){this.text=new qe(t?t.text:null,e,n,r),this.icon=new qe(t?t.icon:null,e,i,r)};$e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ge=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},He=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};He.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var Xe=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new Ue(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new He(n)};Xe.prototype.placeLayerTile=function(e,n,i,r){var a=n.getBucket(e),o=n.latestFeatureIndex;if(a&&o&&e.id===a.layerIds[0]){var s=n.collisionBoxArray,l=a.layers[0].layout,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.EXTENT,p=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h=C(p,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,N(n,1,this.transform.zoom)),d=C(p,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,N(n,1,this.transform.zoom));this.retainedQueryData[a.bucketInstanceId]=new function(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,n.tileID),this.placeLayerBucket(a,p,h,d,u,c,i,n.holdingForFade(),r,s)}},Xe.prototype.placeLayerBucket=function(e,n,i,r,a,o,s,l,u,c){var p=e.layers[0].layout,h=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),d=p.get("text-optional"),f=p.get("icon-optional"),m=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);for(var g=0;g<e.symbolInstances.length;g++){var v=e.symbolInstances.get(g);if(!u[v.crossTileID]){if(l){this.placements[v.crossTileID]=new Ge(!1,!1,!1);continue}var y=!1,_=!1,x=!0,b=null,w=null,E=null,T=0,S=0,C=e.collisionArrays[g];C.textFeatureIndex&&(T=C.textFeatureIndex),C.textBox&&(y=(b=this.collisionIndex.placeCollisionBox(C.textBox,p.get("text-allow-overlap"),o,n,m.predicate)).box.length>0,x=x&&b.offscreen);var k=C.textCircles;if(k){var z=e.text.placedSymbolArray.get(v.horizontalPlacedTextSymbolIndex),A=t.evaluateSizeForFeature(e.textSizeData,h,z);w=this.collisionIndex.placeCollisionCircles(k,p.get("text-allow-overlap"),a,o,z,e.lineVertexArray,e.glyphOffsetArray,A,n,i,s,"map"===p.get("text-pitch-alignment"),m.predicate),y=p.get("text-allow-overlap")||w.circles.length>0,x=x&&w.offscreen}C.iconFeatureIndex&&(S=C.iconFeatureIndex),C.iconBox&&(_=(E=this.collisionIndex.placeCollisionBox(C.iconBox,p.get("icon-allow-overlap"),o,n,m.predicate)).box.length>0,x=x&&E.offscreen);var M=d||0===v.numGlyphVertices&&0===v.numVerticalGlyphVertices,I=f||0===v.numIconVertices;M||I?I?M||(_=_&&y):y=_&&y:_=y=_&&y,y&&b&&this.collisionIndex.insertCollisionBox(b.box,p.get("text-ignore-placement"),e.bucketInstanceId,T,m.ID),_&&E&&this.collisionIndex.insertCollisionBox(E.box,p.get("icon-ignore-placement"),e.bucketInstanceId,S,m.ID),y&&w&&this.collisionIndex.insertCollisionCircles(w.circles,p.get("text-ignore-placement"),e.bucketInstanceId,T,m.ID),this.placements[v.crossTileID]=new Ge(y,_,x||e.justReloaded),u[v.crossTileID]=!0}}e.justReloaded=!1},Xe.prototype.commit=function(t,e){this.commitTime=e;var n=!1,i=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,r=t?t.opacities:{};for(var a in this.placements){var o=this.placements[a],s=r[a];s?(this.opacities[a]=new $e(s,i,o.text,o.icon),n=n||o.text!==s.text.placed||o.icon!==s.icon.placed):(this.opacities[a]=new $e(null,i,o.text,o.icon,o.skipFade),n=n||o.text||o.icon)}for(var l in r){var u=r[l];if(!this.opacities[l]){var c=new $e(u,i,!1,!1);c.isHidden()||(this.opacities[l]=c,n=n||u.text.placed||u.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},Xe.prototype.updateLayerOpacities=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1){var a=r[i],o=a.getBucket(t);o&&a.latestFeatureIndex&&t.id===o.layerIds[0]&&this.updateBucketOpacities(o,n,a.collisionBoxArray)}},Xe.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var i=t.layers[0].layout,r=new $e(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),o=i.get("icon-allow-overlap"),s=new $e(null,0,a&&(o||!t.hasIconData()||i.get("icon-optional")),o&&(a||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(n);for(var l=0;l<t.symbolInstances.length;l++){var u=t.symbolInstances.get(l),c=e[u.crossTileID],p=this.opacities[u.crossTileID];c?p=r:p||(p=s,this.opacities[u.crossTileID]=p),e[u.crossTileID]=!0;var h=u.numGlyphVertices>0||u.numVerticalGlyphVertices>0,d=u.numIconVertices>0;if(h){for(var f=j(p.text),m=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,g=0;g<m;g++)t.text.opacityVertexArray.emplaceBack(f);t.text.placedSymbolArray.get(u.horizontalPlacedTextSymbolIndex).hidden=p.text.isHidden(),u.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).hidden=p.text.isHidden())}if(d){for(var v=j(p.icon),y=0;y<u.numIconVertices/4;y++)t.icon.opacityVertexArray.emplaceBack(v);t.icon.placedSymbolArray.get(l).hidden=p.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var _=t.collisionArrays[l];if(_){_.textBox&&V(t.collisionBox.collisionVertexArray,p.text.placed,!1),_.iconBox&&V(t.collisionBox.collisionVertexArray,p.icon.placed,!1);var x=_.textCircles;if(x&&t.hasCollisionCircleData())for(var b=0;b<x.length;b+=5){var w=c||0===x[b+4];V(t.collisionCircle.collisionVertexArray,p.text.placed,w)}}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},Xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},Xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Xe.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},Xe.prototype.setStale=function(){this.stale=!0};var We=Math.pow(2,25),Ze=Math.pow(2,24),Ye=Math.pow(2,17),Ke=Math.pow(2,16),Je=Math.pow(2,9),Qe=Math.pow(2,8),tn=Math.pow(2,1),en=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};en.prototype.continuePlacement=function(t,e,n,i,r){for(;this._currentTileIndex<t.length;){var a=t[this._currentTileIndex];if(e.placeLayerTile(i,a,n,this._seenCrossTileIDs),this._currentTileIndex++,r())return!0}};var nn=function(t,e,n,i,r,a){this.placement=new Xe(t,r,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1};nn.prototype.isDone=function(){return this._done},nn.prototype.continuePlacement=function(e,n,i){for(var r=this,a=t.browser.now(),o=function(){var e=t.browser.now()-a;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[r._currentPlacementIndex]],l=r.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(r._inProgressLayer||(r._inProgressLayer=new en),r._inProgressLayer.continuePlacement(i[s.source],r.placement,r._showCollisionBoxes,s,o))return;delete r._inProgressLayer}r._currentPlacementIndex--}this._done=!0},nn.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var rn=512/t.EXTENT/2,an=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0;i<e.length;i++){var r=e.get(i),a=r.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};an.prototype.getScaledCoordinates=function(e,n){var i=n.canonical.z-this.tileID.canonical.z,r=rn/Math.pow(2,i);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},an.prototype.findMatches=function(t,e,n){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var a=t.get(r);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o)for(var s=this.getScaledCoordinates(a,e),l=0,u=o;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=i&&Math.abs(c.coord.y-s.y)<=i&&!n[c.crossTileID]){n[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}}};var on=function(){this.maxCrossTileID=0};on.prototype.generate=function(){return++this.maxCrossTileID};var sn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};sn.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var i=this.indexes[n],r={};for(var a in i){var o=i[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+e),r[o.tileID.key]=o}this.indexes[n]=r}this.lng=t},sn.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var u=o[t.scaledTo(Number(a)).key];u&&u.findMatches(e.symbolInstances,t,r)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=n.generate(),r[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new an(t,e.symbolInstances,e.bucketInstanceId),!0},sn.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var i=0,r=e.indexedSymbolInstances[n];i<r.length;i+=1){var a=r[i];delete this.usedCrossTileIDs[t][a.crossTileID]}},sn.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var i=this.indexes[n];for(var r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e};var ln=function(){this.layerIndexes={},this.crossTileIDs=new on,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ln.prototype.addLayer=function(t,e,n){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new sn);var r=!1,a={};i.handleWrapJump(n);for(var o=0,s=e;o<s.length;o+=1){var l=s[o],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(l.tileID,u,this.crossTileIDs)&&(r=!0),a[u.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(r=!0),r},ln.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var un=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},cn=t.pick(Fe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),pn=t.pick(Fe,["setCenter","setZoom","setBearing","setPitch"]),hn=function(e){function a(n,i){var r=this;void 0===i&&(i={}),e.call(this),this.map=n,this.dispatcher=new Ft((Be||(Be=new Re),Be),this),this.imageManager=new Mt,this.glyphManager=new Lt(n._transformRequest,i.localIdeographFontFamily),this.lineAtlas=new Rt(256,512),this.crossTileSymbolIndex=new ln,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates();var o=this;this._rtlTextPluginCallback=a.registerForPluginAvailability(function(t){for(var e in o.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),o.sourceCaches)o.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=r.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var i in r._layers){var a=r._layers[i];a.source===n.id&&r._validateLayer(a)}}}})}return e&&(a.__proto__=e),a.prototype=Object.create(e&&e.prototype),a.prototype.constructor=a,a.prototype.loadURL=function(e,a){var o=this;void 0===a&&(a={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var s="boolean"==typeof a.validate?a.validate:!i(e);e=function(t,e){if(!i(t))return t;var a=r(t);return a.path="/styles/v1"+a.path,n(a,e)}(e,a.accessToken);var l=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(l,function(e,n){o._request=null,e?o.fire(new t.ErrorEvent(e)):n&&o._load(n,s)})},a.prototype.loadJSON=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){i._request=null,i._load(e,!1!==n.validate)})},a.prototype._load=function(e,n){var i=this;if(!n||!un(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)i.addSource(r,e.sources[r],{validate:!1});e.sprite?this._spriteRequest=function(e,n,i){function r(){if(s)i(s);else if(a&&o){var e=t.browser.getImageData(o),n={};for(var r in a){var l=a[r],u=l.width,c=l.height,p=l.x,h=l.y,d=l.sdf,f=l.pixelRatio,m=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,m,{x:p,y:h},{x:0,y:0},{width:u,height:c}),n[r]={data:m,pixelRatio:f,sdf:d}}i(null,n)}}var a,o,s,l=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(n(Et(e,l,".json"),t.ResourceType.SpriteJSON),function(t,e){u=null,s||(s=t,a=e,r())}),c=t.getImage(n(Et(e,l,".png"),t.ResourceType.SpriteImage),function(t,e){c=null,s||(s=t,o=e,r())});return{cancel:function(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(n)for(var r in n)i.imageManager.addImage(r,n[r]);i.imageManager.setLoaded(!0),i.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=v(this.stylesheet.layers);this._order=a.map(function(t){return t.id}),this._layers={};for(var o=0,s=a;o<s.length;o+=1){var l=s[o];(l=t.createStyleLayer(l)).setEventedParent(i,{layer:{id:l.id}}),i._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Bt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},a.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var i=e.sourceLayer;if(i){var r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},a.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},a.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},a.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},a.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},a.prototype.update=function(e){if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var r in(n.length||i.length)&&this._updateWorkerLayers(n,i),this._updatedSources){var a=this._updatedSources[r];"reload"===a?this._reloadSource(r):"clear"===a&&this._clearSource(r)}for(var o in this._updatedPaintProps)this._layers[o].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire(new t.Event("data",{dataType:"style"}))}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var l=0,u=this._order;l<u.length;l+=1){var c=u[l],p=this._layers[c];p.recalculate(e),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},a.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},a.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},a.prototype.setState=function(e){var n=this;if(this._checkLoaded(),un(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=v(e.layers);var i=S(this.serialize(),e).filter(function(t){return!(t.command in pn)});if(0===i.length)return!1;var r=i.filter(function(t){return!(t.command in cn)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return i.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},a.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},a.prototype.getImage=function(t){return this.imageManager.getImage(t)},a.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},a.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},a.prototype.addSource=function(e,n,i){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Oe(e,n,this.dispatcher);a.style=this,a.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:e}}),a.onAdd(this.map),this._changed=!0}},a.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},a.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},a.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},a.prototype.addLayer=function(e,n,i){this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone(e),e=t.extend(e,{source:r})),!this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},i)){var a=t.createStyleLayer(e);this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}});var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=a,this._removedLayers[r]&&a.source){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a)}}},a.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var i=this._order.indexOf(e);this._order.splice(i,1);var r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},a.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},a.prototype.getLayer=function(t){return this._layers[t]},a.prototype.setLayerZoomRange=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},a.prototype.setFilter=function(e,n){this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n)||(i.filter=t.clone(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},a.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},a.prototype.setLayoutProperty=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?t.deepEqual(r.getLayoutProperty(n),i)||(r.setLayoutProperty(n,i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},a.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},a.prototype.setPaintProperty=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?t.deepEqual(r.getPaintProperty(n),i)||(r.setPaintProperty(n,i)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},a.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},a.prototype.setFeatureState=function(e,n){this._checkLoaded();var i=e.source,r=e.sourceLayer,a=this.sourceCaches[i],o=parseInt(e.id,10);void 0!==a?"vector"!==a.getSource().type||r?isNaN(o)||o<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):a.setFeatureState(r,o,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},a.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,i=e.sourceLayer,r=this.sourceCaches[n],a=parseInt(e.id,10);if(void 0!==r)if("vector"!==r.getSource().type||i){if(!(isNaN(a)||a<0))return r.getFeatureState(i,a);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},a.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},a.prototype.serialize=function(){var e=this;return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(t){return void 0!==t})},a.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},a.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var i=this._order[n],r=0,a=t;r<a.length;r+=1){var o=a[r][i];if(o)for(var s=0,l=o;s<l.length;s+=1){var u=l[s];e.push(u)}}return e},a.prototype.queryRenderedFeatures=function(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,o=n.layers;a<o.length;a+=1){var s=o[a],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[l.source]=!0}}var u=[],h=e.map(function(t){return i.pointCoordinate(t)});for(var d in this.sourceCaches)n.layers&&!r[d]||u.push(c(this.sourceCaches[d],this._layers,h,n,i));return this.placement&&u.push(function(t,e,n,i,r,a){for(var o={},s=r.queryRenderedSymbols(n),l=[],u=0,c=Object.keys(s).map(Number);u<c.length;u+=1){var h=c[u];l.push(a[h])}l.sort(p);for(var d=function(){var e=m[f],n=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,i.filter,i.layers,t);for(var r in n){var a=o[r]=o[r]||[],l=n[r];l.sort(function(t,n){var i=e.featureSortOrder;if(i){var r=i.indexOf(t.featureIndex);return i.indexOf(n.featureIndex)-r}return n.featureIndex-t.featureIndex});for(var u=0,c=l;u<c.length;u+=1){var p=c[u];a.push(p.feature)}}},f=0,m=l;f<m.length;f+=1)d();var g=function(n){o[n].forEach(function(i){var r=t[n],a=e[r.source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a})};for(var v in o)g(v);return o}(this._layers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(u)},a.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var i=this.sourceCaches[e];return i?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),i=[],r={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;r[s]||(r[s]=!0,o.querySourceFeatures(i,e))}return i}(i,n):[]},a.prototype.addSourceType=function(t,e,n){return a.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(a.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},a.prototype.getLight=function(){return this.light.getLight()},a.prototype.setLight=function(e){this._checkLoaded();var n=this.light.getLight(),i=!1;for(var r in e)if(!t.deepEqual(e[r],n[r])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(a)}},a.prototype._validate=function(e,n,i,r,a){return(!a||!1!==a.validate)&&un(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.styleSpec},r)))},a.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},a.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},a.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},a.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},a.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},a.prototype._updatePlacement=function(e,n,i,r){for(var a=!1,o=!1,s={},l=0,u=this._order;l<u.length;l+=1){var c=u[l],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var h=this.sourceCaches[p.source];s[p.source]=h.getRenderableIds(!0).map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var d=this.crossTileSymbolIndex.addLayer(p,s[p.source],e.center.lng);a=a||d}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var f=this._layerOrderChanged;if((f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new nn(e,this._order,f,n,i,r),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),o=!0),a&&this.pauseablePlacement.placement.setStale()),o||a)for(var m=0,g=this._order;m<g.length;m+=1){var v=g[m],y=this._layers[v];"symbol"===y.type&&this.placement.updateLayerOpacities(y,s[y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},a.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},a.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},a.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},a}(t.Evented);hn.getSourceType=function(t){return Zt[t]},hn.setSourceType=function(t,e){Zt[t]=e},hn.registerForPluginAvailability=t.registerForPluginAvailability;var dn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),fn={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_color(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"\nuniform vec2 u_texsize;\nuniform sampler2D u_image;\nuniform float u_fade;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_fade) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_fade) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileZoomRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileZoomRatio, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_fade);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_height_factor;\nuniform vec4 u_scale;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\nuniform mediump vec4 u_scale;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    vec2 pattern_size_a = vec2(display_size_a.x * fromScale / tileZoomRatio, display_size_a.y);\n    vec2 pattern_size_b = vec2(display_size_b.x * toScale / tileZoomRatio, display_size_b.y);\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_a.y + 2.0) / 2.0) / pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_b.y + 2.0) / 2.0) / pattern_size_b.y);\n    vec2 pos_a = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n    // float tileRatio = u_scale.y;\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},mn=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,gn=function(t){var e=fn[t],n={};e.fragmentSource=e.fragmentSource.replace(mn,function(t,e,i,r,a){return n[a]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(mn,function(t,e,i,r,a){var o="float"===r?"vec2":"vec4",s=a.match(/color/)?"color":o;return n[a]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+i+" "+o+" a_"+a+";\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+s+"(a_"+a+", a_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+i+" "+o+" a_"+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = unpack_mix_"+s+"(a_"+a+", a_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"})};for(var vn in fn)gn(vn);var yn=fn,_n=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};_n.prototype.bind=function(t,e,n,i,r,a,o,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==i.length,u=0;!l&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(l=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,n,i,r,a,o,s):(t.bindVertexArrayOES.set(this.vao),o&&o.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())},_n.prototype.freshBind=function(t,e,n,i,r,a,o){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,d=n;h<d.length;h+=1)d[h].enableAttributes(c,t);a&&a.enableAttributes(c,t),o&&o.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(var f=0,m=n;f<m.length;f+=1){var g=m[f];g.bind(),g.setVertexAttribPointers(c,t,r)}a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),i&&i.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),u.currentNumAttributes=l},_n.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xn=function(e,n,i,r,a){var o=e.gl;this.program=o.createProgram();var s=i.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));a&&s.push("#define OVERDRAW_INSPECTOR;");var l=s.concat(yn.prelude.fragmentSource,n.fragmentSource).join("\n"),u=s.concat(yn.prelude.vertexSource,n.vertexSource).join("\n"),c=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(c,l),o.compileShader(c),o.attachShader(this.program,c);var p=o.createShader(o.VERTEX_SHADER);o.shaderSource(p,u),o.compileShader(p),o.attachShader(this.program,p);for(var h=i.layoutAttributes||[],d=0;d<h.length;d++)o.bindAttribLocation(this.program,d,h[d].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var f={},m=0;m<this.numAttributes;m++){var g=o.getActiveAttrib(this.program,m);g&&(this.attributes[g.name]=o.getAttribLocation(this.program,g.name))}for(var v=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),y=0;y<v;y++){var _=o.getActiveUniform(this.program,y);_&&(f[_.name]=o.getUniformLocation(this.program,_.name))}this.fixedUniforms=r(e,f),this.binderUniforms=i.getUniforms(e,f)};xn.prototype.draw=function(t,e,n,i,r,a,o,s,l,u,c,p,h,d,f){var m,g=t.gl;for(var v in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);h&&h.setUniforms(t,this.binderUniforms,c,{zoom:p});for(var y=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],_=0,x=u.get();_<x.length;_+=1){var b=x[_],w=b.vaos||(b.vaos={});(w[o]||(w[o]=new _n)).bind(t,this,s,h?h.getPaintVertexBuffers():[],l,b.vertexOffset,d,f),g.drawElements(e,b.primitiveLength*y,g.UNSIGNED_SHORT,b.primitiveOffset*y*2)}};var bn=function(e,n){var i=n.style.light,r=i.properties.get("position"),a=[r.x,r.y,r.z],o=t.create$2();"viewport"===i.properties.get("anchor")&&t.fromRotation(o,-n.transform.angle),t.transformMat3(a,a,o);var s=i.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b]}},wn=function(e,n,i,r,a){return t.extend(bn(e,n),U(r,n,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},En=function(e,n,i){var r=t.create();t.ortho(r,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:r,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:i,u_opacity:n.paint.get("fill-extrusion-opacity")}},Tn=function(t){return{u_matrix:t}},Sn=function(e,n,i,r){return t.extend(Tn(e),U(i,n,r))},Cn=function(t,e){return{u_matrix:t,u_world:e}},kn=function(e,n,i,r,a){return t.extend(Sn(e,n,i,r),{u_world:a})},zn=function(t,e,n,i){var r,a,o=t.transform;if("map"===i.paint.get("circle-pitch-alignment")){var s=N(n,1,o.zoom);r=!0,a=[s,s]}else r=!1,a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+r,u_extrude_scale:a}},An=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},Mn=function(t,e,n){var i=N(n,1,e.zoom),r=Math.pow(2,e.zoom-n.tileID.overscaledZ),a=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*r),e.pixelsToGLUnits[1]/(i*r)],u_overscale_factor:a}},In=function(t,e){return{u_matrix:t,u_color:e}},Pn=function(t){return{u_matrix:t}},Ln=function(t,e,n,i){return{u_matrix:t,u_extrude_scale:N(e,1,n),u_intensity:i}},Dn=function(e,n,i,r){var a=t.create();t.ortho(a,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:a,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:i,u_color_ramp:r,u_opacity:n.paint.get("heatmap-opacity")}},On=function(e,n,i){var r=i.paint.get("hillshade-shadow-color"),a=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color"),s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);return"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle),{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),!0),u_image:0,u_latrange:function(e,n){var i=n.toCoordinate(),r=new t.Coordinate(i.column,i.row+1,i.zoom);return[e.transform.coordinateLocation(i).lat,e.transform.coordinateLocation(r).lat]}(e,n.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:a,u_accent:o}},Bn=function(e,n){var i=e.dem.dim,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[2*i,2*i],u_zoom:e.tileID.overscaledZ,u_maxzoom:n}},Rn=function(t,e,n){var i=t.transform;return{u_matrix:$(t,e,n),u_ratio:1/N(e,1,i.zoom),u_gl_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Fn=function(e,n,i){return t.extend(Rn(e,n,i),{u_image:0})},Nn=function(e,n,i,r){var a=e.transform,o=q(n,a);return{u_matrix:$(e,n,i),u_texsize:n.imageAtlasTexture.size,u_ratio:1/N(n,1,a.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,o,r.fromScale,r.toScale],u_fade:r.t,u_gl_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Vn=function(e,n,i,r,a){var o=e.transform,s=e.lineAtlas,l=q(n,o),u="round"===i.layout.get("line-cap"),c=s.getDash(r.from,u),p=s.getDash(r.to,u),h=c.width*a.fromScale,d=p.width*a.toScale;return t.extend(Rn(e,n,i),{u_patternscale_a:[l/h,-c.height/2],u_patternscale_b:[l/d,-p.height/2],u_sdfgamma:s.width/(256*Math.min(h,d)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:p.y,u_mix:a.t})},jn=function(t,e,n,i,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(o=r.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=r.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(r.paint.get("raster-hue-rotate"))};var a,o},Un=function(t,e,n,i,r,a,o,s,l,u){var c=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_gl_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+i,u_texsize:u,u_texture:0}},qn=function(e,n,i,r,a,o,s,l,u,c,p){var h=a.transform;return t.extend(Un(e,n,i,r,a,o,s,l,u,c),{u_gamma_scale:r?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_is_halo:+p})},$n=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Gn=function(e,n,i,r,a,o){return t.extend(function(t,e,n,i){var r=n.imageManager.getPattern(t.from),a=n.imageManager.getPattern(t.to),o=n.imageManager.getPixelSize(),s=o.width,l=o.height,u=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/u,p=c*(i.tileID.canonical.x+i.tileID.wrap*u),h=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/N(i,1,n.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(r,o,i,a),{u_matrix:e,u_opacity:n})},Hn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},extrusionTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:An,collisionCircle:An,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_image:new t.Uniform1i(e,n.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}},Xn=t.identity(new Float32Array(16)),Wn=t.properties.layout,Zn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Yn={symbol:function(t,e,n,i){if("translucent"===t.renderPass){var r=Pe.disabled,a=t.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&W(t,e,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),r,a),0!==n.paint.get("text-opacity").constantOr(1)&&W(t,e,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),r,a),e.map.showCollisionBoxes&&function(t,e,n,i){X(t,e,n,i,!1),X(t,e,n,i,!0)}(t,e,n,i)}},circle:function(t,e,n,i){if("translucent"===t.renderPass){var r=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),o=n.paint.get("circle-stroke-opacity");if(0!==r.constantOr(1)||0!==a.constantOr(1)&&0!==o.constantOr(1))for(var s=t.context,l=s.gl,u=t.depthModeForSublayer(0,Ie.ReadOnly),c=Pe.disabled,p=t.colorModeForRenderPass(),h=0;h<i.length;h++){var d=i[h],f=e.getTile(d),m=f.getBucket(n);if(m){var g=m.programConfigurations.get(n.id);t.useProgram("circle",g).draw(s,l.TRIANGLES,u,c,p,zn(t,d,f,n),n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,g)}}}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,o=a.gl,s=e.depthModeForSublayer(0,Ie.ReadOnly),l=Pe.disabled,u=new Le([o.ONE,o.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,n,i,r){var a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n.width/4,n.height/4,0,a.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(i),e.extTextureHalfFloat&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,n,i,r))}(t,e,a,r)}}(a,e,i),a.clear({color:t.Color.transparent});for(var c=0;c<r.length;c++){var p=r[c];if(!n.hasRenderableParent(p)){var h=n.getTile(p),d=h.getBucket(i);if(d){var f=d.programConfigurations.get(i.id),m=e.useProgram("heatmap",f),g=e.transform.zoom;m.draw(a,o.TRIANGLES,s,l,u,Ln(p.posMatrix,h,g,i.paint.get("heatmap-intensity")),i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,f)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var i=e.context,r=i.gl,a=n.heatmapFbo;if(a){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,Ie.disabled,Pe.disabled,e.colorModeForRenderPass(),Dn(e,n,0,1),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,i))},line:function(e,n,i,r){if("translucent"===e.renderPass){var a=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=e.depthModeForSublayer(0,Ie.ReadOnly),l=e.colorModeForRenderPass(),u=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),p=c.constantOr(1),h=i.paint.get("line-gradient"),d=i.getCrossfadeParameters(),f=u?"lineSDF":p?"linePattern":h?"lineGradient":"line",m=e.context,g=m.gl,v=!0;if(h){m.activeTexture.set(g.TEXTURE0);var y=i.gradientTexture;if(!i.gradient)return;y||(y=i.gradientTexture=new t.Texture(m,i.gradient,g.RGBA)),y.bind(g.LINEAR,g.CLAMP_TO_EDGE)}for(var _=0,x=r;_<x.length;_+=1){var b=x[_],w=n.getTile(b);if(!p||w.patternsLoaded()){var E=w.getBucket(i);if(E){var T=E.programConfigurations.get(i.id),S=e.context.program.get(),C=e.useProgram(f,T),k=v||C.program!==S,z=c.constantOr(null);if(z&&w.imageAtlas){var A=w.imageAtlas.patternPositions[z.to],M=w.imageAtlas.patternPositions[z.from];A&&M&&T.setConstantPatternPositions(A,M)}var I=u?Vn(e,w,i,u,d):p?Nn(e,w,i,d):h?Fn(e,w,i):Rn(e,w,i);u&&(k||e.lineAtlas.dirty)?(m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m)):p&&(m.activeTexture.set(g.TEXTURE0),w.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),T.updatePatternPaintBuffers(d)),C.draw(m,g.TRIANGLES,s,e.stencilModeForClipping(b),l,I,i.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,i.paint,e.transform.zoom,T),v=!1}}}}}},fill:function(e,n,i,r){var a=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern").constantOr(1)||1!==a.constantOr(t.Color.transparent).a||1!==o.constantOr(0)?"translucent":"opaque";e.renderPass===l&&Y(e,n,i,r,e.depthModeForSublayer(1,"opaque"===e.renderPass?Ie.ReadWrite:Ie.ReadOnly),s,!1),"translucent"===e.renderPass&&i.paint.get("fill-antialias")&&Y(e,n,i,r,e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Ie.ReadOnly),s,!0)}},"fill-extrusion":function(e,n,i,r){0!==i.paint.get("fill-extrusion-opacity")&&("offscreen"===e.renderPass?(function(e,n){var i=e.context,r=i.gl,a=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!a){var o=new t.Texture(i,{width:e.width,height:e.height,data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE),(a=n.viewportFrame=i.createFramebuffer(e.width,e.height)).colorAttachment.set(o.texture)}i.bindFramebuffer.set(a.framebuffer),a.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(i.clear({depth:1}),e.depthRboNeedsClear=!1),i.clear({color:t.Color.transparent})}(e,i),function(t,e,n,i,r,a,o){for(var s=t.context,l=s.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=n.getCrossfadeParameters(),h=0,d=i;h<d.length;h+=1){var f=d[h],m=e.getTile(f),g=m.getBucket(n);if(g){var v=g.programConfigurations.get(n.id),y=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",v);c&&(t.context.activeTexture.set(l.TEXTURE0),m.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePatternPaintBuffers(p));var _=u.constantOr(null);if(_&&m.imageAtlas){var x=m.imageAtlas.patternPositions[_.to],b=m.imageAtlas.patternPositions[_.from];x&&b&&v.setConstantPatternPositions(x,b)}var w=t.translatePosMatrix(f.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),E=c?wn(w,t,f,p,m):bn(w,t);y.draw(s,s.gl.TRIANGLES,r,a,o,E,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,t.transform.zoom,v)}}}(e,n,i,r,new Ie(e.context.gl.LEQUAL,Ie.ReadWrite,[0,1]),Pe.disabled,e.colorModeForRenderPass())):"translucent"===e.renderPass&&function(t,e){var n=e.viewportFrame;if(n){var i=t.context,r=i.gl;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.useProgram("extrusionTexture").draw(i,r.TRIANGLES,Ie.disabled,Pe.disabled,t.colorModeForRenderPass(),En(t,e,0),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}(e,i))},hillshade:function(t,e,n,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,a=e.getSource().maxzoom,o=t.depthModeForSublayer(0,Ie.ReadOnly),s=Pe.disabled,l=t.colorModeForRenderPass(),u=0,c=i;u<c.length;u+=1){var p=c[u],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?J(t,h,n,a,o,s,l):"translucent"===t.renderPass&&K(t,h,n,o,s,l)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity"))for(var r=t.context,a=r.gl,o=e.getSource(),s=t.useProgram("raster"),l=Pe.disabled,u=t.colorModeForRenderPass(),c=i.length&&i[0].overscaledZ,p=0,h=i;p<h.length;p+=1){var d=h[p],f=t.depthModeForSublayer(d.overscaledZ-c,1===n.paint.get("raster-opacity")?Ie.ReadWrite:Ie.ReadOnly,a.LESS),m=e.getTile(d),g=t.transform.calculatePosMatrix(d.toUnwrapped(),!0);m.registerFadeDuration(n.paint.get("raster-fade-duration"));var v=e.findLoadedParent(d,0),y=Q(m,v,e,n,t.transform),_=void 0,x=void 0,b="nearest"===n.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;r.activeTexture.set(a.TEXTURE0),m.texture.bind(b,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(a.TEXTURE1),v?(v.texture.bind(b,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),_=Math.pow(2,v.tileID.overscaledZ-m.tileID.overscaledZ),x=[m.tileID.canonical.x*_%1,m.tileID.canonical.y*_%1]):m.texture.bind(b,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var w=jn(g,x||[0,0],_||1,y,n);o instanceof Ht?s.draw(r,a.TRIANGLES,f,l,u,w,n.id,o.boundsBuffer,t.quadTriangleIndexBuffer,o.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(r,a.TRIANGLES,f,l,u,w,n.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,n.paint,t.transform.zoom):s.draw(r,a.TRIANGLES,f,l,u,w,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var i=n.paint.get("background-color"),r=n.paint.get("background-opacity");if(0!==r){var a=t.context,o=a.gl,s=t.transform,l=s.tileSize,u=n.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=u||1!==i.a||1!==r?"translucent":"opaque";if(t.renderPass===c){var p=Pe.disabled,h=t.depthModeForSublayer(0,"opaque"===c?Ie.ReadWrite:Ie.ReadOnly),d=t.colorModeForRenderPass(),f=t.useProgram(u?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});u&&(a.activeTexture.set(o.TEXTURE0),t.imageManager.bind(t.context));for(var g=n.getCrossfadeParameters(),v=0,y=m;v<y.length;v+=1){var _=y[v],x=t.transform.calculatePosMatrix(_.toUnwrapped()),b=u?Gn(x,r,t,u,{tileID:_,tileSize:l},g):$n(x,r,i);f.draw(a,o.TRIANGLES,h,p,d,b,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var i=0;i<n.length;i++)tt(t,e,n[i])}},Kn=function(e,n){this.context=new De(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Oe.maxUnderzooming+Oe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new ln};Kn.prototype.resize=function(e,n){var i=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,a=this.style._order;r<a.length;r+=1){var o=a[r];this.style._layers[o].resize()}this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Kn.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,dn.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,dn.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,dn.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new Pe({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},Kn.prototype.clearStencil=function(){var e=this.context,n=e.gl,i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Ie.disabled,this.stencilClearMode,Le.disabled,Pn(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Kn.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(Le.disabled),e.setDepthMode(Ie.disabled);var i=this.useProgram("clippingMask"),r=1;this._tileClippingMaskIDs={};for(var a=0,o=t;a<o.length;a+=1){var s=o[a],l=this._tileClippingMaskIDs[s.key]=r++;i.draw(e,n.TRIANGLES,Ie.disabled,new Pe({func:n.ALWAYS,mask:0},l,255,n.KEEP,n.KEEP,n.REPLACE),Le.disabled,Pn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},Kn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Pe({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},Kn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Le([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Le.unblended:Le.alphaBlended},Kn.prototype.depthModeForSublayer=function(t,e,n){var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,r=i-1+this.depthRange;return new Ie(n||this.context.gl.LEQUAL,e,[r,i])},Kn.prototype.render=function(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var i=this.style._order,r=this.style.sourceCaches;for(var a in r){var o=r[a];o.used&&o.prepare(this.context)}var s,l={},u={},c={};for(var p in r){var h=r[p];l[p]=h.getVisibleCoordinates(),u[p]=l[p].slice().reverse(),c[p]=h.getVisibleCoordinates(!0).reverse()}for(var d in r){var f=r[d],m=f.getSource();if("raster"===m.type||"raster-dem"===m.type){for(var g=[],v=0,y=l[d];v<y.length;v+=1){var _=y[v];g.push(f.getTile(_))}G(g,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var x=0,b=i;x<b.length;x+=1){var w=b[x],E=this.style._layers[w];if(E.hasOffscreenPass()&&!E.isHidden(this.transform.zoom)){var T=u[E.source];T.length&&this.renderLayer(this,r[E.source],E,T)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[i[this.currentLayer]],C=r[S.source],k=l[S.source];S.source!==s&&C&&(this.clearStencil(),C.getSource().isTileClipped&&this._renderTileClippingMasks(k)),this.renderLayer(this,C,S,k),s=S.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<i.length;this.currentLayer++){var z=this.style._layers[i[this.currentLayer]],A=r[z.source],M=("symbol"===z.type?c:u)[z.source];z.source!==s&&A&&(this.clearStencil(),A.getSource().isTileClipped&&this._renderTileClippingMasks(l[z.source])),this.renderLayer(this,A,z,M),s=z.source}if(this.options.showTileBoundaries)for(var I in r){Yn.debug(this,r[I],l[I]);break}},Kn.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},Kn.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||i.length)&&(this.id=n.id,Yn[n.type](t,e,n,i))},Kn.prototype.translatePosMatrix=function(e,n,i,r,a){if(!i[0]&&!i[1])return e;var o=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);i=[i[0]*l-i[1]*s,i[0]*s+i[1]*l]}var u=[a?i[0]:N(n,i[0],this.transform.zoom),a?i[1]:N(n,i[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},Kn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},Kn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},Kn.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),n=this.imageManager.getPattern(t.to);return!e||!n},Kn.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new xn(this.context,yn[t],e,Hn[t],this._showOverdrawInspector)),this.cache[n]};var Jn=function(t,e,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Nt(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Qn={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Jn.prototype.clone=function(){var t=new Jn(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Qn.minZoom.get=function(){return this._minZoom},Qn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Qn.maxZoom.get=function(){return this._maxZoom},Qn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Qn.renderWorldCopies.get=function(){return this._renderWorldCopies},Qn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Qn.worldSize.get=function(){return this.tileSize*this.scale},Qn.centerPoint.get=function(){return this.size._div(2)},Qn.size.get=function(){return new t.Point(this.width,this.height)},Qn.bearing.get=function(){return-this.angle/Math.PI*180},Qn.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$4(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Qn.pitch.get=function(){return this._pitch/Math.PI*180},Qn.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Qn.fov.get=function(){return this._fov/Math.PI*180},Qn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Qn.zoom.get=function(){return this._zoom},Qn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Qn.center.get=function(){return this._center},Qn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Jn.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Jn.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0),0),r=this.pointCoordinate(new t.Point(this.width,0),0),a=this.pointCoordinate(new t.Point(this.width,this.height),0),o=this.pointCoordinate(new t.Point(0,this.height),0),s=Math.floor(Math.min(i.column,r.column,a.column,o.column)),l=Math.floor(Math.max(i.column,r.column,a.column,o.column)),u=s-1;u<=l+1;u++)0!==u&&n.push(new t.UnwrappedTileID(u,e));return n},Jn.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),i=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var r=this.pointCoordinate(this.centerPoint,n),a=new t.Point(r.column-.5,r.row-.5);return function(e,n,i,r){function a(n,a,l){var u,c,p,h;if(l>=0&&l<=o)for(u=n;u<a;u++)c=Math.floor(u/o),p=(u%o+o)%o,0!==c&&!0!==r||(h=new t.OverscaledTileID(i,c,e,p,l),s[h.key]=h)}void 0===r&&(r=!0);var o=1<<e,s={};return it(n[0],n[1],n[2],0,o,a),it(n[2],n[3],n[0],0,o,a),Object.keys(s).map(function(t){return s[t]})}(n,[this.pointCoordinate(new t.Point(0,0),n),this.pointCoordinate(new t.Point(this.width,0),n),this.pointCoordinate(new t.Point(this.width,this.height),n),this.pointCoordinate(new t.Point(0,this.height),n)],e.reparseOverscaled?i:n,this._renderWorldCopies).sort(function(t,e){return a.dist(t.canonical)-a.dist(e.canonical)})},Jn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Qn.unmodified.get=function(){return this._unmodified},Jn.prototype.zoomScale=function(t){return Math.pow(2,t)},Jn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Jn.prototype.project=function(e){return new t.Point(this.lngX(e.lng),this.latY(e.lat))},Jn.prototype.unproject=function(t){return new Nt(this.xLng(t.x),this.yLat(t.y))},Qn.x.get=function(){return this.lngX(this.center.lng)},Qn.y.get=function(){return this.latY(this.center.lat)},Qn.point.get=function(){return new t.Point(this.x,this.y)},Jn.prototype.lngX=function(t){return(180+t)*this.worldSize/360},Jn.prototype.latY=function(e){return e=t.clamp(e,-this.maxValidLatitude,this.maxValidLatitude),(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},Jn.prototype.xLng=function(t){return 360*t/this.worldSize-180},Jn.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},Jn.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},Jn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Jn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Jn.prototype.locationCoordinate=function(e){return new t.Coordinate(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Jn.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new Nt(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},Jn.prototype.pointCoordinate=function(e,n){void 0===n&&(n=this.tileZoom);var i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var a=i[3],o=r[3],s=i[0]/a,l=r[0]/o,u=i[1]/a,c=r[1]/o,p=i[2]/a,h=r[2]/o,d=p===h?0:(0-p)/(h-p);return new t.Coordinate(t.number(s,l,d)/this.tileSize,t.number(u,c,d)/this.tileSize,this.zoom)._zoomTo(n)},Jn.prototype.coordinatePoint=function(e){var n=e.zoomTo(this.zoom),i=[n.column*this.tileSize,n.row*this.tileSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},Jn.prototype.getBounds=function(){return(new Vt).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Jn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Vt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jn.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jn.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var i=e.key,r=n?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var a=e.canonical,o=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*o,a.y*o,0]),t.scale(l,l,[o/t.EXTENT,o/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),r[i]=new Float32Array(l),r[i]},Jn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,i,r,a=-90,o=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;a=this.latY(p[1]),e=(o=this.latY(p[0]))-a<u.y?u.y/(o-a):0}if(this.lngRange){var h=this.lngRange;s=this.lngX(h[0]),n=(l=this.lngX(h[1]))-s<u.x?u.x/(l-s):0}var d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(l+s)/2:this.x,e?(o+a)/2:this.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var f=this.y,m=u.y/2;f-m<a&&(r=a+m),f+m>o&&(r=o-m)}if(this.lngRange){var g=this.x,v=u.x/2;g-v<s&&(i=s+v),g+v>l&&(i=l-v)}void 0===i&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==i?i:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},Jn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,i=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),r=this.x,a=this.y,o=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),s=new Float64Array(16);t.perspective(s,this._fov,this.width/this.height,1,o),t.scale(s,s,[1,-1,1]),t.translate(s,s,[0,0,-this.cameraToCenterDistance]),t.rotateX(s,s,this._pitch),t.rotateZ(s,s,this.angle),t.translate(s,s,[-r,-a,0]);var l=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));t.scale(s,s,[1,1,l,1]),this.projMatrix=s;var u=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),h=Math.sin(this.angle),d=r-Math.round(r)+p*u+h*c,f=a-Math.round(a)+p*c+h*u,m=new Float64Array(s);if(t.translate(m,m,[d>.5?d-1:d,f>.5?f-1:f,0]),this.alignedProjMatrix=m,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),s,this.projMatrix),!(s=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)).zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Jn.prototype,Qn);var ti=function(){var e,n,i,r,a;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=300,i=!1,r=0,a=function(){r=0,i&&(e(),r=setTimeout(a,n),i=!1)},function(){return i=!0,r||a(),r})};ti.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ti.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ti.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),a=Math.round(e.lng*r)/r,o=Math.round(e.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=t?"#/"+a+"/"+o+"/"+n:"#"+n+"/"+o+"/"+a,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},ti.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},ti.prototype._updateHashUnthrottled=function(){var e=this.getHashString();t.window.history.replaceState(t.window.history.state,"",e)};var ei=function(e){function n(n,i,r,a){void 0===a&&(a={});var o=ht.mousePos(i.getCanvasContainer(),r),s=i.unproject(o);e.call(this,n,t.extend({point:o,lngLat:s,originalEvent:r},a)),this._defaultPrevented=!1,this.target=i}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var i={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,i),n}(t.Event),ni=function(e){function n(n,i,r){var a=ht.touchPos(i.getCanvasContainer(),r),o=a.map(function(t){return i.unproject(t)}),s=a.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new t.Point(0,0)),l=i.unproject(s);e.call(this,n,{points:a,point:s,lngLats:o,lngLat:l,originalEvent:r}),this._defaultPrevented=!1}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var i={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,i),n}(t.Event),ii=function(t){function e(e,n,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),ri=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ri.prototype.isEnabled=function(){return!!this._enabled},ri.prototype.isActive=function(){return!!this._active},ri.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},ri.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ri.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},ri.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},ri.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=ht.mousePos(this._el,e);this._around=Nt.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},ri.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,r=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==r&&(r=1/r);var a="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,l=this._easing,u=!1;if("wheel"===this._type&&s&&l){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=l(c);n.zoom=t.number(s,o,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):u=!0}else n.zoom=o,u=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),u&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},ri.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var i=this._prevEase,r=(t.browser.now()-i.start)/i.duration,a=i.easing(r+.01)-i.easing(r),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=t.bezier(o,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var ai=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};ai.prototype.isEnabled=function(){return!!this._enabled},ai.prototype.isActive=function(){return!!this._active},ai.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ai.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ai.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),ht.disableDrag(),this._startPos=this._lastPos=ht.mousePos(this._el,e),this._active=!0)},ai.prototype._onMouseMove=function(t){var e=ht.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=e,this._box||(this._box=ht.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(n.x,e.x),r=Math.max(n.x,e.x),a=Math.min(n.y,e.y),o=Math.max(n.y,e.y);ht.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=r-i+"px",this._box.style.height=o-a+"px"}},ai.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,i=ht.mousePos(this._el,e);this._finish(),ht.suppressClick(),n.x===i.x&&n.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(n,i,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},ai.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},ai.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(ht.remove(this._box),this._box=null),ht.enableDrag(),delete this._startPos,delete this._lastPos},ai.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var oi=t.bezier(0,0,.25,1),si=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};si.prototype.isEnabled=function(){return"disabled"!==this._state},si.prototype.isActive=function(){return"active"===this._state},si.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},si.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},si.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=ht.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==ht.mouseButton(e))return;this._eventButton=0}ht.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=ht.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},si.prototype._onMouseMove=function(t){var e=ht.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},si.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,i=this._startPos,r=this._lastPos,a=.8*(i.x-r.x),o=-.5*(i.y-r.y),s=n.bearing-a,l=n.pitch-o,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([t.browser.now(),this._map._normalizeBearing(s,c[1])]),n.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},si.prototype._onMouseUp=function(t){if(ht.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",ht.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},si.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},si.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),ht.enableDrag()},si.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},si.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getBearing(),r=this._inertia,a=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)a();else{var o=r[0],s=r[r.length-1],l=r[r.length-2],u=n._normalizeBearing(i,l[1]),c=s[1]-o[1],p=c<0?-1:1,h=(s[0]-o[0])/1e3;if(0!==c&&0!==h){var d=Math.abs(c*(.25/h));d>180&&(d=180);var f=d/180;u+=p*d*(f/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*f,easing:oi,noMoveStart:!0},{originalEvent:t})}else a()}},si.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},si.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var li=t.bezier(0,0,.3,1),ui=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};ui.prototype.isEnabled=function(){return"disabled"!==this._state},ui.prototype.isActive=function(){return"active"===this._state},ui.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},ui.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},ui.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==ht.mouseButton(e)||(ht.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),ht.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},ui.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(ht.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),ht.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},ui.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=ht.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},ui.prototype._onMove=function(e){e.preventDefault();var n=ht.mousePos(this._el,e);this._lastPos.equals(n)||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=n,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},ui.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},ui.prototype._onMouseUp=function(t){if(0===ht.mouseButton(t))switch(this._state){case"active":this._state="enabled",ht.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},ui.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},ui.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},ui.prototype._unbind=function(){ht.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),ht.removeEventListener(t.window.document,"touchend",this._onTouchEnd),ht.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),ht.removeEventListener(t.window.document,"mouseup",this._onMouseUp),ht.removeEventListener(t.window,"blur",this._onBlur)},ui.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},ui.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],i=e[0],r=n[1].sub(i[1]),a=(n[0]-i[0])/1e3;if(0===a||n[1].equals(i[1]))this._fireEvent("moveend",t);else{var o=r.mult(.3/a),s=o.mag();s>1400&&(s=1400,o._unit()._mult(s));var l=s/750,u=o.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:li,noMoveStart:!0},{originalEvent:t})}}},ui.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},ui.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var ci=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};ci.prototype.isEnabled=function(){return!!this._enabled},ci.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},ci.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},ci.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,i=0,r=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(a=1,t.preventDefault());break;default:return}var o=this._map,s=o.getZoom(),l={duration:300,delayEndEvents:500,easing:rt,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:o.getBearing()+15*n,pitch:o.getPitch()+10*i,offset:[100*-r,100*-a],center:o.getCenter()};o.easeTo(l,{originalEvent:t})}};var pi=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};pi.prototype.isEnabled=function(){return!!this._enabled},pi.prototype.isActive=function(){return!!this._active},pi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},pi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pi.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},pi.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},pi.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},pi.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var hi=t.bezier(0,0,.15,1),di=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};di.prototype.isEnabled=function(){return!!this._enabled},di.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},di.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},di.prototype.disableRotation=function(){this._rotationDisabled=!0},di.prototype.enableRotation=function(){this._rotationDisabled=!1},di.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=ht.mousePos(this._el,e.touches[0]),i=ht.mousePos(this._el,e.touches[1]),r=n.add(i).div(2);this._startVec=n.sub(i),this._startAround=this._map.transform.pointLocation(r),this._gestureIntent=void 0,this._inertia=[],ht.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),ht.addEventListener(t.window.document,"touchend",this._onEnd)}},di.prototype._getTouchEventData=function(t){var e=ht.mousePos(this._el,t.touches[0]),n=ht.mousePos(this._el,t.touches[1]),i=e.sub(n);return{vec:i,center:e.add(n).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},di.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),i=n.vec,r=n.scale,a=n.bearing;if(!this._gestureIntent){var o=Math.abs(1-r)>.15;Math.abs(a)>10?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=i)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},di.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var i=this._getTouchEventData(this._lastTouchEvent),r=i.center,a=i.bearing,o=i.scale,s=n.pointLocation(r),l=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+a),n.zoom=n.scaleZoom(this._startScale*o),n.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),o,r])}},di.prototype._onEnd=function(e){ht.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),ht.removeEventListener(t.window.document,"touchend",this._onEnd);var n=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var r=this._inertia,a=this._map;if(r.length<2)a.snapToNorth({},{originalEvent:e});else{var o=r[r.length-1],s=r[0],l=a.transform.scaleZoom(i*o[1]),u=a.transform.scaleZoom(i*s[1]),c=l-u,p=(o[0]-s[0])/1e3,h=o[2];if(0!==p&&l!==u){var d=.15*c/p;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var f=1e3*Math.abs(d/(12*.15)),m=l+d*f/2e3;m<0&&(m=0),a.easeTo({zoom:m,duration:f,easing:hi,around:this._aroundCenter?a.getCenter():a.unproject(h),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},di.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var fi={scrollZoom:ri,boxZoom:ai,dragRotate:si,dragPan:ui,keyboard:ci,doubleClickZoom:pi,touchZoomRotate:di},mi=function(e){function n(n,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)},n.prototype.panTo=function(e,n,i){return this.easeTo(t.extend({center:e},n),i)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(t,e){return t=Vt.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)},n.prototype._cameraForBoxAndBearing=function(e,n,i,r){if("number"==typeof(r=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}if(t.deepEqual(Object.keys(r.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var o=[(r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2],s=Math.min(r.padding.right,r.padding.left),l=Math.min(r.padding.top,r.padding.bottom);r.offset=[r.offset[0]+o[0],r.offset[1]+o[1]];var u=this.transform,c=u.project(Nt.convert(e)),p=u.project(Nt.convert(n)),h=c.rotate(-i*Math.PI/180),d=p.rotate(-i*Math.PI/180),f=new t.Point(Math.max(h.x,d.x),Math.max(h.y,d.y)),m=new t.Point(Math.min(h.x,d.x),Math.min(h.y,d.y)),g=t.Point.convert(r.offset),v=f.sub(m),y=(u.width-2*s-2*Math.abs(g.x))/v.x,_=(u.height-2*l-2*Math.abs(g.y))/v.y;if(!(_<0||y<0))return r.center=u.unproject(c.add(p).div(2)),r.zoom=Math.min(u.scaleZoom(u.scale*Math.min(y,_)),r.maxZoom),r.bearing=i,r;t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,i,r,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),i,r),r,a)},n.prototype._fitInternal=function(e,n,i){return e?(n=t.extend(e,n)).linear?this.easeTo(n,i):this.flyTo(n,i):this},n.prototype.jumpTo=function(e,n){this.stop();var i=this.transform,r=!1,a=!1,o=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=Nt.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(a=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(o=!0,i.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),a&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),o&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var i=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var r=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:a,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:s,p=r.centerPoint.add(t.Point.convert(e.offset)),h=r.pointLocation(p),d=Nt.convert(e.center||h);this._normalizeCenter(d);var f,m,g=r.project(h),v=r.project(d).sub(g),y=r.zoomScale(l-a);return e.around&&(f=Nt.convert(e.around),m=r.locationPoint(f)),this._zooming=l!==a,this._rotating=o!==u,this._pitching=c!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(i._zooming&&(r.zoom=t.number(a,l,e)),i._rotating&&(r.bearing=t.number(o,u,e)),i._pitching&&(r.pitch=t.number(s,c,e)),f)r.setLocationAtPoint(f,m);else{var h=r.zoomScale(r.zoom-a),d=l>a?Math.min(2,y):Math.max(.5,y),_=Math.pow(d,1-e),x=r.unproject(g.add(v.mult(e*_)).mult(h));r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,p)}i._fireMoveEvents(n)},function(){e.delayEndEvents?i._easeEndTimeoutID=setTimeout(function(){return i._afterEase(n)},e.delayEndEvents):i._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,i=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),r&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){function i(t){var e=(w*w-b*b+(t?-1:1)*C*C*E*E)/(2*(t?w:b)*C*E);return Math.log(Math.sqrt(e*e+1)-e)}function r(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}var o=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),p="zoom"in e?t.clamp(+e.zoom,s.minZoom,s.maxZoom):l,h="bearing"in e?this._normalizeBearing(e.bearing,u):u,d="pitch"in e?+e.pitch:c,f=s.zoomScale(p-l),m=s.centerPoint.add(t.Point.convert(e.offset)),g=s.pointLocation(m),v=Nt.convert(e.center||g);this._normalizeCenter(v);var y=s.project(g),_=s.project(v).sub(y),x=e.curve,b=Math.max(s.width,s.height),w=b/f,E=_.mag();if("minZoom"in e){var T=t.clamp(Math.min(e.minZoom,l,p),s.minZoom,s.maxZoom),S=b/s.zoomScale(T-l);x=Math.sqrt(S/E*2)}var C=x*x,k=i(0),z=function(t){return a(k)/a(k+x*t)},A=function(t){return b*((a(k)*(r(e=k+x*t)/a(e))-r(k))/C)/E;var e},M=(i(1)-k)/x;if(Math.abs(E)<1e-6||!isFinite(M)){if(Math.abs(b-w)<1e-6)return this.easeTo(e,n);var I=w<b?-1:1;M=Math.abs(Math.log(w/b))/x,A=function(){return 0},z=function(t){return Math.exp(I*x*t)}}if("duration"in e)e.duration=+e.duration;else{var P="screenSpeed"in e?+e.screenSpeed/x:+e.speed;e.duration=1e3*M/P}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=u!==h,this._pitching=d!==c,this._prepareEase(n,!1),this._ease(function(e){var i=e*M,r=1/z(i);s.zoom=1===e?p:l+s.scaleZoom(r),o._rotating&&(s.bearing=t.number(u,h,e)),o._pitching&&(s.pitch=t.number(c,d,e));var a=1===e?v:s.unproject(y.add(_.mult(A(i))).mult(r));s.setLocationAtPoint(s.renderWorldCopies?a.wrap():a,m),o._fireMoveEvents(n)},function(){return o._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),gi=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};gi.prototype.getDefaultPosition=function(){return"bottom-right"},gi.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=ht.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},gi.prototype.onRemove=function(){ht.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},gi.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:_t.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,i){return n.value&&(t+=n.key+"="+n.value+(i<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},gi.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},gi.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var i in n){var r=n[i].getSource();r.attribution&&t.indexOf(r.attribution)<0&&t.push(r.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},gi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var vi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};vi.prototype.onAdd=function(t){this._map=t,this._container=ht.create("div","mapboxgl-ctrl");var e=ht.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},vi.prototype.onRemove=function(){ht.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},vi.prototype.getDefaultPosition=function(){return"bottom-left"},vi.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},vi.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},vi.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var yi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};yi.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},yi.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,i=e?this._queue.concat(e):this._queue;n<i.length;n+=1){var r=i[n];if(r.id===t)return void(r.cancelled=!0)}},yi.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!i.cancelled&&(i.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},yi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var _i=t.window.HTMLImageElement,xi=t.window.HTMLElement,bi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},wi=function(e){function n(n){var i=this;if(null!=(n=t.extend({},bi,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new Jn(n.minZoom,n.maxZoom,n.renderWorldCopies);e.call(this,r,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new yi,this._controls=[];var a=n.transformRequest;if(this._transformRequest=a?function(t,e){return a(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof n.container){if(this._container=t.window.document.getElementById(n.container),!this._container)throw new Error("Container '"+n.container+"' not found.")}else{if(!(n.container instanceof xi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var n=t.getCanvasContainer(),i=null,r=!1,a=null;for(var o in fi)t[o]=new fi[o](t,e),e.interactive&&e[o]&&t[o].enable(e[o]);ht.addEventListener(n,"mouseout",function(e){t.fire(new ei("mouseout",t,e))}),ht.addEventListener(n,"mousedown",function(i){r=!0,a=ht.mousePos(n,i);var o=new ei("mousedown",t,i);t.fire(o),o.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(i),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(i),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(i))}),ht.addEventListener(n,"mouseup",function(e){var n=t.dragRotate.isActive();i&&!n&&t.fire(new ei("contextmenu",t,i)),i=null,r=!1,t.fire(new ei("mouseup",t,e))}),ht.addEventListener(n,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var i=e.target;i&&i!==n;)i=i.parentNode;i===n&&t.fire(new ei("mousemove",t,e))}}),ht.addEventListener(n,"mouseover",function(e){for(var i=e.target;i&&i!==n;)i=i.parentNode;i===n&&t.fire(new ei("mouseover",t,e))}),ht.addEventListener(n,"touchstart",function(n){var i=new ni("touchstart",t,n);t.fire(i),i.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(i))},{passive:!1}),ht.addEventListener(n,"touchmove",function(e){t.fire(new ni("touchmove",t,e))},{passive:!1}),ht.addEventListener(n,"touchend",function(e){t.fire(new ni("touchend",t,e))}),ht.addEventListener(n,"touchcancel",function(e){t.fire(new ni("touchcancel",t,e))}),ht.addEventListener(n,"click",function(i){var r=ht.mousePos(n,i);(r.equals(a)||r.dist(a)<e.clickTolerance)&&t.fire(new ei("click",t,i))}),ht.addEventListener(n,"dblclick",function(e){var n=new ei("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),ht.addEventListener(n,"contextmenu",function(e){var n=t.dragRotate.isActive();r||n?r&&(i=e):t.fire(new ei("contextmenu",t,e)),e.preventDefault()}),ht.addEventListener(n,"wheel",function(n){e.interactive&&t.stop();var i=new ii("wheel",t,n);t.fire(i),i.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,n),this._hash=n.hash&&(new ti).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),this.resize(),n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new gi({customAttribution:n.customAttribution})),this.addControl(new vi,n.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){i.fire(new t.Event(e.dataType+"dataloading",e))})}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var i={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return n.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},n.prototype.resize=function(e){var n=this._containerDimensions(),i=n[0],r=n[1];return this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(Vt.convert(t)),this._update()},n.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.project=function(t){return this.transform.locationPoint(Nt.convert(t))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},n.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},n.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},n.prototype.on=function(t,n,i){var r,a=this;if(void 0===i)return e.prototype.on.call(this,t,n);var o=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:i,delegates:{mousemove:function(r){var o=a.getLayer(n)?a.queryRenderedFeatures(r.point,{layers:[n]}):[];o.length?e||(e=!0,i.call(a,new ei(t,a,r.originalEvent,{features:o}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var o=!1;return{layer:n,listener:i,delegates:{mousemove:function(e){(a.getLayer(n)?a.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?o=!0:o&&(o=!1,i.call(a,new ei(t,a,e.originalEvent)))},mouseout:function(e){o&&(o=!1,i.call(a,new ei(t,a,e.originalEvent)))}}}}return{layer:n,listener:i,delegates:(r={},r[t]=function(t){var e=a.getLayer(n)?a.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&(t.features=e,i.call(a,t),delete t.features)},r)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)a.on(s,o.delegates[s]);return this},n.prototype.off=function(t,n,i){if(void 0===i)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var r=this._delegatedListeners[t],a=0;a<r.length;a++){var o=r[a];if(o.layer===n&&o.listener===i){for(var s in o.delegates)this.off(s,o.delegates[s]);return r.splice(a,1),this}}return this},n.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var i;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),a=t.Point.convert(e[1]);i=[r,new t.Point(a.x,r.y),a,new t.Point(r.x,a.y),r]}return this.style.queryRenderedFeatures(i,n,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,n){if((!n||!1!==n.diff&&!n.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){t.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new hn(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var i in n){var r=n[i];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,n,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var a=i.sdf;if(void 0===a&&(a=!1),n instanceof _i){var o=t.browser.getImageData(n),s=o.width,l=o.height,u=o.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},u),pixelRatio:r,sdf:a})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,p=n.height,h=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:p},new Uint8Array(h)),pixelRatio:r,sdf:a})}},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0)},n.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=ht.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=ht.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=ht.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var i=this._controlContainer=ht.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=ht.create("div","mapboxgl-ctrl-"+t,i)})},n.prototype._resizeCanvas=function(e,n){var i=t.window.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},n.prototype._setupPainter=function(){var e=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},pt.webGLContextAttributes),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?this.painter=new Kn(n,this.transform):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(){this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,i=t.browser.now();this.style.zoomHistory.update(n,i);var r=new t.EvaluationParameters(n,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=r.crossFadingFactor();1===a&&a===this._crossFadingFactor||(e=!0,this._crossFadingFactor=a),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},n.prototype.remove=function(){this._hash&&this._hash.remove(),this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[];var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),at(this._canvasContainer),at(this._controlContainer),at(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},n.prototype._rerender=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(t){this._repaint=t,this._update()},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(n.prototype,i),n}(mi),Ei={showCompass:!0,showZoom:!0},Ti=function(e){var n=this;this.options=t.extend({},Ei,e),this._container=ht.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return n._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return n._map.resetNorth()}),this._compassArrow=ht.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};Ti.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Ti.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new si(t,{button:"left",element:this._compass}),ht.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Ti.prototype.onRemove=function(){ht.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),ht.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Ti.prototype._createButton=function(t,e,n){var i=ht.create("button",t,this._container);return i.type="button",i.setAttribute("aria-label",e),i.addEventListener("click",n),i};var Si,Ci={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},ki=function(e){function n(n){if(e.call(this),(arguments[0]instanceof t.window.HTMLElement||2===arguments.length)&&(n=t.extend({element:n},arguments[1])),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=ht.create("div");var i=ht.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var r=ht.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var a=ht.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var o=ht.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"transform","translate(3.0, 29.0)"),o.setAttributeNS(null,"fill","#000000");for(var s=0,l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];s<l.length;s+=1){var u=l[s],c=ht.createNS("http://www.w3.org/2000/svg","ellipse");c.setAttributeNS(null,"opacity","0.04"),c.setAttributeNS(null,"cx","10.5"),c.setAttributeNS(null,"cy","5.80029008"),c.setAttributeNS(null,"rx",u.rx),c.setAttributeNS(null,"ry",u.ry),o.appendChild(c)}var p=ht.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var h=ht.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(h);var d=ht.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");var f=ht.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(f);var m=ht.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");var g=ht.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=ht.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var y=ht.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),g.appendChild(v),g.appendChild(y),a.appendChild(o),a.appendChild(p),a.appendChild(d),a.appendChild(m),a.appendChild(g),i.appendChild(a),this._element.appendChild(i),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),ht.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=Nt.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=ot(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),ht.setTransform(this._element,Ci[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),st(this._element,this._anchor,"marker"))},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},n.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n}(t.Evented),zi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Ai=function(e){function n(n){e.call(this),this.options=t.extend({},zi,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=ht.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Si?n(Si):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){Si="denied"!==t.state,n(Si)}):(Si=!!t.window.navigator.geolocation,n(Si)),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),ht.remove(this._container),this._map=void 0},n.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},n.prototype._updateCamera=function(t){var e=new Nt(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy;this._map.fitBounds(e.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},n.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},n.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=ht.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ht.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ki(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),Mi={maxWidth:100,unit:"metric"},Ii=function(e){this.options=t.extend({},Mi,e),t.bindAll(["_onMove","setUnit"],this)};Ii.prototype.getDefaultPosition=function(){return"bottom-left"},Ii.prototype._onMove=function(){lt(this._map,this._container,this.options)},Ii.prototype.onAdd=function(t){return this._map=t,this._container=ht.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ii.prototype.onRemove=function(){ht.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ii.prototype.setUnit=function(t){this.options.unit=t,lt(this._map,this._container,this.options)};var Pi=function(){this._fullscreen=!1,t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Pi.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=ht.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._container},Pi.prototype.onRemove=function(){ht.remove(this._container),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Pi.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Pi.prototype._setupUI=function(){var e=this._fullscreenButton=ht.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Pi.prototype._isFullscreen=function(){return this._fullscreen},Pi.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Pi.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var Li={closeButton:!0,closeOnClick:!0,className:""},Di=function(e){function n(n){e.call(this),this.options=t.extend(Object.create(Li),n),t.bindAll(["_update","_onClickClose"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&ht.remove(this._content),this._container&&(ht.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=Nt.convert(t),this._pos=null,this._update(),this},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var n,i=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;n=r.firstChild;)i.appendChild(n);return this.setDOMContent(i)},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype._createContent=function(){this._content&&ht.remove(this._content),this._content=ht.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=ht.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=ht.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ht.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=ot(this._lngLat,this._pos,this._map.transform));var n=this._pos=this._map.project(this._lngLat),i=this.options.anchor,r=function e(n){if(n){if("number"==typeof n){var i=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-n),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var r=t.Point.convert(n);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,o=this._container.offsetWidth,s=this._container.offsetHeight;a=n.y+r.bottom.y<s?["top"]:n.y>this._map.transform.height-s?["bottom"]:[],n.x<o/2?a.push("left"):n.x>this._map.transform.width-o/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var l=n.add(r[i]).round();ht.setTransform(this._container,Ci[i]+" translate("+l.x+"px,"+l.y+"px)"),st(this._container,i,"popup")}},n.prototype._onClickClose=function(){this.remove()},n}(t.Evented),Oi={version:"0.49.0",supported:pt,setRTLTextPlugin:t.setRTLTextPlugin,Map:wi,NavigationControl:Ti,GeolocateControl:Ai,AttributionControl:gi,ScaleControl:Ii,FullscreenControl:Pi,Popup:Di,Marker:ki,Style:hn,LngLat:Nt,LngLatBounds:Vt,Point:t.Point,Evented:t.Evented,config:_t,get accessToken(){return _t.ACCESS_TOKEN},set accessToken(t){_t.ACCESS_TOKEN=t},get workerCount(){return Re.workerCount},set workerCount(t){Re.workerCount=t},workerUrl:""};return Oi}),i}),MapboxLanguage.prototype.setLanguage=function(t,e){if(this.supportedLanguages.indexOf(e)<0)throw new Error("Language "+e+" is not supported");var n=this._languageSource||findStreetsSource(t);if(!n)return t;var i=this._getLanguageField(e),r=this._isLanguageField,a=this._excludedLayerIds,o=t.layers.map(function(t){return t.source===n?changeLayerTextProperty(r,t,i,a):t}),s=Object.assign({},t,{layers:o});return this._languageTransform(s,e)},MapboxLanguage.prototype._initialStyleUpdate=function(){var t=this._map.getStyle(),e=this._defaultLanguage||browserLanguage(this.supportedLanguages);this._map.off("styledata",this._initialStyleUpdate),this._map.setStyle(this.setLanguage(t,e))},MapboxLanguage.prototype.onAdd=function(t){return this._map=t,this._map.on("styledata",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},MapboxLanguage.prototype.onRemove=function(){this._map.off("styledata",this._initialStyleUpdate),this._map=void 0},"undefined"!=typeof module&&void 0!==module.exports?module.exports=MapboxLanguage:(ie11Polyfill(),window.MapboxLanguage=MapboxLanguage),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Swiper=e()}(this,function(){"use strict";function t(t,e){var n=[],o=0;if(t&&!e&&t instanceof a)return t;if(t)if("string"==typeof t){var s,l,u=t.trim();if(0<=u.indexOf("<")&&0<=u.indexOf(">")){var c="div";for(0===u.indexOf("<li")&&(c="ul"),0===u.indexOf("<tr")&&(c="tbody"),0!==u.indexOf("<td")&&0!==u.indexOf("<th")||(c="tr"),0===u.indexOf("<tbody")&&(c="table"),0===u.indexOf("<option")&&(c="select"),(l=i.createElement(c)).innerHTML=u,o=0;o<l.childNodes.length;o+=1)n.push(l.childNodes[o])}else for(s=e||"#"!==t[0]||t.match(/[ .<>:~]/)?(e||i).querySelectorAll(t.trim()):[i.getElementById(t.trim().split("#")[1])],o=0;o<s.length;o+=1)s[o]&&n.push(s[o])}else if(t.nodeType||t===r||t===i)n.push(t);else if(0<t.length&&t[0].nodeType)for(o=0;o<t.length;o+=1)n.push(t[o]);return new a(n)}function e(t){for(var e=[],n=0;n<t.length;n+=1)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function n(){var t=this,e=t.params,n=t.el;if(!n||0!==n.offsetWidth){e.breakpoints&&t.setBreakpoint();var i=t.allowSlideNext,r=t.allowSlidePrev,a=t.snapGrid;if(t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),e.freeMode){var o=Math.min(Math.max(t.translate,t.maxTranslate()),t.minTranslate());t.setTranslate(o),t.updateActiveIndex(),t.updateSlidesClasses(),e.autoHeight&&t.updateAutoHeight()}else t.updateSlidesClasses(),("auto"===e.slidesPerView||1<e.slidesPerView)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0);t.allowSlidePrev=r,t.allowSlideNext=i,t.params.watchOverflow&&a!==t.snapGrid&&t.checkOverflow()}}var i="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,r="undefined"==typeof window?{document:i,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,a=function(t){for(var e=0;e<t.length;e+=1)this[e]=t[e];return this.length=t.length,this};t.fn=a.prototype,t.Class=a,t.Dom7=a;var o={addClass:function(t){if(void 0===t)return this;for(var e=t.split(" "),n=0;n<e.length;n+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.add(e[n]);return this},removeClass:function(t){for(var e=t.split(" "),n=0;n<e.length;n+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.remove(e[n]);return this},hasClass:function(t){return!!this[0]&&this[0].classList.contains(t)},toggleClass:function(t){for(var e=t.split(" "),n=0;n<e.length;n+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.toggle(e[n]);return this},attr:function(t,e){var n=arguments;if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var i=0;i<this.length;i+=1)if(2===n.length)this[i].setAttribute(t,e);else for(var r in t)this[i][r]=t[r],this[i].setAttribute(r,t[r]);return this},removeAttr:function(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this},data:function(t,e){var n;if(void 0!==e){for(var i=0;i<this.length;i+=1)(n=this[i]).dom7ElementDataStorage||(n.dom7ElementDataStorage={}),n.dom7ElementDataStorage[t]=e;return this}if(n=this[0]){if(n.dom7ElementDataStorage&&t in n.dom7ElementDataStorage)return n.dom7ElementDataStorage[t];return n.getAttribute("data-"+t)||void 0}},transform:function(t){for(var e=0;e<this.length;e+=1){var n=this[e].style;n.webkitTransform=t,n.transform=t}return this},transition:function(t){"string"!=typeof t&&(t+="ms");for(var e=0;e<this.length;e+=1){var n=this[e].style;n.webkitTransitionDuration=t,n.transitionDuration=t}return this},on:function(){function e(e){var n=e.target;if(n){var i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),t(n).is(s))l.apply(n,i);else for(var r=t(n).parents(),a=0;a<r.length;a+=1)t(r[a]).is(s)&&l.apply(r[a],i)}}function n(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),l.apply(this,e)}for(var i,r=[],a=arguments.length;a--;)r[a]=arguments[a];var o=r[0],s=r[1],l=r[2],u=r[3];"function"==typeof r[1]&&(o=(i=r)[0],l=i[1],u=i[2],s=void 0),u||(u=!1);for(var c,p=o.split(" "),h=0;h<this.length;h+=1){var d=this[h];if(s)for(c=0;c<p.length;c+=1){var f=p[c];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[f]||(d.dom7LiveListeners[f]=[]),d.dom7LiveListeners[f].push({listener:l,proxyListener:e}),d.addEventListener(f,e,u)}else for(c=0;c<p.length;c+=1){var m=p[c];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[m]||(d.dom7Listeners[m]=[]),d.dom7Listeners[m].push({listener:l,proxyListener:n}),d.addEventListener(m,n,u)}}return this},off:function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var i=e[0],r=e[1],a=e[2],o=e[3];"function"==typeof e[1]&&(i=(t=e)[0],a=t[1],o=t[2],r=void 0),o||(o=!1);for(var s=i.split(" "),l=0;l<s.length;l+=1)for(var u=s[l],c=0;c<this.length;c+=1){var p=this[c],h=void 0;if(!r&&p.dom7Listeners?h=p.dom7Listeners[u]:r&&p.dom7LiveListeners&&(h=p.dom7LiveListeners[u]),h&&h.length)for(var d=h.length-1;0<=d;d-=1){var f=h[d];a&&f.listener===a?(p.removeEventListener(u,f.proxyListener,o),h.splice(d,1)):a||(p.removeEventListener(u,f.proxyListener,o),h.splice(d,1))}}return this},trigger:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=t[0].split(" "),a=t[1],o=0;o<n.length;o+=1)for(var s=n[o],l=0;l<this.length;l+=1){var u=this[l],c=void 0;try{c=new r.CustomEvent(s,{detail:a,bubbles:!0,cancelable:!0})}catch(t){(c=i.createEvent("Event")).initEvent(s,!0,!0),c.detail=a}u.dom7EventData=t.filter(function(t,e){return 0<e}),u.dispatchEvent(c),u.dom7EventData=[],delete u.dom7EventData}return this},transitionEnd:function(t){function e(a){if(a.target===this)for(t.call(this,a),n=0;n<i.length;n+=1)r.off(i[n],e)}var n,i=["webkitTransitionEnd","transitionend"],r=this;if(t)for(n=0;n<i.length;n+=1)r.on(i[n],e);return this},outerWidth:function(t){if(0<this.length){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(t){if(0<this.length){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(0<this.length){var t=this[0],e=t.getBoundingClientRect(),n=i.body,a=t.clientTop||n.clientTop||0,o=t.clientLeft||n.clientLeft||0,s=t===r?r.scrollY:t.scrollTop,l=t===r?r.scrollX:t.scrollLeft;return{top:e.top+s-a,left:e.left+l-o}}return null},css:function(t,e){var n;if(1===arguments.length){if("string"!=typeof t){for(n=0;n<this.length;n+=1)for(var i in t)this[n].style[i]=t[i];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this},each:function(t){if(!t)return this;for(var e=0;e<this.length;e+=1)if(!1===t.call(this[e],e,this[e]))return this;return this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:void 0;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this},is:function(e){var n,o,s=this[0];if(!s||void 0===e)return!1;if("string"==typeof e){if(s.matches)return s.matches(e);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(e);if(s.msMatchesSelector)return s.msMatchesSelector(e);for(n=t(e),o=0;o<n.length;o+=1)if(n[o]===s)return!0;return!1}if(e===i)return s===i;if(e===r)return s===r;if(e.nodeType||e instanceof a){for(n=e.nodeType?[e]:e,o=0;o<n.length;o+=1)if(n[o]===s)return!0;return!1}return!1},index:function(){var t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}},eq:function(t){if(void 0===t)return this;var e,n=this.length;return new a(n-1<t?[]:t<0?(e=n+t)<0?[]:[this[e]]:[this[t]])},append:function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0;r<e.length;r+=1){t=e[r];for(var o=0;o<this.length;o+=1)if("string"==typeof t){var s=i.createElement("div");for(s.innerHTML=t;s.firstChild;)this[o].appendChild(s.firstChild)}else if(t instanceof a)for(var l=0;l<t.length;l+=1)this[o].appendChild(t[l]);else this[o].appendChild(t)}return this},prepend:function(t){var e,n,r=this;for(e=0;e<this.length;e+=1)if("string"==typeof t){var o=i.createElement("div");for(o.innerHTML=t,n=o.childNodes.length-1;0<=n;n-=1)r[e].insertBefore(o.childNodes[n],r[e].childNodes[0])}else if(t instanceof a)for(n=0;n<t.length;n+=1)r[e].insertBefore(t[n],r[e].childNodes[0]);else r[e].insertBefore(t,r[e].childNodes[0]);return this},next:function(e){return new a(0<this.length?e?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(e)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(e){var n=[],i=this[0];if(!i)return new a([]);for(;i.nextElementSibling;){var r=i.nextElementSibling;e?t(r).is(e)&&n.push(r):n.push(r),i=r}return new a(n)},prev:function(e){if(0<this.length){var n=this[0];return new a(e?n.previousElementSibling&&t(n.previousElementSibling).is(e)?[n.previousElementSibling]:[]:n.previousElementSibling?[n.previousElementSibling]:[])}return new a([])},prevAll:function(e){var n=[],i=this[0];if(!i)return new a([]);for(;i.previousElementSibling;){var r=i.previousElementSibling;e?t(r).is(e)&&n.push(r):n.push(r),i=r}return new a(n)},parent:function(n){for(var i=[],r=0;r<this.length;r+=1)null!==this[r].parentNode&&(n?t(this[r].parentNode).is(n)&&i.push(this[r].parentNode):i.push(this[r].parentNode));return t(e(i))},parents:function(n){for(var i=[],r=0;r<this.length;r+=1)for(var a=this[r].parentNode;a;)n?t(a).is(n)&&i.push(a):i.push(a),a=a.parentNode;return t(e(i))},closest:function(t){var e=this;return void 0===t?new a([]):(e.is(t)||(e=e.parents(t).eq(0)),e)},find:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var i=this[n].querySelectorAll(t),r=0;r<i.length;r+=1)e.push(i[r]);return new a(e)},children:function(n){for(var i=[],r=0;r<this.length;r+=1)for(var o=this[r].childNodes,s=0;s<o.length;s+=1)n?1===o[s].nodeType&&t(o[s]).is(n)&&i.push(o[s]):1===o[s].nodeType&&i.push(o[s]);return new a(e(i))},remove:function(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this},add:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var i,r;for(i=0;i<e.length;i+=1){var a=t(e[i]);for(r=0;r<a.length;r+=1)this[this.length]=a[r],this.length+=1}return this},styles:function(){return this[0]?r.getComputedStyle(this[0],null):{}}};Object.keys(o).forEach(function(e){t.fn[e]=o[e]});var s,l,u,c={deleteProps:function(t){var e=t;Object.keys(e).forEach(function(t){try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}})},nextTick:function(t,e){return void 0===e&&(e=0),setTimeout(t,e)},now:function(){return Date.now()},getTranslate:function(t,e){var n,i,a;void 0===e&&(e="x");var o=r.getComputedStyle(t,null);return r.WebKitCSSMatrix?(6<(i=o.transform||o.webkitTransform).split(",").length&&(i=i.split(", ").map(function(t){return t.replace(",",".")}).join(", ")),a=new r.WebKitCSSMatrix("none"===i?"":i)):n=(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===e&&(i=r.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===e&&(i=r.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0},parseUrlQuery:function(t){var e,n,i,a,o={},s=t||r.location.href;if("string"==typeof s&&s.length)for(a=(n=(s=-1<s.indexOf("?")?s.replace(/\S*\?/,""):"").split("&").filter(function(t){return""!==t})).length,e=0;e<a;e+=1)i=n[e].replace(/#\S+/g,"").split("="),o[decodeURIComponent(i[0])]=void 0===i[1]?void 0:decodeURIComponent(i[1])||"";return o},isObject:function(t){return"object"==typeof t&&null!==t&&t.constructor&&t.constructor===Object},extend:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=Object(t[0]),i=1;i<t.length;i+=1){var r=t[i];if(null!=r)for(var a=Object.keys(Object(r)),o=0,s=a.length;o<s;o+=1){var l=a[o],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(c.isObject(n[l])&&c.isObject(r[l])?c.extend(n[l],r[l]):!c.isObject(n[l])&&c.isObject(r[l])?(n[l]={},c.extend(n[l],r[l])):n[l]=r[l])}}return n}},p=(u=i.createElement("div"),{touch:r.Modernizr&&!0===r.Modernizr.touch||!!("ontouchstart"in r||r.DocumentTouch&&i instanceof r.DocumentTouch),pointerEvents:!(!r.navigator.pointerEnabled&&!r.PointerEvent),prefixedPointerEvents:!!r.navigator.msPointerEnabled,transition:"transition"in(l=u.style)||"webkitTransition"in l||"MozTransition"in l,transforms3d:r.Modernizr&&!0===r.Modernizr.csstransforms3d||"webkitPerspective"in(s=u.style)||"MozPerspective"in s||"OPerspective"in s||"MsPerspective"in s||"perspective"in s,flexbox:function(){for(var t=u.style,e="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),n=0;n<e.length;n+=1)if(e[n]in t)return!0;return!1}(),observer:"MutationObserver"in r||"WebkitMutationObserver"in r,passiveListener:function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});r.addEventListener("testPassiveListener",null,e)}catch(t){}return t}(),gestures:"ongesturestart"in r}),h=function(t){void 0===t&&(t={});var e=this;e.params=t,e.eventsListeners={},e.params&&e.params.on&&Object.keys(e.params.on).forEach(function(t){e.on(t,e.params.on[t])})},d={components:{configurable:!0}};h.prototype.on=function(t,e,n){var i=this;if("function"!=typeof e)return i;var r=n?"unshift":"push";return t.split(" ").forEach(function(t){i.eventsListeners[t]||(i.eventsListeners[t]=[]),i.eventsListeners[t][r](e)}),i},h.prototype.once=function(t,e,n){var i=this;return"function"!=typeof e?i:i.on(t,function n(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];e.apply(i,r),i.off(t,n)},n)},h.prototype.off=function(t,e){var n=this;return n.eventsListeners&&t.split(" ").forEach(function(t){void 0===e?n.eventsListeners[t]=[]:n.eventsListeners[t].forEach(function(i,r){i===e&&n.eventsListeners[t].splice(r,1)})}),n},h.prototype.emit=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,i,r,a=this;return a.eventsListeners&&("string"==typeof t[0]||Array.isArray(t[0])?(n=t[0],i=t.slice(1,t.length),r=a):(n=t[0].events,i=t[0].data,r=t[0].context||a),(Array.isArray(n)?n:n.split(" ")).forEach(function(t){if(a.eventsListeners&&a.eventsListeners[t]){var e=[];a.eventsListeners[t].forEach(function(t){e.push(t)}),e.forEach(function(t){t.apply(r,i)})}})),a},h.prototype.useModulesParams=function(t){var e=this;e.modules&&Object.keys(e.modules).forEach(function(n){var i=e.modules[n];i.params&&c.extend(t,i.params)})},h.prototype.useModules=function(t){void 0===t&&(t={});var e=this;e.modules&&Object.keys(e.modules).forEach(function(n){var i=e.modules[n],r=t[n]||{};i.instance&&Object.keys(i.instance).forEach(function(t){var n=i.instance[t];e[t]="function"==typeof n?n.bind(e):n}),i.on&&e.on&&Object.keys(i.on).forEach(function(t){e.on(t,i.on[t])}),i.create&&i.create.bind(e)(r)})},d.components.set=function(t){this.use&&this.use(t)},h.installModule=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];var i=this;i.prototype.modules||(i.prototype.modules={});var r=t.name||Object.keys(i.prototype.modules).length+"_"+c.now();return(i.prototype.modules[r]=t).proto&&Object.keys(t.proto).forEach(function(e){i.prototype[e]=t.proto[e]}),t.static&&Object.keys(t.static).forEach(function(e){i[e]=t.static[e]}),t.install&&t.install.apply(i,e),i},h.use=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];var i=this;return Array.isArray(t)?(t.forEach(function(t){return i.installModule(t)}),i):i.installModule.apply(i,[t].concat(e))},Object.defineProperties(h,d);var f,m={updateSize:function(){var t,e,n=this,i=n.$el;t=void 0!==n.params.width?n.params.width:i[0].clientWidth,e=void 0!==n.params.height?n.params.height:i[0].clientHeight,0===t&&n.isHorizontal()||0===e&&n.isVertical()||(t=t-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),e=e-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),c.extend(n,{width:t,height:e,size:n.isHorizontal()?t:e}))},updateSlides:function(){var t=this,e=t.params,n=t.$wrapperEl,i=t.size,a=t.rtlTranslate,o=t.wrongRTL,s=t.virtual&&e.virtual.enabled,l=s?t.virtual.slides.length:t.slides.length,u=n.children("."+t.params.slideClass),h=s?t.virtual.slides.length:u.length,d=[],f=[],m=[],g=e.slidesOffsetBefore;"function"==typeof g&&(g=e.slidesOffsetBefore.call(t));var v=e.slidesOffsetAfter;"function"==typeof v&&(v=e.slidesOffsetAfter.call(t));var y=t.snapGrid.length,_=t.snapGrid.length,x=e.spaceBetween,b=-g,w=0,E=0;if(void 0!==i){var T,S;"string"==typeof x&&0<=x.indexOf("%")&&(x=parseFloat(x.replace("%",""))/100*i),t.virtualSize=-x,a?u.css({marginLeft:"",marginTop:""}):u.css({marginRight:"",marginBottom:""}),1<e.slidesPerColumn&&(T=Math.floor(h/e.slidesPerColumn)===h/t.params.slidesPerColumn?h:Math.ceil(h/e.slidesPerColumn)*e.slidesPerColumn,"auto"!==e.slidesPerView&&"row"===e.slidesPerColumnFill&&(T=Math.max(T,e.slidesPerView*e.slidesPerColumn)));for(var C,k=e.slidesPerColumn,z=T/k,A=z-(e.slidesPerColumn*z-h),M=0;M<h;M+=1){S=0;var I=u.eq(M);if(1<e.slidesPerColumn){var P=void 0,L=void 0,D=void 0;"column"===e.slidesPerColumnFill?(D=M-(L=Math.floor(M/k))*k,(A<L||L===A&&D===k-1)&&k<=(D+=1)&&(D=0,L+=1),P=L+D*T/k,I.css({"-webkit-box-ordinal-group":P,"-moz-box-ordinal-group":P,"-ms-flex-order":P,"-webkit-order":P,order:P})):L=M-(D=Math.floor(M/z))*z,I.css("margin-"+(t.isHorizontal()?"top":"left"),0!==D&&e.spaceBetween&&e.spaceBetween+"px").attr("data-swiper-column",L).attr("data-swiper-row",D)}if("none"!==I.css("display")){if("auto"===e.slidesPerView){var O=r.getComputedStyle(I[0],null),B=I[0].style.transform,R=I[0].style.webkitTransform;B&&(I[0].style.transform="none"),R&&(I[0].style.webkitTransform="none"),S=t.isHorizontal()?I[0].getBoundingClientRect().width+parseFloat(O.getPropertyValue("margin-left"))+parseFloat(O.getPropertyValue("margin-right")):I[0].getBoundingClientRect().height+parseFloat(O.getPropertyValue("margin-top"))+parseFloat(O.getPropertyValue("margin-bottom")),B&&(I[0].style.transform=B),R&&(I[0].style.webkitTransform=R),e.roundLengths&&(S=Math.floor(S))}else S=(i-(e.slidesPerView-1)*x)/e.slidesPerView,e.roundLengths&&(S=Math.floor(S)),u[M]&&(t.isHorizontal()?u[M].style.width=S+"px":u[M].style.height=S+"px");u[M]&&(u[M].swiperSlideSize=S),m.push(S),e.centeredSlides?(b=b+S/2+w/2+x,0===w&&0!==M&&(b=b-i/2-x),0===M&&(b=b-i/2-x),Math.abs(b)<.001&&(b=0),e.roundLengths&&(b=Math.floor(b)),E%e.slidesPerGroup==0&&d.push(b),f.push(b)):(e.roundLengths&&(b=Math.floor(b)),E%e.slidesPerGroup==0&&d.push(b),f.push(b),b=b+S+x),t.virtualSize+=S+x,w=S,E+=1}}if(t.virtualSize=Math.max(t.virtualSize,i)+v,a&&o&&("slide"===e.effect||"coverflow"===e.effect)&&n.css({width:t.virtualSize+e.spaceBetween+"px"}),p.flexbox&&!e.setWrapperSize||(t.isHorizontal()?n.css({width:t.virtualSize+e.spaceBetween+"px"}):n.css({height:t.virtualSize+e.spaceBetween+"px"})),1<e.slidesPerColumn&&(t.virtualSize=(S+e.spaceBetween)*T,t.virtualSize=Math.ceil(t.virtualSize/e.slidesPerColumn)-e.spaceBetween,t.isHorizontal()?n.css({width:t.virtualSize+e.spaceBetween+"px"}):n.css({height:t.virtualSize+e.spaceBetween+"px"}),e.centeredSlides)){C=[];for(var F=0;F<d.length;F+=1){var N=d[F];e.roundLengths&&(N=Math.floor(N)),d[F]<t.virtualSize+d[0]&&C.push(N)}d=C}if(!e.centeredSlides){C=[];for(var V=0;V<d.length;V+=1){var j=d[V];e.roundLengths&&(j=Math.floor(j)),d[V]<=t.virtualSize-i&&C.push(j)}d=C,1<Math.floor(t.virtualSize-i)-Math.floor(d[d.length-1])&&d.push(t.virtualSize-i)}0===d.length&&(d=[0]),0!==e.spaceBetween&&(t.isHorizontal()?a?u.css({marginLeft:x+"px"}):u.css({marginRight:x+"px"}):u.css({marginBottom:x+"px"})),c.extend(t,{slides:u,snapGrid:d,slidesGrid:f,slidesSizesGrid:m}),h!==l&&t.emit("slidesLengthChange"),d.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),f.length!==_&&t.emit("slidesGridLengthChange"),(e.watchSlidesProgress||e.watchSlidesVisibility)&&t.updateSlidesOffset()}},updateAutoHeight:function(t){var e,n=this,i=[],r=0;if("number"==typeof t?n.setTransition(t):!0===t&&n.setTransition(n.params.speed),"auto"!==n.params.slidesPerView&&1<n.params.slidesPerView)for(e=0;e<Math.ceil(n.params.slidesPerView);e+=1){var a=n.activeIndex+e;if(a>n.slides.length)break;i.push(n.slides.eq(a)[0])}else i.push(n.slides.eq(n.activeIndex)[0]);for(e=0;e<i.length;e+=1)if(void 0!==i[e]){var o=i[e].offsetHeight;r=r<o?o:r}r&&n.$wrapperEl.css("height",r+"px")},updateSlidesOffset:function(){for(var t=this.slides,e=0;e<t.length;e+=1)t[e].swiperSlideOffset=this.isHorizontal()?t[e].offsetLeft:t[e].offsetTop},updateSlidesProgress:function(t){void 0===t&&(t=this&&this.translate||0);var e=this,n=e.params,i=e.slides,r=e.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&e.updateSlidesOffset();var a=-t;r&&(a=t),i.removeClass(n.slideVisibleClass);for(var o=0;o<i.length;o+=1){var s=i[o],l=(a+(n.centeredSlides?e.minTranslate():0)-s.swiperSlideOffset)/(s.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility){var u=-(a-s.swiperSlideOffset),c=u+e.slidesSizesGrid[o];(0<=u&&u<e.size||0<c&&c<=e.size||u<=0&&c>=e.size)&&i.eq(o).addClass(n.slideVisibleClass)}s.progress=r?-l:l}}},updateProgress:function(t){void 0===t&&(t=this&&this.translate||0);var e=this,n=e.params,i=e.maxTranslate()-e.minTranslate(),r=e.progress,a=e.isBeginning,o=e.isEnd,s=a,l=o;0===i?o=a=!(r=0):(a=(r=(t-e.minTranslate())/i)<=0,o=1<=r),c.extend(e,{progress:r,isBeginning:a,isEnd:o}),(n.watchSlidesProgress||n.watchSlidesVisibility)&&e.updateSlidesProgress(t),a&&!s&&e.emit("reachBeginning toEdge"),o&&!l&&e.emit("reachEnd toEdge"),(s&&!a||l&&!o)&&e.emit("fromEdge"),e.emit("progress",r)},updateSlidesClasses:function(){var t,e=this,n=e.slides,i=e.params,r=e.$wrapperEl,a=e.activeIndex,o=e.realIndex,s=e.virtual&&i.virtual.enabled;n.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(t=s?e.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+a+'"]'):n.eq(a)).addClass(i.slideActiveClass),i.loop&&(t.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o+'"]').addClass(i.slideDuplicateActiveClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o+'"]').addClass(i.slideDuplicateActiveClass));var l=t.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=n.eq(0)).addClass(i.slideNextClass);var u=t.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===u.length&&(u=n.eq(-1)).addClass(i.slidePrevClass),i.loop&&(l.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),u.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(t){var e,n=this,i=n.rtlTranslate?n.translate:-n.translate,r=n.slidesGrid,a=n.snapGrid,o=n.params,s=n.activeIndex,l=n.realIndex,u=n.snapIndex,p=t;if(void 0===p){for(var h=0;h<r.length;h+=1)void 0!==r[h+1]?i>=r[h]&&i<r[h+1]-(r[h+1]-r[h])/2?p=h:i>=r[h]&&i<r[h+1]&&(p=h+1):i>=r[h]&&(p=h);o.normalizeSlideIndex&&(p<0||void 0===p)&&(p=0)}if((e=0<=a.indexOf(i)?a.indexOf(i):Math.floor(p/o.slidesPerGroup))>=a.length&&(e=a.length-1),p!==s){var d=parseInt(n.slides.eq(p).attr("data-swiper-slide-index")||p,10);c.extend(n,{snapIndex:e,realIndex:d,previousIndex:s,activeIndex:p}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),l!==d&&n.emit("realIndexChange"),n.emit("slideChange")}else e!==u&&(n.snapIndex=e,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var n=this,i=n.params,r=t(e.target).closest("."+i.slideClass)[0],a=!1;if(r)for(var o=0;o<n.slides.length;o+=1)n.slides[o]===r&&(a=!0);if(!r||!a)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(t(r).attr("data-swiper-slide-index"),10):n.clickedIndex=t(r).index(),i.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}},g={getTranslate:function(t){void 0===t&&(t=this.isHorizontal()?"x":"y");var e=this.params,n=this.rtlTranslate,i=this.translate,r=this.$wrapperEl;if(e.virtualTranslate)return n?-i:i;var a=c.getTranslate(r[0],t);return n&&(a=-a),a||0},setTranslate:function(t,e){var n=this,i=n.rtlTranslate,r=n.params,a=n.$wrapperEl,o=n.progress,s=0,l=0;n.isHorizontal()?s=i?-t:t:l=t,r.roundLengths&&(s=Math.floor(s),l=Math.floor(l)),r.virtualTranslate||(p.transforms3d?a.transform("translate3d("+s+"px, "+l+"px, 0px)"):a.transform("translate("+s+"px, "+l+"px)")),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?s:l;var u=n.maxTranslate()-n.minTranslate();(0===u?0:(t-n.minTranslate())/u)!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]}},v={setTransition:function(t,e){this.$wrapperEl.transition(t),this.emit("setTransition",t,e)},transitionStart:function(t,e){void 0===t&&(t=!0);var n=this,i=n.activeIndex,r=n.params,a=n.previousIndex;r.autoHeight&&n.updateAutoHeight();var o=e;if(o||(o=a<i?"next":i<a?"prev":"reset"),n.emit("transitionStart"),t&&i!==a){if("reset"===o)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===o?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}},transitionEnd:function(t,e){void 0===t&&(t=!0);var n=this,i=n.activeIndex,r=n.previousIndex;n.animating=!1,n.setTransition(0);var a=e;if(a||(a=r<i?"next":i<r?"prev":"reset"),n.emit("transitionEnd"),t&&i!==r){if("reset"===a)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===a?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}},y={slideTo:function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===n&&(n=!0);var r=this,a=t;a<0&&(a=0);var o=r.params,s=r.snapGrid,l=r.slidesGrid,u=r.previousIndex,c=r.activeIndex,h=r.rtlTranslate;if(r.animating&&o.preventInteractionOnTransition)return!1;var d=Math.floor(a/o.slidesPerGroup);d>=s.length&&(d=s.length-1),(c||o.initialSlide||0)===(u||0)&&n&&r.emit("beforeSlideChangeStart");var f,m=-s[d];if(r.updateProgress(m),o.normalizeSlideIndex)for(var g=0;g<l.length;g+=1)-Math.floor(100*m)>=Math.floor(100*l[g])&&(a=g);if(r.initialized&&a!==c){if(!r.allowSlideNext&&m<r.translate&&m<r.minTranslate())return!1;if(!r.allowSlidePrev&&m>r.translate&&m>r.maxTranslate()&&(c||0)!==a)return!1}return f=c<a?"next":a<c?"prev":"reset",h&&-m===r.translate||!h&&m===r.translate?(r.updateActiveIndex(a),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==o.effect&&r.setTranslate(m),"reset"!==f&&(r.transitionStart(n,f),r.transitionEnd(n,f)),!1):(0!==e&&p.transition?(r.setTransition(e),r.setTranslate(m),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(n,f),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(t){r&&!r.destroyed&&t.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(n,f))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))):(r.setTransition(0),r.setTranslate(m),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(n,f),r.transitionEnd(n,f)),!0)},slideToLoop:function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===n&&(n=!0);var r=t;return this.params.loop&&(r+=this.loopedSlides),this.slideTo(r,e,n,i)},slideNext:function(t,e,n){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,r=i.params,a=i.animating;return r.loop?!a&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,i.slideTo(i.activeIndex+r.slidesPerGroup,t,e,n)):i.slideTo(i.activeIndex+r.slidesPerGroup,t,e,n)},slidePrev:function(t,e,n){function i(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var r=this,a=r.params,o=r.animating,s=r.snapGrid,l=r.slidesGrid,u=r.rtlTranslate;if(a.loop){if(o)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}var c,p=i(u?r.translate:-r.translate),h=s.map(function(t){return i(t)}),d=(l.map(function(t){return i(t)}),s[h.indexOf(p)],s[h.indexOf(p)-1]);return void 0!==d&&(c=l.indexOf(d))<0&&(c=r.activeIndex-1),r.slideTo(c,t,e,n)},slideReset:function(t,e,n){return void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),this.slideTo(this.activeIndex,t,e,n)},slideToClosest:function(t,e,n){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,r=i.activeIndex,a=Math.floor(r/i.params.slidesPerGroup);if(a<i.snapGrid.length-1){var o=i.rtlTranslate?i.translate:-i.translate,s=i.snapGrid[a];(i.snapGrid[a+1]-s)/2<o-s&&(r=i.params.slidesPerGroup)}return i.slideTo(r,t,e,n)},slideToClickedSlide:function(){var e,n=this,i=n.params,r=n.$wrapperEl,a="auto"===i.slidesPerView?n.slidesPerViewDynamic():i.slidesPerView,o=n.clickedIndex;if(i.loop){if(n.animating)return;e=parseInt(t(n.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?o<n.loopedSlides-a/2||o>n.slides.length-n.loopedSlides+a/2?(n.loopFix(),o=r.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),c.nextTick(function(){n.slideTo(o)})):n.slideTo(o):o>n.slides.length-a?(n.loopFix(),o=r.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),c.nextTick(function(){n.slideTo(o)})):n.slideTo(o)}else n.slideTo(o)}},_={loopCreate:function(){var e=this,n=e.params,r=e.$wrapperEl;r.children("."+n.slideClass+"."+n.slideDuplicateClass).remove();var a=r.children("."+n.slideClass);if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-a.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var s=0;s<o;s+=1){var l=t(i.createElement("div")).addClass(n.slideClass+" "+n.slideBlankClass);r.append(l)}a=r.children("."+n.slideClass)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=a.length),e.loopedSlides=parseInt(n.loopedSlides||n.slidesPerView,10),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>a.length&&(e.loopedSlides=a.length);var u=[],c=[];a.each(function(n,i){var r=t(i);n<e.loopedSlides&&c.push(i),n<a.length&&n>=a.length-e.loopedSlides&&u.push(i),r.attr("data-swiper-slide-index",n)});for(var p=0;p<c.length;p+=1)r.append(t(c[p].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var h=u.length-1;0<=h;h-=1)r.prepend(t(u[h].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var t,e=this,n=e.params,i=e.activeIndex,r=e.slides,a=e.loopedSlides,o=e.allowSlidePrev,s=e.allowSlideNext,l=e.snapGrid,u=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var c=-l[i]-e.getTranslate();i<a?(t=r.length-3*a+i,t+=a,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((u?-e.translate:e.translate)-c)):("auto"===n.slidesPerView&&2*a<=i||i>=r.length-a)&&(t=-r.length+i+a,t+=a,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((u?-e.translate:e.translate)-c)),e.allowSlidePrev=o,e.allowSlideNext=s},loopDestroy:function(){var t=this.$wrapperEl,e=this.params,n=this.slides;t.children("."+e.slideClass+"."+e.slideDuplicateClass).remove(),n.removeAttr("data-swiper-slide-index")}},x={setGrabCursor:function(t){if(!(p.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked)){var e=this.el;e.style.cursor="move",e.style.cursor=t?"-webkit-grabbing":"-webkit-grab",e.style.cursor=t?"-moz-grabbin":"-moz-grab",e.style.cursor=t?"grabbing":"grab"}},unsetGrabCursor:function(){p.touch||this.params.watchOverflow&&this.isLocked||(this.el.style.cursor="")}},b={appendSlide:function(t){var e=this,n=e.$wrapperEl,i=e.params;if(i.loop&&e.loopDestroy(),"object"==typeof t&&"length"in t)for(var r=0;r<t.length;r+=1)t[r]&&n.append(t[r]);else n.append(t);i.loop&&e.loopCreate(),i.observer&&p.observer||e.update()},prependSlide:function(t){var e=this,n=e.params,i=e.$wrapperEl,r=e.activeIndex;n.loop&&e.loopDestroy();var a=r+1;if("object"==typeof t&&"length"in t){for(var o=0;o<t.length;o+=1)t[o]&&i.prepend(t[o]);a=r+t.length}else i.prepend(t);n.loop&&e.loopCreate(),n.observer&&p.observer||e.update(),e.slideTo(a,0,!1)},addSlide:function(t,e){var n=this,i=n.$wrapperEl,r=n.params,a=n.activeIndex;r.loop&&(a-=n.loopedSlides,n.loopDestroy(),n.slides=i.children("."+r.slideClass));var o=n.slides.length;if(t<=0)n.prependSlide(e);else if(o<=t)n.appendSlide(e);else{for(var s=t<a?a+1:a,l=[],u=o-1;t<=u;u-=1){var c=n.slides.eq(u);c.remove(),l.unshift(c)}if("object"==typeof e&&"length"in e){for(var h=0;h<e.length;h+=1)e[h]&&i.append(e[h]);s=t<a?a+e.length:a}else i.append(e);for(var d=0;d<l.length;d+=1)i.append(l[d]);r.loop&&n.loopCreate(),r.observer&&p.observer||n.update(),r.loop?n.slideTo(s+n.loopedSlides,0,!1):n.slideTo(s,0,!1)}},removeSlide:function(t){var e=this,n=e.params,i=e.$wrapperEl,r=e.activeIndex;n.loop&&(r-=e.loopedSlides,e.loopDestroy(),e.slides=i.children("."+n.slideClass));var a,o=r;if("object"==typeof t&&"length"in t){for(var s=0;s<t.length;s+=1)a=t[s],e.slides[a]&&e.slides.eq(a).remove(),a<o&&(o-=1);o=Math.max(o,0)}else a=t,e.slides[a]&&e.slides.eq(a).remove(),a<o&&(o-=1),o=Math.max(o,0);n.loop&&e.loopCreate(),n.observer&&p.observer||e.update(),n.loop?e.slideTo(o+e.loopedSlides,0,!1):e.slideTo(o,0,!1)},removeAllSlides:function(){for(var t=[],e=0;e<this.slides.length;e+=1)t.push(e);this.removeSlide(t)}},w=function(){var t=r.navigator.userAgent,e={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:r.cordova||r.phonegap,phonegap:r.cordova||r.phonegap},n=t.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),a=t.match(/(Android);?[\s\/]+([\d.]+)?/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!o&&t.match(/(iPhone\sOS|iOS)\s([\d_]+)/);if(n&&(e.os="windows",e.osVersion=n[2],e.windows=!0),a&&!n&&(e.os="android",e.osVersion=a[2],e.android=!0,e.androidChrome=0<=t.toLowerCase().indexOf("chrome")),(o||l||s)&&(e.os="ios",e.ios=!0),l&&!s&&(e.osVersion=l[2].replace(/_/g,"."),e.iphone=!0),o&&(e.osVersion=o[2].replace(/_/g,"."),e.ipad=!0),s&&(e.osVersion=s[3]?s[3].replace(/_/g,"."):null,e.iphone=!0),e.ios&&e.osVersion&&0<=t.indexOf("Version/")&&"10"===e.osVersion.split(".")[0]&&(e.osVersion=t.toLowerCase().split("version/")[1].split(" ")[0]),e.desktop=!(e.os||e.android||e.webView),e.webView=(l||o||s)&&t.match(/.*AppleWebKit(?!.*Safari)/i),e.os&&"ios"===e.os){var u=e.osVersion.split("."),c=i.querySelector('meta[name="viewport"]');e.minimalUi=!e.webView&&(s||l)&&(1*u[0]==7?1<=1*u[1]:7<1*u[0])&&c&&0<=c.getAttribute("content").indexOf("minimal-ui")}return e.pixelRatio=r.devicePixelRatio||1,e}(),E={attachEvents:function(){var e=this,a=e.params,o=e.touchEvents,s=e.el,l=e.wrapperEl;e.onTouchStart=function(e){var n=this,a=n.touchEventsData,o=n.params,s=n.touches;if(!n.animating||!o.preventInteractionOnTransition){var l=e;if(l.originalEvent&&(l=l.originalEvent),a.isTouchEvent="touchstart"===l.type,(a.isTouchEvent||!("which"in l)||3!==l.which)&&(!a.isTouched||!a.isMoved))if(o.noSwiping&&t(l.target).closest(o.noSwipingSelector?o.noSwipingSelector:"."+o.noSwipingClass)[0])n.allowClick=!0;else if(!o.swipeHandler||t(l).closest(o.swipeHandler)[0]){s.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,s.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var u=s.currentX,p=s.currentY,h=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,d=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(!h||!(u<=d||u>=r.screen.width-d)){if(c.extend(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=u,s.startY=p,a.touchStartTime=c.now(),n.allowClick=!0,n.updateSize(),n.swipeDirection=void 0,0<o.threshold&&(a.allowThresholdMove=!1),"touchstart"!==l.type){var f=!0;t(l.target).is(a.formElements)&&(f=!1),i.activeElement&&t(i.activeElement).is(a.formElements)&&i.activeElement!==l.target&&i.activeElement.blur(),f&&n.allowTouchMove&&l.preventDefault()}n.emit("touchStart",l)}}}}.bind(e),e.onTouchMove=function(e){var n=this,r=n.touchEventsData,a=n.params,o=n.touches,s=n.rtlTranslate,l=e;if(l.originalEvent&&(l=l.originalEvent),r.isTouched){if(!r.isTouchEvent||"mousemove"!==l.type){var u="touchmove"===l.type?l.targetTouches[0].pageX:l.pageX,p="touchmove"===l.type?l.targetTouches[0].pageY:l.pageY;if(l.preventedByNestedSwiper)return o.startX=u,void(o.startY=p);if(!n.allowTouchMove)return n.allowClick=!1,void(r.isTouched&&(c.extend(o,{startX:u,startY:p,currentX:u,currentY:p}),r.touchStartTime=c.now()));if(r.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(n.isVertical()){if(p<o.startY&&n.translate<=n.maxTranslate()||p>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(u<o.startX&&n.translate<=n.maxTranslate()||u>o.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&i.activeElement&&l.target===i.activeElement&&t(l.target).is(r.formElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",l),!(l.targetTouches&&1<l.targetTouches.length)){o.currentX=u,o.currentY=p;var h,d=o.currentX-o.startX,f=o.currentY-o.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(d,2)+Math.pow(f,2))<n.params.threshold))if(void 0===r.isScrolling&&(n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:25<=d*d+f*f&&(h=180*Math.atan2(Math.abs(f),Math.abs(d))/Math.PI,r.isScrolling=n.isHorizontal()?h>a.touchAngle:90-h>a.touchAngle)),r.isScrolling&&n.emit("touchMoveOpposite",l),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){n.allowClick=!1,l.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&l.stopPropagation(),r.isMoved||(a.loop&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!a.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),r.isMoved=!0;var m=n.isHorizontal()?d:f;o.diff=m,m*=a.touchRatio,s&&(m=-m),n.swipeDirection=0<m?"prev":"next",r.currentTranslate=m+r.startTranslate;var g=!0,v=a.resistanceRatio;if(a.touchReleaseOnEdges&&(v=0),0<m&&r.currentTranslate>n.minTranslate()?(g=!1,a.resistance&&(r.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+r.startTranslate+m,v))):m<0&&r.currentTranslate<n.maxTranslate()&&(g=!1,a.resistance&&(r.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-r.startTranslate-m,v))),g&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),0<a.threshold){if(!(Math.abs(m)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}a.followFinger&&((a.freeMode||a.watchSlidesProgress||a.watchSlidesVisibility)&&(n.updateActiveIndex(),n.updateSlidesClasses()),a.freeMode&&(0===r.velocities.length&&r.velocities.push({position:o[n.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:o[n.isHorizontal()?"currentX":"currentY"],time:c.now()})),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}}}}else r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l)}.bind(e),e.onTouchEnd=function(t){var e=this,n=e.touchEventsData,i=e.params,r=e.touches,a=e.rtlTranslate,o=e.$wrapperEl,s=e.slidesGrid,l=e.snapGrid,u=t;if(u.originalEvent&&(u=u.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",u),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);var p,h=c.now(),d=h-n.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(u),e.emit("tap",u),d<300&&300<h-n.lastClickTime&&(n.clickTimeout&&clearTimeout(n.clickTimeout),n.clickTimeout=c.nextTick(function(){e&&!e.destroyed&&e.emit("click",u)},300)),d<300&&h-n.lastClickTime<300&&(n.clickTimeout&&clearTimeout(n.clickTimeout),e.emit("doubleTap",u))),n.lastClickTime=c.now(),c.nextTick(function(){e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||0===r.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,p=i.followFinger?a?e.translate:-e.translate:-n.currentTranslate,i.freeMode){if(p<-e.minTranslate())return void e.slideTo(e.activeIndex);if(p>-e.maxTranslate())return void(e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1));if(i.freeModeMomentum){if(1<n.velocities.length){var f=n.velocities.pop(),m=n.velocities.pop(),g=f.position-m.position,v=f.time-m.time;e.velocity=g/v,e.velocity/=2,Math.abs(e.velocity)<i.freeModeMinimumVelocity&&(e.velocity=0),(150<v||300<c.now()-f.time)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeModeMomentumVelocityRatio,n.velocities.length=0;var y=1e3*i.freeModeMomentumRatio,_=e.velocity*y,x=e.translate+_;a&&(x=-x);var b,w,E=!1,T=20*Math.abs(e.velocity)*i.freeModeMomentumBounceRatio;if(x<e.maxTranslate())i.freeModeMomentumBounce?(x+e.maxTranslate()<-T&&(x=e.maxTranslate()-T),b=e.maxTranslate(),E=!0,n.allowMomentumBounce=!0):x=e.maxTranslate(),i.loop&&i.centeredSlides&&(w=!0);else if(x>e.minTranslate())i.freeModeMomentumBounce?(x-e.minTranslate()>T&&(x=e.minTranslate()+T),b=e.minTranslate(),E=!0,n.allowMomentumBounce=!0):x=e.minTranslate(),i.loop&&i.centeredSlides&&(w=!0);else if(i.freeModeSticky){for(var S,C=0;C<l.length;C+=1)if(l[C]>-x){S=C;break}x=-(x=Math.abs(l[S]-x)<Math.abs(l[S-1]-x)||"next"===e.swipeDirection?l[S]:l[S-1])}if(w&&e.once("transitionEnd",function(){e.loopFix()}),0!==e.velocity)y=a?Math.abs((-x-e.translate)/e.velocity):Math.abs((x-e.translate)/e.velocity);else if(i.freeModeSticky)return void e.slideToClosest();i.freeModeMomentumBounce&&E?(e.updateProgress(b),e.setTransition(y),e.setTranslate(x),e.transitionStart(!0,e.swipeDirection),e.animating=!0,o.transitionEnd(function(){e&&!e.destroyed&&n.allowMomentumBounce&&(e.emit("momentumBounce"),e.setTransition(i.speed),e.setTranslate(b),o.transitionEnd(function(){e&&!e.destroyed&&e.transitionEnd()}))})):e.velocity?(e.updateProgress(x),e.setTransition(y),e.setTranslate(x),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,o.transitionEnd(function(){e&&!e.destroyed&&e.transitionEnd()}))):e.updateProgress(x),e.updateActiveIndex(),e.updateSlidesClasses()}else if(i.freeModeSticky)return void e.slideToClosest();(!i.freeModeMomentum||d>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}else{for(var k=0,z=e.slidesSizesGrid[0],A=0;A<s.length;A+=i.slidesPerGroup)void 0!==s[A+i.slidesPerGroup]?p>=s[A]&&p<s[A+i.slidesPerGroup]&&(z=s[(k=A)+i.slidesPerGroup]-s[A]):p>=s[A]&&(k=A,z=s[s.length-1]-s[s.length-2]);var M=(p-s[k])/z;if(d>i.longSwipesMs){if(!i.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(M>=i.longSwipesRatio?e.slideTo(k+i.slidesPerGroup):e.slideTo(k)),"prev"===e.swipeDirection&&(M>1-i.longSwipesRatio?e.slideTo(k+i.slidesPerGroup):e.slideTo(k))}else{if(!i.shortSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&e.slideTo(k+i.slidesPerGroup),"prev"===e.swipeDirection&&e.slideTo(k)}}}.bind(e),e.onClick=function(t){this.allowClick||(this.params.preventClicks&&t.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}.bind(e);var u="container"===a.touchEventsTarget?s:l,h=!!a.nested;if(p.touch||!p.pointerEvents&&!p.prefixedPointerEvents){if(p.touch){var d=!("touchstart"!==o.start||!p.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};u.addEventListener(o.start,e.onTouchStart,d),u.addEventListener(o.move,e.onTouchMove,p.passiveListener?{passive:!1,capture:h}:h),u.addEventListener(o.end,e.onTouchEnd,d)}(a.simulateTouch&&!w.ios&&!w.android||a.simulateTouch&&!p.touch&&w.ios)&&(u.addEventListener("mousedown",e.onTouchStart,!1),i.addEventListener("mousemove",e.onTouchMove,h),i.addEventListener("mouseup",e.onTouchEnd,!1))}else u.addEventListener(o.start,e.onTouchStart,!1),i.addEventListener(o.move,e.onTouchMove,h),i.addEventListener(o.end,e.onTouchEnd,!1);(a.preventClicks||a.preventClicksPropagation)&&u.addEventListener("click",e.onClick,!0),e.on(w.ios||w.android?"resize orientationchange observerUpdate":"resize observerUpdate",n,!0)},detachEvents:function(){var t=this,e=t.params,r=t.touchEvents,a=t.el,o=t.wrapperEl,s="container"===e.touchEventsTarget?a:o,l=!!e.nested;if(p.touch||!p.pointerEvents&&!p.prefixedPointerEvents){if(p.touch){var u=!("onTouchStart"!==r.start||!p.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};s.removeEventListener(r.start,t.onTouchStart,u),s.removeEventListener(r.move,t.onTouchMove,l),s.removeEventListener(r.end,t.onTouchEnd,u)}(e.simulateTouch&&!w.ios&&!w.android||e.simulateTouch&&!p.touch&&w.ios)&&(s.removeEventListener("mousedown",t.onTouchStart,!1),i.removeEventListener("mousemove",t.onTouchMove,l),i.removeEventListener("mouseup",t.onTouchEnd,!1))}else s.removeEventListener(r.start,t.onTouchStart,!1),i.removeEventListener(r.move,t.onTouchMove,l),i.removeEventListener(r.end,t.onTouchEnd,!1);(e.preventClicks||e.preventClicksPropagation)&&s.removeEventListener("click",t.onClick,!0),t.off(w.ios||w.android?"resize orientationchange observerUpdate":"resize observerUpdate",n)}},T={setBreakpoint:function(){var t=this,e=t.activeIndex,n=t.initialized,i=t.loopedSlides;void 0===i&&(i=0);var r=t.params,a=r.breakpoints;if(a&&(!a||0!==Object.keys(a).length)){var o=t.getBreakpoint(a);if(o&&t.currentBreakpoint!==o){var s=o in a?a[o]:t.originalParams,l=r.loop&&s.slidesPerView!==r.slidesPerView;c.extend(t.params,s),c.extend(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),t.currentBreakpoint=o,l&&n&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-i+t.loopedSlides,0,!1)),t.emit("breakpoint",s)}}},getBreakpoint:function(t){if(t){var e=!1,n=[];Object.keys(t).forEach(function(t){n.push(t)}),n.sort(function(t,e){return parseInt(t,10)-parseInt(e,10)});for(var i=0;i<n.length;i+=1){var a=n[i];a>=r.innerWidth&&!e&&(e=a)}return e||"max"}}},S={isIE:!!r.navigator.userAgent.match(/Trident/g)||!!r.navigator.userAgent.match(/MSIE/g),isSafari:(f=r.navigator.userAgent.toLowerCase(),0<=f.indexOf("safari")&&f.indexOf("chrome")<0&&f.indexOf("android")<0),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(r.navigator.userAgent)},C={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},k={update:m,translate:g,transition:v,slide:y,loop:_,grabCursor:x,manipulation:b,events:E,breakpoints:T,checkOverflow:{checkOverflow:function(){var t=this,e=t.isLocked;t.isLocked=1===t.snapGrid.length,t.allowSlideNext=!t.isLocked,t.allowSlidePrev=!t.isLocked,e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock"),e&&e!==t.isLocked&&(t.isEnd=!1,t.navigation.update())}},classes:{addClasses:function(){var t=this.classNames,e=this.params,n=this.rtl,i=this.$el,r=[];r.push(e.direction),e.freeMode&&r.push("free-mode"),p.flexbox||r.push("no-flexbox"),e.autoHeight&&r.push("autoheight"),n&&r.push("rtl"),1<e.slidesPerColumn&&r.push("multirow"),w.android&&r.push("android"),w.ios&&r.push("ios"),S.isIE&&(p.pointerEvents||p.prefixedPointerEvents)&&r.push("wp8-"+e.direction),r.forEach(function(n){t.push(e.containerModifierClass+n)}),i.addClass(t.join(" "))},removeClasses:function(){var t=this.$el,e=this.classNames;t.removeClass(e.join(" "))}},images:{loadImage:function(t,e,n,i,a,o){function s(){o&&o()}var l;t.complete&&a?s():e?((l=new r.Image).onload=s,l.onerror=s,i&&(l.sizes=i),n&&(l.srcset=n),e&&(l.src=e)):s()},preloadImages:function(){function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}var e=this;e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var i=e.imagesToLoad[n];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}}},z={},A=function(e){function n(){for(var i,r,a,o=[],s=arguments.length;s--;)o[s]=arguments[s];1===o.length&&o[0].constructor&&o[0].constructor===Object?a=o[0]:(r=(i=o)[0],a=i[1]),a||(a={}),a=c.extend({},a),r&&!a.el&&(a.el=r),e.call(this,a),Object.keys(k).forEach(function(t){Object.keys(k[t]).forEach(function(e){n.prototype[e]||(n.prototype[e]=k[t][e])})});var l=this;void 0===l.modules&&(l.modules={}),Object.keys(l.modules).forEach(function(t){var e=l.modules[t];if(e.params){var n=Object.keys(e.params)[0],i=e.params[n];if("object"!=typeof i)return;if(!(n in a&&"enabled"in i))return;!0===a[n]&&(a[n]={enabled:!0}),"object"!=typeof a[n]||"enabled"in a[n]||(a[n].enabled=!0),a[n]||(a[n]={enabled:!1})}});var u=c.extend({},C);l.useModulesParams(u),l.params=c.extend({},u,z,a),l.originalParams=c.extend({},l.params),l.passedParams=c.extend({},a);var h=(l.$=t)(l.params.el);if(r=h[0]){if(1<h.length){var d=[];return h.each(function(t,e){var i=c.extend({},a,{el:e});d.push(new n(i))}),d}r.swiper=l,h.data("swiper",l);var f,m,g=h.children("."+l.params.wrapperClass);return c.extend(l,{$el:h,el:r,$wrapperEl:g,wrapperEl:g[0],classNames:[],slides:t(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===l.params.direction},isVertical:function(){return"vertical"===l.params.direction},rtl:"rtl"===r.dir.toLowerCase()||"rtl"===h.css("direction"),rtlTranslate:"horizontal"===l.params.direction&&("rtl"===r.dir.toLowerCase()||"rtl"===h.css("direction")),wrongRTL:"-webkit-box"===g.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:(f=["touchstart","touchmove","touchend"],m=["mousedown","mousemove","mouseup"],p.pointerEvents?m=["pointerdown","pointermove","pointerup"]:p.prefixedPointerEvents&&(m=["MSPointerDown","MSPointerMove","MSPointerUp"]),l.touchEventsTouch={start:f[0],move:f[1],end:f[2]},l.touchEventsDesktop={start:m[0],move:m[1],end:m[2]},p.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:c.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.useModules(),l.params.init&&l.init(),l}}e&&(n.__proto__=e);var i={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return((n.prototype=Object.create(e&&e.prototype)).constructor=n).prototype.slidesPerViewDynamic=function(){var t=this,e=t.params,n=t.slides,i=t.slidesGrid,r=t.size,a=t.activeIndex,o=1;if(e.centeredSlides){for(var s,l=n[a].swiperSlideSize,u=a+1;u<n.length;u+=1)n[u]&&!s&&(o+=1,r<(l+=n[u].swiperSlideSize)&&(s=!0));for(var c=a-1;0<=c;c-=1)n[c]&&!s&&(o+=1,r<(l+=n[c].swiperSlideSize)&&(s=!0))}else for(var p=a+1;p<n.length;p+=1)i[p]-i[a]<r&&(o+=1);return o},n.prototype.update=function(){function t(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}var e=this;if(e&&!e.destroyed){var n=e.snapGrid,i=e.params;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(t(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||1<e.params.slidesPerView)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||t(),i.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}},n.prototype.init=function(){var t=this;t.initialized||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit),t.attachEvents(),t.initialized=!0,t.emit("init"))},n.prototype.destroy=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var n=this,i=n.params,r=n.$el,a=n.$wrapperEl,o=n.slides;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),e&&(n.removeClasses(),r.removeAttr("style"),a.removeAttr("style"),o&&o.length&&o.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(function(t){n.off(t)}),!1!==t&&(n.$el[0].swiper=null,n.$el.data("swiper",null),c.deleteProps(n)),n.destroyed=!0),null},n.extendDefaults=function(t){c.extend(z,t)},i.extendedDefaults.get=function(){return z},i.defaults.get=function(){return C},i.Class.get=function(){return e},i.$.get=function(){return t},Object.defineProperties(n,i),n}(h),M={name:"device",proto:{device:w},static:{device:w}},I={name:"support",proto:{support:p},static:{support:p}},P={name:"browser",proto:{browser:S},static:{browser:S}},L={name:"resize",create:function(){var t=this;c.extend(t,{resize:{resizeHandler:function(){t&&!t.destroyed&&t.initialized&&(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){t&&!t.destroyed&&t.initialized&&t.emit("orientationchange")}}})},on:{init:function(){r.addEventListener("resize",this.resize.resizeHandler),r.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){r.removeEventListener("resize",this.resize.resizeHandler),r.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},D={func:r.MutationObserver||r.WebkitMutationObserver,attach:function(t,e){void 0===e&&(e={});var n=this,i=new D.func(function(t){if(1!==t.length){var e=function(){n.emit("observerUpdate",t[0])};r.requestAnimationFrame?r.requestAnimationFrame(e):r.setTimeout(e,0)}else n.emit("observerUpdate",t[0])});i.observe(t,{attributes:void 0===e.attributes||e.attributes,childList:void 0===e.childList||e.childList,characterData:void 0===e.characterData||e.characterData}),n.observer.observers.push(i)},init:function(){var t=this;if(p.observer&&t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)t.observer.attach(e[n]);t.observer.attach(t.$el[0],{childList:!1}),t.observer.attach(t.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(t){t.disconnect()}),this.observer.observers=[]}},O={name:"observer",params:{observer:!1,observeParents:!1},create:function(){c.extend(this,{observer:{init:D.init.bind(this),attach:D.attach.bind(this),destroy:D.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},B={update:function(t){function e(){n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.lazy&&n.params.lazy.enabled&&n.lazy.load()}var n=this,i=n.params,r=i.slidesPerView,a=i.slidesPerGroup,o=i.centeredSlides,s=n.virtual,l=s.from,u=s.to,p=s.slides,h=s.slidesGrid,d=s.renderSlide,f=s.offset;n.updateActiveIndex();var m,g,v,y=n.activeIndex||0;m=n.rtlTranslate?"right":n.isHorizontal()?"left":"top",o?(g=Math.floor(r/2)+a,v=Math.floor(r/2)+a):(g=r+(a-1),v=a);var _=Math.max((y||0)-v,0),x=Math.min((y||0)+g,p.length-1),b=(n.slidesGrid[_]||0)-(n.slidesGrid[0]||0);if(c.extend(n.virtual,{from:_,to:x,offset:b,slidesGrid:n.slidesGrid}),l===_&&u===x&&!t)return n.slidesGrid!==h&&b!==f&&n.slides.css(m,b+"px"),void n.updateProgress();if(n.params.virtual.renderExternal)return n.params.virtual.renderExternal.call(n,{offset:b,from:_,to:x,slides:function(){for(var t=[],e=_;e<=x;e+=1)t.push(p[e]);return t}()}),void e();var w=[],E=[];if(t)n.$wrapperEl.find("."+n.params.slideClass).remove();else for(var T=l;T<=u;T+=1)(T<_||x<T)&&n.$wrapperEl.find("."+n.params.slideClass+'[data-swiper-slide-index="'+T+'"]').remove();for(var S=0;S<p.length;S+=1)_<=S&&S<=x&&(void 0===u||t?E.push(S):(u<S&&E.push(S),S<l&&w.push(S)));E.forEach(function(t){n.$wrapperEl.append(d(p[t],t))}),w.sort(function(t,e){return t<e}).forEach(function(t){n.$wrapperEl.prepend(d(p[t],t))}),n.$wrapperEl.children(".swiper-slide").css(m,b+"px"),e()},renderSlide:function(e,n){var i=this,r=i.params.virtual;if(r.cache&&i.virtual.cache[n])return i.virtual.cache[n];var a=t(r.renderSlide?r.renderSlide.call(i,e,n):'<div class="'+i.params.slideClass+'" data-swiper-slide-index="'+n+'">'+e+"</div>");return a.attr("data-swiper-slide-index")||a.attr("data-swiper-slide-index",n),r.cache&&(i.virtual.cache[n]=a),a},appendSlide:function(t){this.virtual.slides.push(t),this.virtual.update(!0)},prependSlide:function(t){var e=this;if(e.virtual.slides.unshift(t),e.params.virtual.cache){var n=e.virtual.cache,i={};Object.keys(n).forEach(function(t){i[t+1]=n[t]}),e.virtual.cache=i}e.virtual.update(!0),e.slideNext(0)}},R={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null}},create:function(){var t=this;c.extend(t,{virtual:{update:B.update.bind(t),appendSlide:B.appendSlide.bind(t),prependSlide:B.prependSlide.bind(t),renderSlide:B.renderSlide.bind(t),slides:t.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){var t=this;if(t.params.virtual.enabled){t.classNames.push(t.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};c.extend(t.params,e),c.extend(t.originalParams,e),t.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},F={handle:function(t){var e=this,n=e.rtlTranslate,a=t;a.originalEvent&&(a=a.originalEvent);var o=a.keyCode||a.charCode;if(!e.allowSlideNext&&(e.isHorizontal()&&39===o||e.isVertical()&&40===o))return!1;if(!e.allowSlidePrev&&(e.isHorizontal()&&37===o||e.isVertical()&&38===o))return!1;if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey||i.activeElement&&i.activeElement.nodeName&&("input"===i.activeElement.nodeName.toLowerCase()||"textarea"===i.activeElement.nodeName.toLowerCase()))){if(e.params.keyboard.onlyInViewport&&(37===o||39===o||38===o||40===o)){var s=!1;if(0<e.$el.parents("."+e.params.slideClass).length&&0===e.$el.parents("."+e.params.slideActiveClass).length)return;var l=r.innerWidth,u=r.innerHeight,c=e.$el.offset();n&&(c.left-=e.$el[0].scrollLeft);for(var p=[[c.left,c.top],[c.left+e.width,c.top],[c.left,c.top+e.height],[c.left+e.width,c.top+e.height]],h=0;h<p.length;h+=1){var d=p[h];0<=d[0]&&d[0]<=l&&0<=d[1]&&d[1]<=u&&(s=!0)}if(!s)return}e.isHorizontal()?(37!==o&&39!==o||(a.preventDefault?a.preventDefault():a.returnValue=!1),(39===o&&!n||37===o&&n)&&e.slideNext(),(37===o&&!n||39===o&&n)&&e.slidePrev()):(38!==o&&40!==o||(a.preventDefault?a.preventDefault():a.returnValue=!1),40===o&&e.slideNext(),38===o&&e.slidePrev()),e.emit("keyPress",o)}},enable:function(){this.keyboard.enabled||(t(i).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(t(i).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},N={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){c.extend(this,{keyboard:{enabled:!1,enable:F.enable.bind(this),disable:F.disable.bind(this),handle:F.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}},V={lastScrollTime:c.now(),event:-1<r.navigator.userAgent.indexOf("firefox")?"DOMMouseScroll":function(){var t="onwheel",e=t in i;if(!e){var n=i.createElement("div");n.setAttribute(t,"return;"),e="function"==typeof n[t]}return!e&&i.implementation&&i.implementation.hasFeature&&!0!==i.implementation.hasFeature("","")&&(e=i.implementation.hasFeature("Events.wheel","3.0")),e}()?"wheel":"mousewheel",normalize:function(t){var e=0,n=0,i=0,r=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),i=10*e,r=10*n,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||r)&&t.deltaMode&&(1===t.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!e&&(e=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:e,spinY:n,pixelX:i,pixelY:r}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(t){var e=t,n=this,i=n.params.mousewheel;if(!n.mouseEntered&&!i.releaseOnEdges)return!0;e.originalEvent&&(e=e.originalEvent);var a=0,o=n.rtlTranslate?-1:1,s=V.normalize(e);if(i.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(s.pixelX)>Math.abs(s.pixelY)))return!0;a=s.pixelX*o}else{if(!(Math.abs(s.pixelY)>Math.abs(s.pixelX)))return!0;a=s.pixelY}else a=Math.abs(s.pixelX)>Math.abs(s.pixelY)?-s.pixelX*o:-s.pixelY;if(0===a)return!0;if(i.invert&&(a=-a),n.params.freeMode){n.params.loop&&n.loopFix();var l=n.getTranslate()+a*i.sensitivity,u=n.isBeginning,p=n.isEnd;if(l>=n.minTranslate()&&(l=n.minTranslate()),l<=n.maxTranslate()&&(l=n.maxTranslate()),n.setTransition(0),n.setTranslate(l),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!u&&n.isBeginning||!p&&n.isEnd)&&n.updateSlidesClasses(),n.params.freeModeSticky&&(clearTimeout(n.mousewheel.timeout),n.mousewheel.timeout=c.nextTick(function(){n.slideToClosest()},300)),n.emit("scroll",e),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),l===n.minTranslate()||l===n.maxTranslate())return!0}else{if(60<c.now()-n.mousewheel.lastScrollTime)if(a<0)if(n.isEnd&&!n.params.loop||n.animating){if(i.releaseOnEdges)return!0}else n.slideNext(),n.emit("scroll",e);else if(n.isBeginning&&!n.params.loop||n.animating){if(i.releaseOnEdges)return!0}else n.slidePrev(),n.emit("scroll",e);n.mousewheel.lastScrollTime=(new r.Date).getTime()}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},enable:function(){var e=this;if(!V.event)return!1;if(e.mousewheel.enabled)return!1;var n=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(n=t(e.params.mousewheel.eventsTarged)),n.on("mouseenter",e.mousewheel.handleMouseEnter),n.on("mouseleave",e.mousewheel.handleMouseLeave),n.on(V.event,e.mousewheel.handle),e.mousewheel.enabled=!0},disable:function(){var e=this;if(!V.event)return!1;if(!e.mousewheel.enabled)return!1;var n=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(n=t(e.params.mousewheel.eventsTarged)),n.off(V.event,e.mousewheel.handle),!(e.mousewheel.enabled=!1)}},j={update:function(){var t=this,e=t.params.navigation;if(!t.params.loop){var n=t.navigation,i=n.$nextEl,r=n.$prevEl;r&&0<r.length&&(t.isBeginning?r.addClass(e.disabledClass):r.removeClass(e.disabledClass),r[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](e.lockClass)),i&&0<i.length&&(t.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](e.lockClass))}},init:function(){var e,n,i=this,r=i.params.navigation;(r.nextEl||r.prevEl)&&(r.nextEl&&(e=t(r.nextEl),i.params.uniqueNavElements&&"string"==typeof r.nextEl&&1<e.length&&1===i.$el.find(r.nextEl).length&&(e=i.$el.find(r.nextEl))),r.prevEl&&(n=t(r.prevEl),i.params.uniqueNavElements&&"string"==typeof r.prevEl&&1<n.length&&1===i.$el.find(r.prevEl).length&&(n=i.$el.find(r.prevEl))),e&&0<e.length&&e.on("click",function(t){t.preventDefault(),i.isEnd&&!i.params.loop||i.slideNext()}),n&&0<n.length&&n.on("click",function(t){t.preventDefault(),i.isBeginning&&!i.params.loop||i.slidePrev()}),c.extend(i.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:n,prevEl:n&&n[0]}))},destroy:function(){var t=this.navigation,e=t.$nextEl,n=t.$prevEl;e&&e.length&&(e.off("click"),e.removeClass(this.params.navigation.disabledClass)),n&&n.length&&(n.off("click"),n.removeClass(this.params.navigation.disabledClass))}},U={update:function(){var e=this,n=e.rtl,i=e.params.pagination;if(i.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,o=e.pagination.$el,s=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>a-1-2*e.loopedSlides&&(r-=a-2*e.loopedSlides),s-1<r&&(r-=s),r<0&&"bullets"!==e.params.paginationType&&(r=s+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===i.type&&e.pagination.bullets&&0<e.pagination.bullets.length){var l,u,c,p=e.pagination.bullets;if(i.dynamicBullets&&(e.pagination.bulletSize=p.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),o.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(i.dynamicMainBullets+4)+"px"),1<i.dynamicMainBullets&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>i.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=i.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),l=r-e.pagination.dynamicBulletIndex,c=((u=l+(Math.min(p.length,i.dynamicMainBullets)-1))+l)/2),p.removeClass(i.bulletActiveClass+" "+i.bulletActiveClass+"-next "+i.bulletActiveClass+"-next-next "+i.bulletActiveClass+"-prev "+i.bulletActiveClass+"-prev-prev "+i.bulletActiveClass+"-main"),1<o.length)p.each(function(e,n){var a=t(n),o=a.index();o===r&&a.addClass(i.bulletActiveClass),i.dynamicBullets&&(l<=o&&o<=u&&a.addClass(i.bulletActiveClass+"-main"),o===l&&a.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),o===u&&a.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next"))});else if(p.eq(r).addClass(i.bulletActiveClass),i.dynamicBullets){for(var h=p.eq(l),d=p.eq(u),f=l;f<=u;f+=1)p.eq(f).addClass(i.bulletActiveClass+"-main");h.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),d.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")}if(i.dynamicBullets){var m=Math.min(p.length,i.dynamicMainBullets+4),g=(e.pagination.bulletSize*m-e.pagination.bulletSize)/2-c*e.pagination.bulletSize,v=n?"right":"left";p.css(e.isHorizontal()?v:"top",g+"px")}}if("fraction"===i.type&&(o.find("."+i.currentClass).text(i.formatFractionCurrent(r+1)),o.find("."+i.totalClass).text(i.formatFractionTotal(s))),"progressbar"===i.type){var y;y=i.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var _=(r+1)/s,x=1,b=1;"horizontal"===y?x=_:b=_,o.find("."+i.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+x+") scaleY("+b+")").transition(e.params.speed)}"custom"===i.type&&i.renderCustom?(o.html(i.renderCustom(e,r+1,s)),e.emit("paginationRender",e,o[0])):e.emit("paginationUpdate",e,o[0]),o[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](i.lockClass)}},render:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,i=t.pagination.$el,r="";if("bullets"===e.type){for(var a=t.params.loop?Math.ceil((n-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length,o=0;o<a;o+=1)e.renderBullet?r+=e.renderBullet.call(t,o,e.bulletClass):r+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(r),t.pagination.bullets=i.find("."+e.bulletClass)}"fraction"===e.type&&(r=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(r)),"progressbar"===e.type&&(r=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(r)),"custom"!==e.type&&t.emit("paginationRender",t.pagination.$el[0])}},init:function(){var e=this,n=e.params.pagination;if(n.el){var i=t(n.el);0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof n.el&&1<i.length&&1===e.$el.find(n.el).length&&(i=e.$el.find(n.el)),"bullets"===n.type&&n.clickable&&i.addClass(n.clickableClass),i.addClass(n.modifierClass+n.type),"bullets"===n.type&&n.dynamicBullets&&(i.addClass(""+n.modifierClass+n.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,n.dynamicMainBullets<1&&(n.dynamicMainBullets=1)),"progressbar"===n.type&&n.progressbarOpposite&&i.addClass(n.progressbarOppositeClass),n.clickable&&i.on("click","."+n.bulletClass,function(n){n.preventDefault();var i=t(this).index()*e.params.slidesPerGroup;e.params.loop&&(i+=e.loopedSlides),e.slideTo(i)}),c.extend(e.pagination,{$el:i,el:i[0]}))}},destroy:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n=t.pagination.$el;n.removeClass(e.hiddenClass),n.removeClass(e.modifierClass+e.type),t.pagination.bullets&&t.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&n.off("click","."+e.bulletClass)}}},q={setTranslate:function(){var t=this;if(t.params.scrollbar.el&&t.scrollbar.el){var e=t.scrollbar,n=t.rtlTranslate,i=t.progress,r=e.dragSize,a=e.trackSize,o=e.$dragEl,s=e.$el,l=t.params.scrollbar,u=r,c=(a-r)*i;n?0<(c=-c)?(u=r-c,c=0):a<-c+r&&(u=a+c):c<0?(u=r+c,c=0):a<c+r&&(u=a-c),t.isHorizontal()?(p.transforms3d?o.transform("translate3d("+c+"px, 0, 0)"):o.transform("translateX("+c+"px)"),o[0].style.width=u+"px"):(p.transforms3d?o.transform("translate3d(0px, "+c+"px, 0)"):o.transform("translateY("+c+"px)"),o[0].style.height=u+"px"),l.hide&&(clearTimeout(t.scrollbar.timeout),s[0].style.opacity=1,t.scrollbar.timeout=setTimeout(function(){s[0].style.opacity=0,s.transition(400)},1e3))}},setTransition:function(t){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(t)},updateSize:function(){var t=this;if(t.params.scrollbar.el&&t.scrollbar.el){var e=t.scrollbar,n=e.$dragEl,i=e.$el;n[0].style.width="",n[0].style.height="";var r,a=t.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,o=t.size/t.virtualSize,s=o*(a/t.size);r="auto"===t.params.scrollbar.dragSize?a*o:parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?n[0].style.width=r+"px":n[0].style.height=r+"px",i[0].style.display=1<=o?"none":"",t.params.scrollbarHide&&(i[0].style.opacity=0),c.extend(e,{trackSize:a,divider:o,moveDivider:s,dragSize:r}),e.$el[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](t.params.scrollbar.lockClass)}},setDragPosition:function(t){var e,n=this,i=n.scrollbar,r=n.rtlTranslate,a=i.$el,o=i.dragSize,s=i.trackSize;e=((n.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].pageX:t.pageX||t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].pageY:t.pageY||t.clientY)-a.offset()[n.isHorizontal()?"left":"top"]-o/2)/(s-o),e=Math.max(Math.min(e,1),0),r&&(e=1-e);var l=n.minTranslate()+(n.maxTranslate()-n.minTranslate())*e;n.updateProgress(l),n.setTranslate(l),n.updateActiveIndex(),n.updateSlidesClasses()},onDragStart:function(t){var e=this,n=e.params.scrollbar,i=e.scrollbar,r=e.$wrapperEl,a=i.$el,o=i.$dragEl;e.scrollbar.isTouched=!0,t.preventDefault(),t.stopPropagation(),r.transition(100),o.transition(100),i.setDragPosition(t),clearTimeout(e.scrollbar.dragTimeout),a.transition(0),n.hide&&a.css("opacity",1),e.emit("scrollbarDragStart",t)},onDragMove:function(t){var e=this.scrollbar,n=this.$wrapperEl,i=e.$el,r=e.$dragEl;this.scrollbar.isTouched&&(t.preventDefault?t.preventDefault():t.returnValue=!1,e.setDragPosition(t),n.transition(0),i.transition(0),r.transition(0),this.emit("scrollbarDragMove",t))},onDragEnd:function(t){var e=this,n=e.params.scrollbar,i=e.scrollbar.$el;e.scrollbar.isTouched&&(e.scrollbar.isTouched=!1,n.hide&&(clearTimeout(e.scrollbar.dragTimeout),e.scrollbar.dragTimeout=c.nextTick(function(){i.css("opacity",0),i.transition(400)},1e3)),e.emit("scrollbarDragEnd",t),n.snapOnRelease&&e.slideToClosest())},enableDraggable:function(){var t=this;if(t.params.scrollbar.el){var e=t.scrollbar,n=t.touchEvents,r=t.touchEventsDesktop,a=t.params,o=e.$el[0],s=!(!p.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},l=!(!p.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};p.touch||!p.pointerEvents&&!p.prefixedPointerEvents?(p.touch&&(o.addEventListener(n.start,t.scrollbar.onDragStart,s),o.addEventListener(n.move,t.scrollbar.onDragMove,s),o.addEventListener(n.end,t.scrollbar.onDragEnd,l)),(a.simulateTouch&&!w.ios&&!w.android||a.simulateTouch&&!p.touch&&w.ios)&&(o.addEventListener("mousedown",t.scrollbar.onDragStart,s),i.addEventListener("mousemove",t.scrollbar.onDragMove,s),i.addEventListener("mouseup",t.scrollbar.onDragEnd,l))):(o.addEventListener(r.start,t.scrollbar.onDragStart,s),i.addEventListener(r.move,t.scrollbar.onDragMove,s),i.addEventListener(r.end,t.scrollbar.onDragEnd,l))}},disableDraggable:function(){var t=this;if(t.params.scrollbar.el){var e=t.scrollbar,n=t.touchEvents,r=t.touchEventsDesktop,a=t.params,o=e.$el[0],s=!(!p.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},l=!(!p.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};p.touch||!p.pointerEvents&&!p.prefixedPointerEvents?(p.touch&&(o.removeEventListener(n.start,t.scrollbar.onDragStart,s),o.removeEventListener(n.move,t.scrollbar.onDragMove,s),o.removeEventListener(n.end,t.scrollbar.onDragEnd,l)),(a.simulateTouch&&!w.ios&&!w.android||a.simulateTouch&&!p.touch&&w.ios)&&(o.removeEventListener("mousedown",t.scrollbar.onDragStart,s),i.removeEventListener("mousemove",t.scrollbar.onDragMove,s),i.removeEventListener("mouseup",t.scrollbar.onDragEnd,l))):(o.removeEventListener(r.start,t.scrollbar.onDragStart,s),i.removeEventListener(r.move,t.scrollbar.onDragMove,s),i.removeEventListener(r.end,t.scrollbar.onDragEnd,l))}},init:function(){var e=this;if(e.params.scrollbar.el){var n=e.scrollbar,i=e.$el,r=e.params.scrollbar,a=t(r.el);e.params.uniqueNavElements&&"string"==typeof r.el&&1<a.length&&1===i.find(r.el).length&&(a=i.find(r.el));var o=a.find("."+e.params.scrollbar.dragClass);0===o.length&&(o=t('<div class="'+e.params.scrollbar.dragClass+'"></div>'),a.append(o)),c.extend(n,{$el:a,el:a[0],$dragEl:o,dragEl:o[0]}),r.draggable&&n.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},$={setTransform:function(e,n){var i=this.rtl,r=t(e),a=i?-1:1,o=r.attr("data-swiper-parallax")||"0",s=r.attr("data-swiper-parallax-x"),l=r.attr("data-swiper-parallax-y"),u=r.attr("data-swiper-parallax-scale"),c=r.attr("data-swiper-parallax-opacity");if(s||l?(s=s||"0",l=l||"0"):this.isHorizontal()?(s=o,l="0"):(l=o,s="0"),s=0<=s.indexOf("%")?parseInt(s,10)*n*a+"%":s*n*a+"px",l=0<=l.indexOf("%")?parseInt(l,10)*n+"%":l*n+"px",null!=c){var p=c-(c-1)*(1-Math.abs(n));r[0].style.opacity=p}if(null==u)r.transform("translate3d("+s+", "+l+", 0px)");else{var h=u-(u-1)*(1-Math.abs(n));r.transform("translate3d("+s+", "+l+", 0px) scale("+h+")")}},setTranslate:function(){var e=this,n=e.$el,i=e.slides,r=e.progress,a=e.snapGrid;n.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(t,n){e.parallax.setTransform(n,r)}),i.each(function(n,i){var o=i.progress;1<e.params.slidesPerGroup&&"auto"!==e.params.slidesPerView&&(o+=Math.ceil(n/2)-r*(a.length-1)),o=Math.min(Math.max(o,-1),1),t(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(t,n){e.parallax.setTransform(n,o)})})},setTransition:function(e){void 0===e&&(e=this.params.speed),this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(n,i){var r=t(i),a=parseInt(r.attr("data-swiper-parallax-duration"),10)||e;0===e&&(a=0),r.transition(a)})}},G={getDistanceBetweenTouches:function(t){if(t.targetTouches.length<2)return 1;var e=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,i=t.targetTouches[1].pageX,r=t.targetTouches[1].pageY;return Math.sqrt(Math.pow(i-e,2)+Math.pow(r-n,2))},onGestureStart:function(e){var n=this,i=n.params.zoom,r=n.zoom,a=r.gesture;if(r.fakeGestureTouched=!1,r.fakeGestureMoved=!1,!p.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;r.fakeGestureTouched=!0,a.scaleStart=G.getDistanceBetweenTouches(e)}a.$slideEl&&a.$slideEl.length||(a.$slideEl=t(e.target).closest(".swiper-slide"),0===a.$slideEl.length&&(a.$slideEl=n.slides.eq(n.activeIndex)),a.$imageEl=a.$slideEl.find("img, svg, canvas"),a.$imageWrapEl=a.$imageEl.parent("."+i.containerClass),a.maxRatio=a.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==a.$imageWrapEl.length)?(a.$imageEl.transition(0),n.zoom.isScaling=!0):a.$imageEl=void 0},onGestureChange:function(t){var e=this.params.zoom,n=this.zoom,i=n.gesture;if(!p.gestures){if("touchmove"!==t.type||"touchmove"===t.type&&t.targetTouches.length<2)return;n.fakeGestureMoved=!0,i.scaleMove=G.getDistanceBetweenTouches(t)}i.$imageEl&&0!==i.$imageEl.length&&(p.gestures?this.zoom.scale=t.scale*n.currentScale:n.scale=i.scaleMove/i.scaleStart*n.currentScale,n.scale>i.maxRatio&&(n.scale=i.maxRatio-1+Math.pow(n.scale-i.maxRatio+1,.5)),n.scale<e.minRatio&&(n.scale=e.minRatio+1-Math.pow(e.minRatio-n.scale+1,.5)),i.$imageEl.transform("translate3d(0,0,0) scale("+n.scale+")"))},onGestureEnd:function(t){var e=this.params.zoom,n=this.zoom,i=n.gesture;if(!p.gestures){if(!n.fakeGestureTouched||!n.fakeGestureMoved)return;if("touchend"!==t.type||"touchend"===t.type&&t.changedTouches.length<2&&!w.android)return;n.fakeGestureTouched=!1,n.fakeGestureMoved=!1}i.$imageEl&&0!==i.$imageEl.length&&(n.scale=Math.max(Math.min(n.scale,i.maxRatio),e.minRatio),i.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+n.scale+")"),n.currentScale=n.scale,n.isScaling=!1,1===n.scale&&(i.$slideEl=void 0))},onTouchStart:function(t){var e=this.zoom,n=e.gesture,i=e.image;n.$imageEl&&0!==n.$imageEl.length&&(i.isTouched||(w.android&&t.preventDefault(),i.isTouched=!0,i.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,i.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(t){var e=this,n=e.zoom,i=n.gesture,r=n.image,a=n.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(e.allowClick=!1,r.isTouched&&i.$slideEl)){r.isMoved||(r.width=i.$imageEl[0].offsetWidth,r.height=i.$imageEl[0].offsetHeight,r.startX=c.getTranslate(i.$imageWrapEl[0],"x")||0,r.startY=c.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),e.rtl&&(r.startX=-r.startX,r.startY=-r.startY));var o=r.width*n.scale,s=r.height*n.scale;if(!(o<i.slideWidth&&s<i.slideHeight)){if(r.minX=Math.min(i.slideWidth/2-o/2,0),r.maxX=-r.minX,r.minY=Math.min(i.slideHeight/2-s/2,0),r.maxY=-r.minY,r.touchesCurrent.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,r.touchesCurrent.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!r.isMoved&&!n.isScaling){if(e.isHorizontal()&&(Math.floor(r.minX)===Math.floor(r.startX)&&r.touchesCurrent.x<r.touchesStart.x||Math.floor(r.maxX)===Math.floor(r.startX)&&r.touchesCurrent.x>r.touchesStart.x))return void(r.isTouched=!1);if(!e.isHorizontal()&&(Math.floor(r.minY)===Math.floor(r.startY)&&r.touchesCurrent.y<r.touchesStart.y||Math.floor(r.maxY)===Math.floor(r.startY)&&r.touchesCurrent.y>r.touchesStart.y))return void(r.isTouched=!1)}t.preventDefault(),t.stopPropagation(),r.isMoved=!0,r.currentX=r.touchesCurrent.x-r.touchesStart.x+r.startX,r.currentY=r.touchesCurrent.y-r.touchesStart.y+r.startY,r.currentX<r.minX&&(r.currentX=r.minX+1-Math.pow(r.minX-r.currentX+1,.8)),r.currentX>r.maxX&&(r.currentX=r.maxX-1+Math.pow(r.currentX-r.maxX+1,.8)),r.currentY<r.minY&&(r.currentY=r.minY+1-Math.pow(r.minY-r.currentY+1,.8)),r.currentY>r.maxY&&(r.currentY=r.maxY-1+Math.pow(r.currentY-r.maxY+1,.8)),a.prevPositionX||(a.prevPositionX=r.touchesCurrent.x),a.prevPositionY||(a.prevPositionY=r.touchesCurrent.y),a.prevTime||(a.prevTime=Date.now()),a.x=(r.touchesCurrent.x-a.prevPositionX)/(Date.now()-a.prevTime)/2,a.y=(r.touchesCurrent.y-a.prevPositionY)/(Date.now()-a.prevTime)/2,Math.abs(r.touchesCurrent.x-a.prevPositionX)<2&&(a.x=0),Math.abs(r.touchesCurrent.y-a.prevPositionY)<2&&(a.y=0),a.prevPositionX=r.touchesCurrent.x,a.prevPositionY=r.touchesCurrent.y,a.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+r.currentX+"px, "+r.currentY+"px,0)")}}},onTouchEnd:function(){var t=this.zoom,e=t.gesture,n=t.image,i=t.velocity;if(e.$imageEl&&0!==e.$imageEl.length){if(!n.isTouched||!n.isMoved)return n.isTouched=!1,void(n.isMoved=!1);n.isTouched=!1,n.isMoved=!1;var r=300,a=300,o=i.x*r,s=n.currentX+o,l=i.y*a,u=n.currentY+l;0!==i.x&&(r=Math.abs((s-n.currentX)/i.x)),0!==i.y&&(a=Math.abs((u-n.currentY)/i.y));var c=Math.max(r,a);n.currentX=s,n.currentY=u;var p=n.width*t.scale,h=n.height*t.scale;n.minX=Math.min(e.slideWidth/2-p/2,0),n.maxX=-n.minX,n.minY=Math.min(e.slideHeight/2-h/2,0),n.maxY=-n.minY,n.currentX=Math.max(Math.min(n.currentX,n.maxX),n.minX),n.currentY=Math.max(Math.min(n.currentY,n.maxY),n.minY),e.$imageWrapEl.transition(c).transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}},onTransitionEnd:function(){var t=this.zoom,e=t.gesture;e.$slideEl&&this.previousIndex!==this.activeIndex&&(e.$imageEl.transform("translate3d(0,0,0) scale(1)"),e.$imageWrapEl.transform("translate3d(0,0,0)"),e.$slideEl=void 0,e.$imageEl=void 0,e.$imageWrapEl=void 0,t.scale=1,t.currentScale=1)},toggle:function(t){var e=this.zoom;e.scale&&1!==e.scale?e.out():e.in(t)},in:function(e){var n,i,r,a,o,s,l,u,c,p,h,d,f,m,g,v,y=this,_=y.zoom,x=y.params.zoom,b=_.gesture,w=_.image;b.$slideEl||(b.$slideEl=y.clickedSlide?t(y.clickedSlide):y.slides.eq(y.activeIndex),b.$imageEl=b.$slideEl.find("img, svg, canvas"),b.$imageWrapEl=b.$imageEl.parent("."+x.containerClass)),b.$imageEl&&0!==b.$imageEl.length&&(b.$slideEl.addClass(""+x.zoomedSlideClass),void 0===w.touchesStart.x&&e?(n="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,i="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(n=w.touchesStart.x,i=w.touchesStart.y),_.scale=b.$imageWrapEl.attr("data-swiper-zoom")||x.maxRatio,_.currentScale=b.$imageWrapEl.attr("data-swiper-zoom")||x.maxRatio,e?(g=b.$slideEl[0].offsetWidth,v=b.$slideEl[0].offsetHeight,r=b.$slideEl.offset().left+g/2-n,a=b.$slideEl.offset().top+v/2-i,l=b.$imageEl[0].offsetWidth,u=b.$imageEl[0].offsetHeight,c=l*_.scale,p=u*_.scale,f=-(h=Math.min(g/2-c/2,0)),m=-(d=Math.min(v/2-p/2,0)),(o=r*_.scale)<h&&(o=h),f<o&&(o=f),(s=a*_.scale)<d&&(s=d),m<s&&(s=m)):s=o=0,b.$imageWrapEl.transition(300).transform("translate3d("+o+"px, "+s+"px,0)"),b.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+_.scale+")"))},out:function(){var e=this,n=e.zoom,i=e.params.zoom,r=n.gesture;r.$slideEl||(r.$slideEl=e.clickedSlide?t(e.clickedSlide):e.slides.eq(e.activeIndex),r.$imageEl=r.$slideEl.find("img, svg, canvas"),r.$imageWrapEl=r.$imageEl.parent("."+i.containerClass)),r.$imageEl&&0!==r.$imageEl.length&&(n.scale=1,n.currentScale=1,r.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),r.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),r.$slideEl.removeClass(""+i.zoomedSlideClass),r.$slideEl=void 0)},enable:function(){var t=this,e=t.zoom;if(!e.enabled){e.enabled=!0;var n=!("touchstart"!==t.touchEvents.start||!p.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1};p.gestures?(t.$wrapperEl.on("gesturestart",".swiper-slide",e.onGestureStart,n),t.$wrapperEl.on("gesturechange",".swiper-slide",e.onGestureChange,n),t.$wrapperEl.on("gestureend",".swiper-slide",e.onGestureEnd,n)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.on(t.touchEvents.start,".swiper-slide",e.onGestureStart,n),t.$wrapperEl.on(t.touchEvents.move,".swiper-slide",e.onGestureChange,n),t.$wrapperEl.on(t.touchEvents.end,".swiper-slide",e.onGestureEnd,n)),t.$wrapperEl.on(t.touchEvents.move,"."+t.params.zoom.containerClass,e.onTouchMove)}},disable:function(){var t=this,e=t.zoom;if(e.enabled){t.zoom.enabled=!1;var n=!("touchstart"!==t.touchEvents.start||!p.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1};p.gestures?(t.$wrapperEl.off("gesturestart",".swiper-slide",e.onGestureStart,n),t.$wrapperEl.off("gesturechange",".swiper-slide",e.onGestureChange,n),t.$wrapperEl.off("gestureend",".swiper-slide",e.onGestureEnd,n)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.off(t.touchEvents.start,".swiper-slide",e.onGestureStart,n),t.$wrapperEl.off(t.touchEvents.move,".swiper-slide",e.onGestureChange,n),t.$wrapperEl.off(t.touchEvents.end,".swiper-slide",e.onGestureEnd,n)),t.$wrapperEl.off(t.touchEvents.move,"."+t.params.zoom.containerClass,e.onTouchMove)}}},H={loadInSlide:function(e,n){void 0===n&&(n=!0);var i=this,r=i.params.lazy;if(void 0!==e&&0!==i.slides.length){var a=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):i.slides.eq(e),o=a.find("."+r.elementClass+":not(."+r.loadedClass+"):not(."+r.loadingClass+")");!a.hasClass(r.elementClass)||a.hasClass(r.loadedClass)||a.hasClass(r.loadingClass)||(o=o.add(a[0])),0!==o.length&&o.each(function(e,o){var s=t(o);s.addClass(r.loadingClass);var l=s.attr("data-background"),u=s.attr("data-src"),c=s.attr("data-srcset"),p=s.attr("data-sizes");i.loadImage(s[0],u||l,c,p,!1,function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(l?(s.css("background-image",'url("'+l+'")'),s.removeAttr("data-background")):(c&&(s.attr("srcset",c),s.removeAttr("data-srcset")),p&&(s.attr("sizes",p),s.removeAttr("data-sizes")),u&&(s.attr("src",u),s.removeAttr("data-src"))),s.addClass(r.loadedClass).removeClass(r.loadingClass),a.find("."+r.preloaderClass).remove(),i.params.loop&&n){var t=a.attr("data-swiper-slide-index");if(a.hasClass(i.params.slideDuplicateClass)){var e=i.$wrapperEl.children('[data-swiper-slide-index="'+t+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(e.index(),!1)}else{var o=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+t+'"]');i.lazy.loadInSlide(o.index(),!1)}}i.emit("lazyImageReady",a[0],s[0])}}),i.emit("lazyImageLoad",a[0],s[0])})}},load:function(){function e(t){if(l){if(r.children("."+a.slideClass+'[data-swiper-slide-index="'+t+'"]').length)return!0}else if(o[t])return!0;return!1}function n(e){return l?t(e).attr("data-swiper-slide-index"):t(e).index()}var i=this,r=i.$wrapperEl,a=i.params,o=i.slides,s=i.activeIndex,l=i.virtual&&a.virtual.enabled,u=a.lazy,c=a.slidesPerView;if("auto"===c&&(c=0),i.lazy.initialImageLoaded||(i.lazy.initialImageLoaded=!0),i.params.watchSlidesVisibility)r.children("."+a.slideVisibleClass).each(function(e,n){var r=l?t(n).attr("data-swiper-slide-index"):t(n).index();i.lazy.loadInSlide(r)});else if(1<c)for(var p=s;p<s+c;p+=1)e(p)&&i.lazy.loadInSlide(p);else i.lazy.loadInSlide(s);if(u.loadPrevNext)if(1<c||u.loadPrevNextAmount&&1<u.loadPrevNextAmount){for(var h=u.loadPrevNextAmount,d=c,f=Math.min(s+d+Math.max(h,d),o.length),m=Math.max(s-Math.max(d,h),0),g=s+c;g<f;g+=1)e(g)&&i.lazy.loadInSlide(g);for(var v=m;v<s;v+=1)e(v)&&i.lazy.loadInSlide(v)}else{var y=r.children("."+a.slideNextClass);0<y.length&&i.lazy.loadInSlide(n(y));var _=r.children("."+a.slidePrevClass);0<_.length&&i.lazy.loadInSlide(n(_))}}},X={LinearSpline:function(t,e){var n,i,r,a,o,s=function(t,e){for(i=-1,n=t.length;1<n-i;)t[r=n+i>>1]<=e?i=r:n=r;return n};return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(o=s(this.x,t),a=o-1,(t-this.x[a])*(this.y[o]-this.y[a])/(this.x[o]-this.x[a])+this.y[a]):0},this},getInterpolateFunction:function(t){var e=this;e.controller.spline||(e.controller.spline=e.params.loop?new X.LinearSpline(e.slidesGrid,t.slidesGrid):new X.LinearSpline(e.snapGrid,t.snapGrid))},setTranslate:function(t,e){function n(t){var e=a.rtlTranslate?-a.translate:a.translate;"slide"===a.params.controller.by&&(a.controller.getInterpolateFunction(t),r=-a.controller.spline.interpolate(-e)),r&&"container"!==a.params.controller.by||(i=(t.maxTranslate()-t.minTranslate())/(a.maxTranslate()-a.minTranslate()),r=(e-a.minTranslate())*i+t.minTranslate()),a.params.controller.inverse&&(r=t.maxTranslate()-r),t.updateProgress(r),t.setTranslate(r,a),t.updateActiveIndex(),t.updateSlidesClasses()}var i,r,a=this,o=a.controller.control;if(Array.isArray(o))for(var s=0;s<o.length;s+=1)o[s]!==e&&o[s]instanceof A&&n(o[s]);else o instanceof A&&e!==o&&n(o)},setTransition:function(t,e){function n(e){e.setTransition(t,r),0!==t&&(e.transitionStart(),e.params.autoHeight&&c.nextTick(function(){e.updateAutoHeight()}),e.$wrapperEl.transitionEnd(function(){a&&(e.params.loop&&"slide"===r.params.controller.by&&e.loopFix(),e.transitionEnd())}))}var i,r=this,a=r.controller.control;if(Array.isArray(a))for(i=0;i<a.length;i+=1)a[i]!==e&&a[i]instanceof A&&n(a[i]);else a instanceof A&&e!==a&&n(a)}},W={makeElFocusable:function(t){return t.attr("tabIndex","0"),t},addElRole:function(t,e){return t.attr("role",e),t},addElLabel:function(t,e){return t.attr("aria-label",e),t},disableEl:function(t){return t.attr("aria-disabled",!0),t},enableEl:function(t){return t.attr("aria-disabled",!1),t},onEnterKey:function(e){var n=this,i=n.params.a11y;if(13===e.keyCode){var r=t(e.target);n.navigation&&n.navigation.$nextEl&&r.is(n.navigation.$nextEl)&&(n.isEnd&&!n.params.loop||n.slideNext(),n.isEnd?n.a11y.notify(i.lastSlideMessage):n.a11y.notify(i.nextSlideMessage)),n.navigation&&n.navigation.$prevEl&&r.is(n.navigation.$prevEl)&&(n.isBeginning&&!n.params.loop||n.slidePrev(),n.isBeginning?n.a11y.notify(i.firstSlideMessage):n.a11y.notify(i.prevSlideMessage)),n.pagination&&r.is("."+n.params.pagination.bulletClass)&&r[0].click()}},notify:function(t){var e=this.a11y.liveRegion;0!==e.length&&(e.html(""),e.html(t))},updateNavigation:function(){var t=this;if(!t.params.loop){var e=t.navigation,n=e.$nextEl,i=e.$prevEl;i&&0<i.length&&(t.isBeginning?t.a11y.disableEl(i):t.a11y.enableEl(i)),n&&0<n.length&&(t.isEnd?t.a11y.disableEl(n):t.a11y.enableEl(n))}},updatePagination:function(){var e=this,n=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each(function(i,r){var a=t(r);e.a11y.makeElFocusable(a),e.a11y.addElRole(a,"button"),e.a11y.addElLabel(a,n.paginationBulletMessage.replace(/{{index}}/,a.index()+1))})},init:function(){var t=this;t.$el.append(t.a11y.liveRegion);var e,n,i=t.params.a11y;t.navigation&&t.navigation.$nextEl&&(e=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(n=t.navigation.$prevEl),e&&(t.a11y.makeElFocusable(e),t.a11y.addElRole(e,"button"),t.a11y.addElLabel(e,i.nextSlideMessage),e.on("keydown",t.a11y.onEnterKey)),n&&(t.a11y.makeElFocusable(n),t.a11y.addElRole(n,"button"),t.a11y.addElLabel(n,i.prevSlideMessage),n.on("keydown",t.a11y.onEnterKey)),t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.$el.on("keydown","."+t.params.pagination.bulletClass,t.a11y.onEnterKey)},destroy:function(){var t,e,n=this;n.a11y.liveRegion&&0<n.a11y.liveRegion.length&&n.a11y.liveRegion.remove(),n.navigation&&n.navigation.$nextEl&&(t=n.navigation.$nextEl),n.navigation&&n.navigation.$prevEl&&(e=n.navigation.$prevEl),t&&t.off("keydown",n.a11y.onEnterKey),e&&e.off("keydown",n.a11y.onEnterKey),n.pagination&&n.params.pagination.clickable&&n.pagination.bullets&&n.pagination.bullets.length&&n.pagination.$el.off("keydown","."+n.params.pagination.bulletClass,n.a11y.onEnterKey)}},Z={init:function(){var t=this;if(t.params.history){if(!r.history||!r.history.pushState)return t.params.history.enabled=!1,void(t.params.hashNavigation.enabled=!0);var e=t.history;e.initialized=!0,e.paths=Z.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,t.params.runCallbacksOnInit),t.params.history.replaceState||r.addEventListener("popstate",t.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||r.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=Z.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var t=r.location.pathname.slice(1).split("/").filter(function(t){return""!==t}),e=t.length;return{key:t[e-2],value:t[e-1]}},setHistory:function(t,e){if(this.history.initialized&&this.params.history.enabled){var n=this.slides.eq(e),i=Z.slugify(n.attr("data-history"));r.location.pathname.includes(t)||(i=t+"/"+i);var a=r.history.state;a&&a.value===i||(this.params.history.replaceState?r.history.replaceState({value:i},null,i):r.history.pushState({value:i},null,i))}},slugify:function(t){return t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(t,e,n){var i=this;if(e)for(var r=0,a=i.slides.length;r<a;r+=1){var o=i.slides.eq(r);if(Z.slugify(o.attr("data-history"))===e&&!o.hasClass(i.params.slideDuplicateClass)){var s=o.index();i.slideTo(s,t,n)}}else i.slideTo(0,t,n)}},Y={onHashCange:function(){var t=this,e=i.location.hash.replace("#","");e!==t.slides.eq(t.activeIndex).attr("data-hash")&&t.slideTo(t.$wrapperEl.children("."+t.params.slideClass+'[data-hash="'+e+'"]').index())},setHash:function(){var t=this;if(t.hashNavigation.initialized&&t.params.hashNavigation.enabled)if(t.params.hashNavigation.replaceState&&r.history&&r.history.replaceState)r.history.replaceState(null,null,"#"+t.slides.eq(t.activeIndex).attr("data-hash")||"");else{var e=t.slides.eq(t.activeIndex),n=e.attr("data-hash")||e.attr("data-history");i.location.hash=n||""}},init:function(){var e=this;if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var n=i.location.hash.replace("#","");if(n)for(var a=0,o=e.slides.length;a<o;a+=1){var s=e.slides.eq(a);if((s.attr("data-hash")||s.attr("data-history"))===n&&!s.hasClass(e.params.slideDuplicateClass)){var l=s.index();e.slideTo(l,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&t(r).on("hashchange",e.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&t(r).off("hashchange",this.hashNavigation.onHashCange)}},K={run:function(){var t=this,e=t.slides.eq(t.activeIndex),n=t.params.autoplay.delay;e.attr("data-swiper-autoplay")&&(n=e.attr("data-swiper-autoplay")||t.params.autoplay.delay),t.autoplay.timeout=c.nextTick(function(){t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(t.slideTo(t.slides.length-1,t.params.speed,!0,!0),t.emit("autoplay")):(t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.params.loop?(t.loopFix(),t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(t.slideTo(0,t.params.speed,!0,!0),t.emit("autoplay")):(t.slideNext(t.params.speed,!0,!0),t.emit("autoplay"))},n)},start:function(){var t=this;return void 0===t.autoplay.timeout&&!t.autoplay.running&&(t.autoplay.running=!0,t.emit("autoplayStart"),t.autoplay.run(),!0)},stop:function(){var t=this;return!!t.autoplay.running&&void 0!==t.autoplay.timeout&&(t.autoplay.timeout&&(clearTimeout(t.autoplay.timeout),t.autoplay.timeout=void 0),t.autoplay.running=!1,t.emit("autoplayStop"),!0)},pause:function(t){var e=this;e.autoplay.running&&(e.autoplay.paused||(e.autoplay.timeout&&clearTimeout(e.autoplay.timeout),e.autoplay.paused=!0,0!==t&&e.params.autoplay.waitForTransition?(e.$wrapperEl[0].addEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].addEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd)):(e.autoplay.paused=!1,e.autoplay.run())))}},J={setTranslate:function(){for(var t=this,e=t.slides,n=0;n<e.length;n+=1){var i=t.slides.eq(n),r=-i[0].swiperSlideOffset;t.params.virtualTranslate||(r-=t.translate);var a=0;t.isHorizontal()||(a=r,r=0);var o=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:o}).transform("translate3d("+r+"px, "+a+"px, 0px)")}},setTransition:function(t){var e=this,n=e.slides,i=e.$wrapperEl;if(n.transition(t),e.params.virtualTranslate&&0!==t){var r=!1;n.transitionEnd(function(){if(!r&&e&&!e.destroyed){r=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],n=0;n<t.length;n+=1)i.trigger(t[n])}})}}},Q={setTranslate:function(){var e,n=this,i=n.$el,r=n.$wrapperEl,a=n.slides,o=n.width,s=n.height,l=n.rtlTranslate,u=n.size,c=n.params.cubeEffect,p=n.isHorizontal(),h=n.virtual&&n.params.virtual.enabled,d=0;c.shadow&&(p?(0===(e=r.find(".swiper-cube-shadow")).length&&(e=t('<div class="swiper-cube-shadow"></div>'),r.append(e)),e.css({height:o+"px"})):0===(e=i.find(".swiper-cube-shadow")).length&&(e=t('<div class="swiper-cube-shadow"></div>'),i.append(e)));for(var f=0;f<a.length;f+=1){var m=a.eq(f),g=f;h&&(g=parseInt(m.attr("data-swiper-slide-index"),10));var v=90*g,y=Math.floor(v/360);l&&(v=-v,y=Math.floor(-v/360));var _=Math.max(Math.min(m[0].progress,1),-1),x=0,b=0,w=0;g%4==0?(x=4*-y*u,w=0):(g-1)%4==0?(x=0,w=4*-y*u):(g-2)%4==0?(x=u+4*y*u,w=u):(g-3)%4==0&&(x=-u,w=3*u+4*u*y),l&&(x=-x),p||(b=x,x=0);var E="rotateX("+(p?0:-v)+"deg) rotateY("+(p?v:0)+"deg) translate3d("+x+"px, "+b+"px, "+w+"px)";if(_<=1&&-1<_&&(d=90*g+90*_,l&&(d=90*-g-90*_)),m.transform(E),c.slideShadows){var T=p?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),C=p?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===T.length&&(T=t('<div class="swiper-slide-shadow-'+(p?"left":"top")+'"></div>'),m.append(T)),0===C.length&&(C=t('<div class="swiper-slide-shadow-'+(p?"right":"bottom")+'"></div>'),m.append(C)),T.length&&(T[0].style.opacity=Math.max(-_,0)),C.length&&(C[0].style.opacity=Math.max(_,0))}}if(r.css({"-webkit-transform-origin":"50% 50% -"+u/2+"px","-moz-transform-origin":"50% 50% -"+u/2+"px","-ms-transform-origin":"50% 50% -"+u/2+"px","transform-origin":"50% 50% -"+u/2+"px"}),c.shadow)if(p)e.transform("translate3d(0px, "+(o/2+c.shadowOffset)+"px, "+-o/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var k=Math.abs(d)-90*Math.floor(Math.abs(d)/90),z=1.5-(Math.sin(2*k*Math.PI/360)/2+Math.cos(2*k*Math.PI/360)/2),A=c.shadowScale,M=c.shadowScale/z,I=c.shadowOffset;e.transform("scale3d("+A+", 1, "+M+") translate3d(0px, "+(s/2+I)+"px, "+-s/2/M+"px) rotateX(-90deg)")}var P=S.isSafari||S.isUiWebView?-u/2:0;r.transform("translate3d(0px,0,"+P+"px) rotateX("+(n.isHorizontal()?0:d)+"deg) rotateY("+(n.isHorizontal()?-d:0)+"deg)")},setTransition:function(t){var e=this.$el;this.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),this.params.cubeEffect.shadow&&!this.isHorizontal()&&e.find(".swiper-cube-shadow").transition(t)}},tt={setTranslate:function(){for(var e=this,n=e.slides,i=e.rtlTranslate,r=0;r<n.length;r+=1){var a=n.eq(r),o=a[0].progress;e.params.flipEffect.limitRotation&&(o=Math.max(Math.min(a[0].progress,1),-1));var s=-180*o,l=0,u=-a[0].swiperSlideOffset,c=0;if(e.isHorizontal()?i&&(s=-s):(c=u,l=-s,s=u=0),a[0].style.zIndex=-Math.abs(Math.round(o))+n.length,e.params.flipEffect.slideShadows){var p=e.isHorizontal()?a.find(".swiper-slide-shadow-left"):a.find(".swiper-slide-shadow-top"),h=e.isHorizontal()?a.find(".swiper-slide-shadow-right"):a.find(".swiper-slide-shadow-bottom");0===p.length&&(p=t('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),a.append(p)),0===h.length&&(h=t('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),a.append(h)),p.length&&(p[0].style.opacity=Math.max(-o,0)),h.length&&(h[0].style.opacity=Math.max(o,0))}a.transform("translate3d("+u+"px, "+c+"px, 0px) rotateX("+l+"deg) rotateY("+s+"deg)")}},setTransition:function(t){var e=this,n=e.slides,i=e.activeIndex,r=e.$wrapperEl;if(n.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.virtualTranslate&&0!==t){var a=!1;n.eq(i).transitionEnd(function(){if(!a&&e&&!e.destroyed){a=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],n=0;n<t.length;n+=1)r.trigger(t[n])}})}}},et={setTranslate:function(){for(var e=this,n=e.width,i=e.height,r=e.slides,a=e.$wrapperEl,o=e.slidesSizesGrid,s=e.params.coverflowEffect,l=e.isHorizontal(),u=e.translate,c=l?n/2-u:i/2-u,h=l?s.rotate:-s.rotate,d=s.depth,f=0,m=r.length;f<m;f+=1){var g=r.eq(f),v=o[f],y=(c-g[0].swiperSlideOffset-v/2)/v*s.modifier,_=l?h*y:0,x=l?0:h*y,b=-d*Math.abs(y),w=l?0:s.stretch*y,E=l?s.stretch*y:0;Math.abs(E)<.001&&(E=0),Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(_)<.001&&(_=0),Math.abs(x)<.001&&(x=0);var T="translate3d("+E+"px,"+w+"px,"+b+"px)  rotateX("+x+"deg) rotateY("+_+"deg)";if(g.transform(T),g[0].style.zIndex=1-Math.abs(Math.round(y)),s.slideShadows){var S=l?g.find(".swiper-slide-shadow-left"):g.find(".swiper-slide-shadow-top"),C=l?g.find(".swiper-slide-shadow-right"):g.find(".swiper-slide-shadow-bottom");0===S.length&&(S=t('<div class="swiper-slide-shadow-'+(l?"left":"top")+'"></div>'),g.append(S)),0===C.length&&(C=t('<div class="swiper-slide-shadow-'+(l?"right":"bottom")+'"></div>'),g.append(C)),S.length&&(S[0].style.opacity=0<y?y:0),C.length&&(C[0].style.opacity=0<-y?-y:0)}}(p.pointerEvents||p.prefixedPointerEvents)&&(a[0].style.perspectiveOrigin=c+"px 50%")},setTransition:function(t){this.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)}},nt=[M,I,P,L,O,R,N,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){var t=this;c.extend(t,{mousewheel:{enabled:!1,enable:V.enable.bind(t),disable:V.disable.bind(t),handle:V.handle.bind(t),handleMouseEnter:V.handleMouseEnter.bind(t),handleMouseLeave:V.handleMouseLeave.bind(t),lastScrollTime:c.now()}})},on:{init:function(){this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){c.extend(this,{navigation:{init:j.init.bind(this),update:j.update.bind(this),destroy:j.destroy.bind(this)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var n=this.navigation,i=n.$nextEl,r=n.$prevEl;!this.params.navigation.hideOnClick||t(e.target).is(r)||t(e.target).is(i)||(i&&i.toggleClass(this.params.navigation.hiddenClass),r&&r.toggleClass(this.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(t){return t},formatFractionTotal:function(t){return t},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var t=this;c.extend(t,{pagination:{init:U.init.bind(t),render:U.render.bind(t),update:U.update.bind(t),destroy:U.destroy.bind(t),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){this.params.loop?this.pagination.update():void 0===this.snapIndex&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){var n=this;n.params.pagination.el&&n.params.pagination.hideOnClick&&0<n.pagination.$el.length&&!t(e.target).hasClass(n.params.pagination.bulletClass)&&n.pagination.$el.toggleClass(n.params.pagination.hiddenClass)}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var t=this;c.extend(t,{scrollbar:{init:q.init.bind(t),destroy:q.destroy.bind(t),updateSize:q.updateSize.bind(t),setTranslate:q.setTranslate.bind(t),setTransition:q.setTransition.bind(t),enableDraggable:q.enableDraggable.bind(t),disableDraggable:q.disableDraggable.bind(t),setDragPosition:q.setDragPosition.bind(t),onDragStart:q.onDragStart.bind(t),onDragMove:q.onDragMove.bind(t),onDragEnd:q.onDragEnd.bind(t),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(t){this.scrollbar.setTransition(t)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){c.extend(this,{parallax:{setTransform:$.setTransform.bind(this),setTranslate:$.setTranslate.bind(this),setTransition:$.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0)},init:function(){this.params.parallax&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax&&this.parallax.setTranslate()},setTransition:function(t){this.params.parallax&&this.parallax.setTransition(t)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var t=this,e={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(n){e[n]=G[n].bind(t)}),c.extend(t,{zoom:e})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(t){this.zoom.enabled&&this.zoom.onTouchStart(t)},touchEnd:function(t){this.zoom.enabled&&this.zoom.onTouchEnd(t)},doubleTap:function(t){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(t)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){c.extend(this,{lazy:{initialImageLoaded:!1,load:H.load.bind(this),loadInSlide:H.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){var t=this;t.params.lazy.enabled&&(t.params.lazy.loadOnTransitionStart||!t.params.lazy.loadOnTransitionStart&&!t.lazy.initialImageLoaded)&&t.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){var t=this;c.extend(t,{controller:{control:t.params.controller.control,getInterpolateFunction:X.getInterpolateFunction.bind(t),setTranslate:X.setTranslate.bind(t),setTransition:X.setTransition.bind(t)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(t,e){this.controller.control&&this.controller.setTranslate(t,e)},setTransition:function(t,e){this.controller.control&&this.controller.setTransition(t,e)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var e=this;c.extend(e,{a11y:{liveRegion:t('<span class="'+e.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(W).forEach(function(t){e.a11y[t]=W[t].bind(e)})},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){var t=this;c.extend(t,{history:{init:Z.init.bind(t),setHistory:Z.setHistory.bind(t),setHistoryPopState:Z.setHistoryPopState.bind(t),scrollToSlide:Z.scrollToSlide.bind(t),destroy:Z.destroy.bind(t)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){var t=this;c.extend(t,{hashNavigation:{initialized:!1,init:Y.init.bind(t),destroy:Y.destroy.bind(t),setHash:Y.setHash.bind(t),onHashCange:Y.onHashCange.bind(t)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;c.extend(t,{autoplay:{running:!1,paused:!1,run:K.run.bind(t),start:K.start.bind(t),stop:K.stop.bind(t),pause:K.pause.bind(t),onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&this.autoplay.start()},beforeTransitionStart:function(t,e){this.autoplay.running&&(e||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(t):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},destroy:function(){this.autoplay.running&&this.autoplay.stop()}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){c.extend(this,{fadeEffect:{setTranslate:J.setTranslate.bind(this),setTransition:J.setTransition.bind(this)}})},on:{beforeInit:function(){var t=this;if("fade"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};c.extend(t.params,e),c.extend(t.originalParams,e)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(t){"fade"===this.params.effect&&this.fadeEffect.setTransition(t)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){c.extend(this,{cubeEffect:{setTranslate:Q.setTranslate.bind(this),setTransition:Q.setTransition.bind(this)}})},on:{beforeInit:function(){var t=this;if("cube"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"cube"),t.classNames.push(t.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};c.extend(t.params,e),c.extend(t.originalParams,e)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(t){"cube"===this.params.effect&&this.cubeEffect.setTransition(t)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){c.extend(this,{flipEffect:{setTranslate:tt.setTranslate.bind(this),setTransition:tt.setTransition.bind(this)}})},on:{beforeInit:function(){var t=this;if("flip"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"flip"),t.classNames.push(t.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};c.extend(t.params,e),c.extend(t.originalParams,e)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(t){"flip"===this.params.effect&&this.flipEffect.setTransition(t)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){c.extend(this,{coverflowEffect:{setTranslate:et.setTranslate.bind(this),setTransition:et.setTransition.bind(this)}})},on:{beforeInit:function(){var t=this;"coverflow"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"coverflow"),t.classNames.push(t.params.containerModifierClass+"3d"),t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(t){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(t)}}}];return void 0===A.use&&(A.use=A.Class.use,A.installModule=A.Class.installModule),A.use(nt),A});